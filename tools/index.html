<!DOCTYPE html><html lang="zh-CN"><style>body{font-family:"Times New Roman",Helvetica,Tahoma,Arial,notoserifsc-medium,"Microsoft YaHei","Hiragino Sans GB","WenQuanYi Micro Hei",sans-serif!important}.post-md strong{font-weight:700;font-family:inherit!important}</style><head><meta charset="utf-8"><meta content="width=device-width,initial-scale=1,viewport-fit=cover" name="viewport"><title>å·¥å…·ç®± | Yeliqin666</title><meta name="description" content="åˆ˜æ¶¦é’¦çš„ä¸ªäººåšå®¢"><meta property="og:title" content="å·¥å…·ç®± | Yeliqin666"><meta property="og:description" content="åˆ˜æ¶¦é’¦çš„ä¸ªäººåšå®¢"><meta property="og:url" content="https://www.runqinliu666.cn/tools/index.html"><meta property="og:type" content="website"><meta property="og:site_name" content="Yeliqin666"><meta name="twitter:card" content="summary"><link rel="canonical" href="https://www.runqinliu666.cn/tools/index.html"><link rel="alternate" type="application/atom+xml" title="Yeliqin666 RSS" href="/atom.xml"><meta name="hexo-theme-qingzhi" content="v3.0.0"><link rel="alternate icon" type="image/webp" href="/img/favicon.webp"><link rel="preconnect" href="https://cdn.jsdmirror.com" crossorigin><link rel="dns-prefetch" href="//giscus.app"><link rel="dns-prefetch" href="//events.vercount.one"><link rel="preload" href="https://cdn.jsdmirror.com/npm/misans@4.1.0/lib/Normal/MiSans-Regular.min.css" as="style"><link rel="stylesheet" href="https://cdn.jsdmirror.com/npm/misans@4.1.0/lib/Normal/MiSans-Regular.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://cdn.jsdmirror.com/npm/misans@4.1.0/lib/Normal/MiSans-Medium.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://cdn.jsdmirror.com/npm/misans@4.1.0/lib/Normal/MiSans-Semibold.min.css" media="print" onload='this.media="all"'><noscript><link rel="stylesheet" href="https://cdn.jsdmirror.com/npm/misans@4.1.0/lib/Normal/MiSans-Regular.min.css"><link rel="stylesheet" href="https://cdn.jsdmirror.com/npm/misans@4.1.0/lib/Normal/MiSans-Medium.min.css"><link rel="stylesheet" href="https://cdn.jsdmirror.com/npm/misans@4.1.0/lib/Normal/MiSans-Semibold.min.css"></noscript><link rel="stylesheet" href="/css/reset.css"><link rel="stylesheet" href="/css/fonts.css"><link rel="stylesheet" href="/css/highlight/style1.css"><link rel="stylesheet" href="/css/markdown.css"><link rel="stylesheet" href="/css/lightgallery-bundle.min.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/ui.css"><link rel="stylesheet" href="/css/returnToTop.css"><link rel="stylesheet" href="/css/returnToLastPage.css"><link rel="stylesheet" href="/css/toc.css"><link rel="stylesheet" href="/css/modules.css"><meta name="generator" content="Hexo 8.1.1"><style>mjx-container[jax=SVG]{direction:ltr}mjx-container[jax=SVG]>svg{overflow:visible}mjx-container[jax=SVG][display=true]{display:block;text-align:center;margin:1em 0}mjx-container[jax=SVG][justify=left]{text-align:left}mjx-container[jax=SVG][justify=right]{text-align:right}g[data-mml-node=merror]>g{fill:red;stroke:red}g[data-mml-node=merror]>rect[data-background]{fill:yellow;stroke:none}g[data-mml-node=mtable]>line[data-line]{stroke-width:70px;fill:none}g[data-mml-node=mtable]>rect[data-frame]{stroke-width:70px;fill:none}g[data-mml-node=mtable]>.mjx-dashed{stroke-dasharray:140}g[data-mml-node=mtable]>.mjx-dotted{stroke-linecap:round;stroke-dasharray:0,140}g[data-mml-node=mtable]>svg{overflow:visible}[jax=SVG] mjx-tool{display:inline-block;position:relative;width:0;height:0}[jax=SVG] mjx-tool>mjx-tip{position:absolute;top:0;left:0}mjx-tool>mjx-tip{display:inline-block;padding:.2em;border:1px solid #888;font-size:70%;background-color:#f8f8f8;color:#000;box-shadow:2px 2px 5px #aaa}g[data-mml-node=maction][data-toggle]{cursor:pointer}mjx-status{display:block;position:fixed;left:1em;bottom:1em;min-width:25%;padding:.2em .4em;border:1px solid #888;font-size:90%;background-color:#f8f8f8;color:#000}foreignObject[data-mjx-xml]{font-family:initial;line-height:normal;overflow:visible}.MathJax path{stroke-width:3}mjx-container[display=true]{overflow:auto hidden}mjx-container[display=true]+br{display:none}</style></head><style>:root{--accent:#5B8BA4;--font-color-0:#5B8BA4;--font-color-1:#2D2D32;--bg-outer:#F5F7F9;--bg-paper:#FCFCFD;--surface:#EDF0F4;--font-color-2:#697880;--font-color-3:#6E7F8A;--bg-zebra:#F1F4F7;--border-warm:#DCE1E7;--line-1:#DCE1E7;--line-2:#DCE1E7;--series-accent:#6B9E5F;--waline-theme-color:#2D2D32;--waline-color:#2D2D32;--waline-border-color:#2D2D32;--waline-white:#2D2D32;--waline-bgcolor-light:#FCFCFD}.wl-card span.wl-nick{color:#2d2d32}.wl-card .wl-badge{border:1px solid #2d2d32;color:#2d2d32}.wl-btn{border:1px solid #2d2d32;color:#2d2d32}.wl-btn.primary{color:#fcfcfd}.wl-header label{color:#2d2d32}[data-waline] p{color:#2d2d32}[data-waline] a{color:#2d2d32}.wl-sort li.active{color:#2d2d32}.wl-card .wl-meta>span{background:#fcfcfd}.wl-panel{background:#fcfcfd}.index-main{background:#fcfcfd}.progress-wrap .btn-icon{color:#2d2d32}.progress-wrap svg.progress-circle path{stroke:color-mix(in srgb,#2D2D32 15%,transparent)}.progress-wrap:hover svg.progress-circle path{stroke:color-mix(in srgb,#5B8BA4 50%,transparent)}.return-to-last-progress-wrap .btn-icon{color:#2d2d32}.return-to-last-progress-wrap svg.progress-circle path{stroke:color-mix(in srgb,#2D2D32 15%,transparent)}.return-to-last-progress-wrap:hover svg.progress-circle path{stroke:color-mix(in srgb,#5B8BA4 50%,transparent)}.left-toc-container::-webkit-scrollbar-thumb{background-color:#2d2d32}</style><body><div class="paper"><div class="shadow-drop-2-bottom paper-main"><div class="header"><div class="header-container"><img alt="^-^" cache-control="max-age=86400" class="header-img" src="/img/favicon.webp" width="48" height="48"><div class="header-content"><a class="logo" href="/">Yeliqin666</a> <span class="description">åˆ˜æ¶¦é’¦çš„ä¸ªäººåšå®¢</span></div></div><nav class="site-nav"><a class="site-nav-item" href="/">ğŸƒé¦–é¡µ</a> <a class="site-nav-item" href="/list/">ğŸŒ•æ–‡ç« </a> <a class="site-nav-item" href="/fragments/">ğŸ“…ç¢ç‰‡</a> <a class="site-nav-item" href="/about/">ğŸ“°å…³äº</a> <a class="site-nav-item is-active" href="/tools/">ğŸ§°å·¥å…·ç®±</a> <a class="site-nav-item" href="/friends/">ğŸ¤å‹é“¾</a></nav></div><style>.tools-page{padding:0 0 40px}.tools-header{text-align:center;margin:8px 0 18px}.tools-subtitle{color:var(--font-color-3);font-size:.82em}.tools-filters{display:flex;flex-wrap:wrap;gap:8px;justify-content:center;margin-bottom:24px}.tf-btn{border:1px solid var(--border-warm);background:var(--bg-paper);padding:5px 15px;border-radius:20px;cursor:pointer;font-size:.82em;transition:all .2s;font-family:inherit;color:var(--font-color-1)}.tf-btn:hover{border-color:var(--accent);color:var(--accent)}.tf-btn.active{background:var(--accent);color:#fff;border-color:var(--accent)}.tools-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(180px,1fr));gap:14px}.tool-card{background:var(--bg-paper);border:1px solid var(--border-warm);border-radius:var(--radius-m);padding:18px 14px;text-align:center;cursor:pointer;transition:all .3s var(--ease-soft);user-select:none;position:relative;overflow:hidden}.tool-card::after{content:'';position:absolute;top:0;left:0;right:0;height:2px;background:var(--accent);transform:scaleX(0);transition:transform .3s;transform-origin:left}.tool-card:hover{transform:translateY(-2px);box-shadow:var(--shadow-hover);border-color:color-mix(in srgb,var(--accent) 30%,var(--border-warm))}.tool-card:hover::after{transform:scaleX(1)}.tool-card.hidden{display:none}.tc-icon{font-size:1.8em;margin-bottom:6px;line-height:1.2}.tc-name{font-weight:600;font-size:.88em;margin-bottom:3px;color:var(--font-color-1)}.tc-desc{color:var(--font-color-3);font-size:.72em;line-height:1.4}.tool-overlay{display:none;position:fixed;inset:0;background:rgba(0,0,0,.45);z-index:10000;align-items:center;justify-content:center;backdrop-filter:blur(6px);-webkit-backdrop-filter:blur(6px);padding:20px;box-sizing:border-box;opacity:0;transition:opacity .25s ease}.tool-overlay.open{display:flex;animation:ovFadeIn .25s ease forwards}@keyframes ovFadeIn{from{opacity:0}to{opacity:1}}.tool-modal{background:var(--bg-paper);border-radius:16px;width:100%;max-width:920px;max-height:88vh;display:flex;flex-direction:column;box-shadow:0 8px 32px rgba(0,0,0,.12),0 2px 8px rgba(0,0,0,.06);overflow:hidden;transform:translateY(24px) scale(.97);animation:modalSlideUp .3s cubic-bezier(.22,1,.36,1) forwards;position:relative}.tool-modal::before{content:'';position:absolute;top:0;left:0;right:0;height:3px;background:var(--accent);border-radius:16px 16px 0 0;z-index:1}@keyframes modalSlideUp{from{transform:translateY(24px) scale(.97);opacity:.7}to{transform:translateY(0) scale(1);opacity:1}}.tool-mh{display:flex;align-items:center;justify-content:space-between;padding:16px 20px;border-bottom:1px solid var(--border-warm);flex-shrink:0;background:linear-gradient(180deg,var(--bg-zebra),var(--bg-paper))}.tool-mh h2{margin:0;font-size:1em;font-weight:600;color:var(--font-color-1)}.tool-mh .close{background:0 0;border:1px solid var(--border-warm);font-size:1.1em;cursor:pointer;color:var(--font-color-3);width:32px;height:32px;border-radius:50%;display:flex;align-items:center;justify-content:center;padding:0;transition:all .2s;line-height:1}.tool-mh .close:hover{color:#fff;background:#f56c6c;border-color:#f56c6c;transform:rotate(90deg)}.tool-mb{padding:20px;overflow-y:auto;overflow-x:hidden;flex:1;-webkit-overflow-scrolling:touch}.t-ta{width:100%;min-height:100px;border:1px solid var(--border-warm);border-radius:8px;padding:10px;font-family:'Fira Code','Cascadia Code',monospace;font-size:.82em;resize:vertical;box-sizing:border-box;line-height:1.5}.t-ta:focus{outline:0;border-color:var(--accent);box-shadow:0 0 0 2px color-mix(in srgb,var(--accent) 12%,transparent)}@media (max-width:600px){.t-ta{min-height:80px;font-size:.78em}}.t-in{width:100%;border:1px solid var(--border-warm);border-radius:8px;padding:8px 10px;font-size:.88em;box-sizing:border-box}.t-in:focus{outline:0;border-color:var(--accent)}.t-btn{background:var(--accent);color:#fff;border:none;padding:7px 18px;border-radius:8px;cursor:pointer;font-size:.82em;transition:background .2s;font-family:inherit}.t-btn:hover{filter:brightness(.88)}.t-btn-o{background:var(--bg-paper);color:var(--accent);border:1px solid var(--accent)}.t-btn-o:hover{background:color-mix(in srgb,var(--accent) 5%,#fff)}.t-btn-s{background:#67c23a}.t-btn-s:hover{background:#529b2e}.t-btn-d{background:#f56c6c}.t-btn-d:hover{background:#c45656}.t-res{background:var(--bg-zebra);border-radius:8px;padding:14px;margin-top:10px;font-family:'Fira Code',monospace;font-size:.82em;white-space:pre-wrap;word-break:break-all;max-height:300px;overflow:auto}.t-row{display:flex;gap:10px;margin-bottom:10px;align-items:center;flex-wrap:wrap}.t-lbl{font-size:.82em;color:var(--font-color-2);margin-bottom:3px;font-weight:500}.t-split{display:grid;grid-template-columns:1fr 1fr;gap:14px}.t-split>*{min-width:0}.t-sel{border:1px solid var(--border-warm);border-radius:8px;padding:7px 10px;font-size:.85em;background:var(--bg-paper);font-family:inherit;min-width:80px}@media(max-width:600px){.t-split{grid-template-columns:1fr;height:auto!important;max-height:none!important}.tools-grid{grid-template-columns:repeat(auto-fill,minmax(140px,1fr))}input[type=file]{max-width:200px}}canvas.t-cv{border:1px solid var(--border-warm);border-radius:8px;display:block;max-width:100%}.pt-grid{display:grid;grid-template-columns:repeat(18,1fr);gap:1px;font-size:.55em}.pt-cell{border:1px solid var(--border-warm);border-radius:3px;padding:1px;text-align:center;cursor:pointer;transition:.15s;min-height:32px;display:flex;flex-direction:column;align-items:center;justify-content:center}.pt-cell:hover{transform:scale(1.4);z-index:2;box-shadow:0 2px 8px rgba(0,0,0,.15)}.pt-cell .n{font-size:.7em;color:var(--font-color-3)}.pt-cell .s{font-weight:700;font-size:1.15em}.pt-empty{border:none;pointer-events:none}.pt-marker{font-size:.6em;color:var(--accent);font-weight:600;display:flex;align-items:center;justify-content:center}.ct-table{width:100%;border-collapse:collapse;font-size:.82em}.ct-table th{background:var(--bg-zebra);padding:6px 8px;text-align:left;border-bottom:2px solid var(--border-warm);position:sticky;top:0}.ct-table td{padding:6px 8px;border-bottom:1px solid var(--surface)}.ct-table tr:hover{background:color-mix(in srgb,var(--accent) 6%,transparent)}.pomo-time{font-size:3.5em;font-family:'Fira Code',monospace;text-align:center;font-weight:700;color:var(--font-color-1);margin:8px 0}.pomo-label{text-align:center;font-size:.88em;color:var(--font-color-3);margin-bottom:10px}.typ-text{font-size:1.05em;line-height:1.8;padding:14px;background:var(--bg-zebra);border-radius:8px;margin-bottom:10px;font-family:inherit;white-space:pre-wrap}.typ-ok{color:#67c23a}.typ-err{color:#f56c6c;background:#fef0f0;border-radius:2px}.typ-cur{border-left:2px solid var(--accent);animation:tblink .8s infinite}@keyframes tblink{50%{opacity:0}}.grad-preview{width:100%;height:100px;border-radius:10px;border:1px solid #ddd;margin-bottom:10px}.diff-add{background:#e6ffed;color:#22863a}.diff-del{background:#ffeef0;color:#cb2431}.jwt-part{border-radius:8px;padding:10px;margin-bottom:8px;font-family:'Fira Code',monospace;font-size:.8em;word-break:break-all}.jwt-header{background:#fff3e0}.jwt-payload{background:#e8f5e9}.jwt-sig{background:#e3f2fd}.ns-card{display:inline-flex;flex-direction:column;align-items:center;gap:4px;padding:12px;border:2px solid var(--border-warm);border-radius:12px;cursor:pointer;transition:.2s;min-width:70px}.ns-card.active{border-color:var(--accent);background:color-mix(in srgb,var(--accent) 5%,#fff)}.ns-card:hover{border-color:var(--accent)}.ns-card .ns-emoji{font-size:1.6em}.ns-card .ns-lbl{font-size:.65em;color:var(--font-color-2)}.metro-circle{width:24px;height:24px;border-radius:50%;display:inline-block;border:2px solid var(--border-warm);transition:.1s}.metro-circle.beat{background:var(--accent);border-color:var(--accent);transform:scale(1.3)}.metro-circle.accent{background:#f56c6c;border-color:#f56c6c;transform:scale(1.3)}.qr-shape{display:inline-block;padding:6px 12px;border:1px solid var(--border-warm);border-radius:6px;cursor:pointer;font-size:.78em;transition:.2s}.qr-shape.active{border-color:var(--accent);background:color-mix(in srgb,var(--accent) 5%,#fff)}.focus-sound{display:inline-flex;align-items:center;gap:4px;padding:6px 12px;border:1px solid var(--border-warm);border-radius:16px;cursor:pointer;font-size:.78em;transition:.2s}.focus-sound.active{border-color:var(--accent);background:color-mix(in srgb,var(--accent) 5%,#fff)}.color-swatch{width:100%;height:60px;border-radius:10px;border:1px solid var(--border-warm);margin:10px 0}.t-btn:active{transform:scale(.96)}.t-in:focus,.t-sel:focus{outline:0;border-color:var(--accent);box-shadow:0 0 0 2px color-mix(in srgb,var(--accent) 12%,transparent);transform:translateY(-1px);transition:all .2s var(--ease-soft)}.t-res:not(:empty){animation:tFadeSlide .25s ease}@keyframes tFadeSlide{from{opacity:0;transform:translateY(6px)}to{opacity:1;transform:translateY(0)}}.tool-card:hover .tc-icon{animation:tcBounce .4s ease}@keyframes tcBounce{0%,100%{transform:scale(1)}40%{transform:scale(1.2)}70%{transform:scale(.95)}}.tf-btn{transition:all .25s cubic-bezier(.22,1,.36,1)}.tf-btn:active{transform:scale(.93)}</style><div class="tools-page"><div class="tools-header"><div class="subpage-title">ğŸ§°<i>å·¥å…·ç®±</i></div><div class="tools-subtitle">42 ä¸ªå·¥å…· Â· é›¶åç«¯ Â· çº¯å‰ç«¯ Â· ä½ çš„æ•°æ®åªå±äºä½ </div></div><div class="tools-filters" id="toolFilters"></div><div class="tools-grid" id="toolGrid"></div></div><div class="tool-overlay" id="toolOverlay"><div class="tool-modal"><div class="tool-mh"><h2 id="toolTitle"></h2><button class="close" id="toolClose">&times;</button></div><div class="tool-mb" id="toolBody"></div></div></div><script>window.meting_api||(window.meting_api="https://meting.qjqq.cn/?server=:server&type=:type&id=:id"),window.meting_api_list=["https://meting.qjqq.cn/?server=:server&type=:type&id=:id","https://api.injahow.cn/meting/?server=:server&type=:type&id=:id&r=:r","https://api.i-meto.com/meting/api?server=:server&type=:type&id=:id"],function(){"use strict";const t={};function e(e){return t[e]||(t[e]=new Promise((t,n)=>{const a=document.createElement("script");a.src=e,a.onload=t,a.onerror=()=>n(new Error("CDN load failed: "+e)),document.head.appendChild(a)}))}function n(){return window.math?Promise.resolve(window.math):e("https://cdn.jsdelivr.net/npm/mathjs@13.2.3/lib/browser/math.min.js").then(function(){return window.math})}async function a(){!function(t){if(!document.querySelector('link[href="'+t+'"]')){const e=document.createElement("link");e.rel="stylesheet",e.href=t,document.head.appendChild(e)}}("https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css"),await e("https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js")}function l(t){if("undefined"==typeof katex)return t;try{return katex.renderToString(t,{throwOnError:!1,displayMode:!1})}catch(e){return t}}function i(t){if("undefined"==typeof katex)return t;try{return katex.renderToString(t,{throwOnError:!1,displayMode:!0})}catch(e){return t}}const o=[["c","å…‰é€Ÿ","2.998 \\times 10^{8}","m/s"],["h","æ™®æœ—å…‹å¸¸æ•°","6.626 \\times 10^{-34}","J \\cdot s"],["\\hbar","çº¦åŒ–æ™®æœ—å…‹","1.055 \\times 10^{-34}","J \\cdot s"],["k_B","ç»å°”å…¹æ›¼å¸¸æ•°","1.381 \\times 10^{-23}","J/K"],["N_A","é˜¿ä¼ä¼½å¾·ç½—å¸¸æ•°","6.022 \\times 10^{23}","mol^{-1}"],["e","å…ƒç”µè·","1.602 \\times 10^{-19}","C"],["m_e","ç”µå­è´¨é‡","9.109 \\times 10^{-31}","kg"],["m_p","è´¨å­è´¨é‡","1.673 \\times 10^{-27}","kg"],["G","ä¸‡æœ‰å¼•åŠ›å¸¸æ•°","6.674 \\times 10^{-11}","N \\cdot m^2/kg^2"],["\\varepsilon_0","çœŸç©ºä»‹ç”µå¸¸æ•°","8.854 \\times 10^{-12}","F/m"],["\\mu_0","çœŸç©ºç£å¯¼ç‡","1.257 \\times 10^{-6}","H/m"],["\\alpha","ç²¾ç»†ç»“æ„å¸¸æ•°","7.297 \\times 10^{-3}",""],["a_0","ç»å°”åŠå¾„","5.292 \\times 10^{-11}","m"],["R_\\infty","é‡Œå¾·ä¼¯å¸¸æ•°","1.097 \\times 10^{7}","m^{-1}"],["R","æ°”ä½“å¸¸æ•°","8.314","J/(mol \\cdot K)"],["\\sigma","æ–¯ç‰¹è—©-ç»å°”å…¹æ›¼","5.670 \\times 10^{-8}","W/(m^2 \\cdot K^4)"],["u","åŸå­è´¨é‡å•ä½","1.661 \\times 10^{-27}","kg"],["\\mu_B","ç»å°”ç£å­","9.274 \\times 10^{-24}","J/T"],["eV","ç”µå­ä¼","1.602 \\times 10^{-19}","J"],["g","é‡åŠ›åŠ é€Ÿåº¦","9.807","m/s^2"],["\\lambda_C","åº·æ™®é¡¿æ³¢é•¿","2.426 \\times 10^{-12}","m"],["F","æ³•æ‹‰ç¬¬å¸¸æ•°","96485","C/mol"]],r="H He Li Be B C N O F Ne Na Mg Al Si P S Cl Ar K Ca Sc Ti V Cr Mn Fe Co Ni Cu Zn Ga Ge As Se Br Kr Rb Sr Y Zr Nb Mo Tc Ru Rh Pd Ag Cd In Sn Sb Te I Xe Cs Ba La Ce Pr Nd Pm Sm Eu Gd Tb Dy Ho Er Tm Yb Lu Hf Ta W Re Os Ir Pt Au Hg Tl Pb Bi Po At Rn Fr Ra Ac Th Pa U Np Pu Am Cm Bk Cf Es Fm Md No Lr Rf Db Sg Bh Hs Mt Ds Rg Cn Nh Fl Mc Lv Ts Og".split(" "),s="æ°¢ æ°¦ é”‚ é“ ç¡¼ ç¢³ æ°® æ°§ æ°Ÿ æ°– é’  é• é“ ç¡… ç£· ç¡« æ°¯ æ°© é’¾ é’™ é’ª é’› é’’ é“¬ é”° é“ é’´ é• é“œ é”Œ é•“ é”— ç · ç¡’ æº´ æ°ª é“· é”¶ é’‡ é”† é“Œ é’¼ é” é’Œ é“‘ é’¯ é“¶ é•‰ é“Ÿ é”¡ é”‘ ç¢² ç¢˜ æ°™ é“¯ é’¡ é•§ é“ˆ é•¨ é’• é’· é’ é“• é’† é“½ é• é’¬ é“’ é“¥ é•± é•¥ é“ª é’½ é’¨ é“¼ é”‡ é“± é“‚ é‡‘ æ± é“Š é“… é“‹ é’‹ ç ¹ æ°¡ é’« é•­ é”• é’ é•¤ é“€ é• é’š é•… é”” é”« é” é”¿ é•„ é’” é”˜ é“¹ ğ¬¬» ğ¬­Š ğ¬­³ ğ¬­› ğ¬­¶ é¿ é¿” é¿¬ Cn Nh Fl Mc Lv Ts Og".split(" "),c="1.008 4.003 6.941 9.012 10.81 12.01 14.01 16.00 19.00 20.18 22.99 24.31 26.98 28.09 30.97 32.07 35.45 39.95 39.10 40.08 44.96 47.87 50.94 52.00 54.94 55.85 58.93 58.69 63.55 65.38 69.72 72.63 74.92 78.97 79.90 83.80 85.47 87.62 88.91 91.22 92.91 95.95 98 101.1 102.9 106.4 107.9 112.4 114.8 118.7 121.8 127.6 126.9 131.3 132.9 137.3 138.9 140.1 140.9 144.2 145 150.4 152.0 157.3 158.9 162.5 164.9 167.3 168.9 173.0 175.0 178.5 180.9 183.8 186.2 190.2 192.2 195.1 197.0 200.6 204.4 207.2 209.0 209 210 222 223 226 227 232.0 231.0 238.0 237 244 243 247 247 251 252 257 258 259 266 267 268 269 270 277 278 281 282 285 286 289 290 293 294 294".split(" "),d=["1sÂ¹","1sÂ²","[He]2sÂ¹","[He]2sÂ²","[He]2sÂ²2pÂ¹","[He]2sÂ²2pÂ²","[He]2sÂ²2pÂ³","[He]2sÂ²2pâ´","[He]2sÂ²2pâµ","[He]2sÂ²2pâ¶","[Ne]3sÂ¹","[Ne]3sÂ²","[Ne]3sÂ²3pÂ¹","[Ne]3sÂ²3pÂ²","[Ne]3sÂ²3pÂ³","[Ne]3sÂ²3pâ´","[Ne]3sÂ²3pâµ","[Ne]3sÂ²3pâ¶","[Ar]4sÂ¹","[Ar]4sÂ²","[Ar]3dÂ¹4sÂ²","[Ar]3dÂ²4sÂ²","[Ar]3dÂ³4sÂ²","[Ar]3dâµ4sÂ¹","[Ar]3dâµ4sÂ²","[Ar]3dâ¶4sÂ²","[Ar]3dâ·4sÂ²","[Ar]3dâ¸4sÂ²","[Ar]3dÂ¹â°4sÂ¹","[Ar]3dÂ¹â°4sÂ²","[Ar]3dÂ¹â°4sÂ²4pÂ¹","[Ar]3dÂ¹â°4sÂ²4pÂ²","[Ar]3dÂ¹â°4sÂ²4pÂ³","[Ar]3dÂ¹â°4sÂ²4pâ´","[Ar]3dÂ¹â°4sÂ²4pâµ","[Ar]3dÂ¹â°4sÂ²4pâ¶","[Kr]5sÂ¹","[Kr]5sÂ²","[Kr]4dÂ¹5sÂ²","[Kr]4dÂ²5sÂ²","[Kr]4dâ´5sÂ¹","[Kr]4dâµ5sÂ¹","[Kr]4dâµ5sÂ²","[Kr]4dâ·5sÂ¹","[Kr]4dâ¸5sÂ¹","[Kr]4dÂ¹â°","[Kr]4dÂ¹â°5sÂ¹","[Kr]4dÂ¹â°5sÂ²","[Kr]4dÂ¹â°5sÂ²5pÂ¹","[Kr]4dÂ¹â°5sÂ²5pÂ²","[Kr]4dÂ¹â°5sÂ²5pÂ³","[Kr]4dÂ¹â°5sÂ²5pâ´","[Kr]4dÂ¹â°5sÂ²5pâµ","[Kr]4dÂ¹â°5sÂ²5pâ¶","[Xe]6sÂ¹","[Xe]6sÂ²","[Xe]5dÂ¹6sÂ²","[Xe]4fÂ¹5dÂ¹6sÂ²","[Xe]4fÂ³6sÂ²","[Xe]4fâ´6sÂ²","[Xe]4fâµ6sÂ²","[Xe]4fâ¶6sÂ²","[Xe]4fâ·6sÂ²","[Xe]4fâ·5dÂ¹6sÂ²","[Xe]4fâ¹6sÂ²","[Xe]4fÂ¹â°6sÂ²","[Xe]4fÂ¹Â¹6sÂ²","[Xe]4fÂ¹Â²6sÂ²","[Xe]4fÂ¹Â³6sÂ²","[Xe]4fÂ¹â´6sÂ²","[Xe]4fÂ¹â´5dÂ¹6sÂ²","[Xe]4fÂ¹â´5dÂ²6sÂ²","[Xe]4fÂ¹â´5dÂ³6sÂ²","[Xe]4fÂ¹â´5dâ´6sÂ²","[Xe]4fÂ¹â´5dâµ6sÂ²","[Xe]4fÂ¹â´5dâ¶6sÂ²","[Xe]4fÂ¹â´5dâ·6sÂ²","[Xe]4fÂ¹â´5dâ¹6sÂ¹","[Xe]4fÂ¹â´5dÂ¹â°6sÂ¹","[Xe]4fÂ¹â´5dÂ¹â°6sÂ²","[Xe]4fÂ¹â´5dÂ¹â°6sÂ²6pÂ¹","[Xe]4fÂ¹â´5dÂ¹â°6sÂ²6pÂ²","[Xe]4fÂ¹â´5dÂ¹â°6sÂ²6pÂ³","[Xe]4fÂ¹â´5dÂ¹â°6sÂ²6pâ´","[Xe]4fÂ¹â´5dÂ¹â°6sÂ²6pâµ","[Xe]4fÂ¹â´5dÂ¹â°6sÂ²6pâ¶","[Rn]7sÂ¹","[Rn]7sÂ²","[Rn]6dÂ¹7sÂ²","[Rn]6dÂ²7sÂ²","[Rn]5fÂ²6dÂ¹7sÂ²","[Rn]5fÂ³6dÂ¹7sÂ²","[Rn]5fâ´6dÂ¹7sÂ²","[Rn]5fâ¶7sÂ²","[Rn]5fâ·7sÂ²","[Rn]5fâ·6dÂ¹7sÂ²","[Rn]5fâ¹7sÂ²","[Rn]5fÂ¹â°7sÂ²","[Rn]5fÂ¹Â¹7sÂ²","[Rn]5fÂ¹Â²7sÂ²","[Rn]5fÂ¹Â³7sÂ²","[Rn]5fÂ¹â´7sÂ²","[Rn]5fÂ¹â´7sÂ²7pÂ¹","[Rn]5fÂ¹â´6dÂ²7sÂ²","[Rn]5fÂ¹â´6dÂ³7sÂ²","[Rn]5fÂ¹â´6dâ´7sÂ²","[Rn]5fÂ¹â´6dâµ7sÂ²","[Rn]5fÂ¹â´6dâ¶7sÂ²","[Rn]5fÂ¹â´6dâ·7sÂ²","[Rn]5fÂ¹â´6dâ¹7sÂ¹","[Rn]5fÂ¹â´6dÂ¹â°7sÂ¹","[Rn]5fÂ¹â´6dÂ¹â°7sÂ²","[Rn]5fÂ¹â´6dÂ¹â°7sÂ²7pÂ¹","[Rn]5fÂ¹â´6dÂ¹â°7sÂ²7pÂ²","[Rn]5fÂ¹â´6dÂ¹â°7sÂ²7pÂ³","[Rn]5fÂ¹â´6dÂ¹â°7sÂ²7pâ´","[Rn]5fÂ¹â´6dÂ¹â°7sÂ²7pâµ","[Rn]5fÂ¹â´6dÂ¹â°7sÂ²7pâ¶"],p=[-259,-272,181,1287,2075,3550,-210,-219,-220,-249,98,650,660,1414,44,115,-101,-189,63,842,1541,1668,1910,1907,1246,1538,1495,1455,1085,420,30,938,817,221,-7,-157,39,777,1526,1855,2477,2623,2157,2334,1964,1555,962,321,157,232,631,450,114,-112,28,727,920,795,935,1024,1042,1072,822,1312,1356,1412,1474,1529,1545,824,1663,2233,3017,3422,3186,3033,2466,1769,1064,357,304,327,271,254,302,-71,27,700,1050,1842,1568,1132,637,639,1176,1340,900,860,1527,-9999,-9999,-9999,-9999,-9999,-9999,-9999,-9999,-9999,-9999,-9999,-9999,-9999,-9999,-9999,-9999,-9999,-9999],u=[-253,-269,1342,2468,4e3,4027,-196,-183,-188,-246,883,1090,2519,3265,281,445,-34,-186,759,1484,2836,3287,3407,2671,2061,2862,2927,2913,2562,907,2204,2833,614,685,59,-153,688,1377,3345,4406,4741,4639,4265,4147,3695,2963,2162,767,2072,2602,1587,988,184,-108,671,1845,3464,3443,3520,3074,3e3,1794,1527,3273,3230,2567,2720,2868,1950,1196,3402,4603,5458,5555,5596,5012,4428,3825,2856,2856,630,1473,1749,962,345,211,-62,677,1737,3200,5061,4027,4131,4e3,3228,2607,2011,2720,-9999,-9999,-9999,-9999,-9999,-9999,-9999,-9999,-9999,-9999,-9999,-9999,-9999,-9999,-9999,-9999,-9999,-9999],f=[2.2,0,.98,1.57,2.04,2.55,3.04,3.44,3.98,0,.93,1.31,1.61,1.9,2.19,2.58,3.16,0,.82,1,1.36,1.54,1.63,1.66,1.55,1.83,1.88,1.91,1.9,1.65,1.81,2.01,2.18,2.55,2.96,3,.82,.95,1.22,1.33,1.6,2.16,1.9,2.2,2.28,2.2,1.93,1.69,1.78,1.96,2.05,2.1,2.66,2.6,.79,.89,1.1,1.12,1.13,1.14,0,1.17,0,1.2,0,1.22,1.23,1.24,1.25,0,1.27,1.3,1.5,2.36,1.9,2.2,2.2,2.28,2.54,2,1.62,2.33,2.02,2,2.2,0,.7,.9,1.1,1.3,1.5,1.38,1.36,1.28,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],v=[.09,.18,.53,1.85,2.34,2.27,1.25,1.43,1.7,.9,.97,1.74,2.7,2.33,1.82,2.07,3.21,1.78,.86,1.55,2.99,4.51,6.11,7.19,7.44,7.87,8.9,8.91,8.96,7.13,5.91,5.32,5.73,4.81,3.12,3.75,1.53,2.63,4.47,6.51,8.57,10.28,11.5,12.37,12.45,12.02,10.5,8.65,7.31,7.29,6.7,6.24,4.93,5.89,1.87,3.59,6.15,6.77,6.77,7.01,7.26,7.52,5.24,7.9,8.23,8.55,8.8,9.07,9.32,6.9,9.84,13.31,16.65,19.35,21.02,22.59,22.56,21.45,19.32,13.55,11.85,11.34,9.75,9.2,0,9.73,0,5.5,10.07,11.72,15.4,19.1,20.45,19.84,13.69,13.51,14.78,15.1,8.84,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],h=[[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2],[3,4,0,0,0,0,0,0,0,0,0,0,5,6,7,8,9,10],[11,12,0,0,0,0,0,0,0,0,0,0,13,14,15,16,17,18],[19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36],[37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54],[55,56,-1,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86],[87,88,-2,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,-3,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71],[0,0,-4,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103]];function m(t){return[3,11,19,37,55,87].includes(t)?"#ff6b6b":[4,12,20,38,56,88].includes(t)?"#ffa94d":[9,17,35,53,85,117].includes(t)?"#a9e34b":[2,10,18,36,54,86,118].includes(t)?"#74c0fc":[5,14,32,33,51,52].includes(t)?"#da77f2":[1,6,7,8,15,16,34].includes(t)?"#69db7c":t>=57&&t<=71?"#ffd43b":t>=89&&t<=103?"#f783ac":t>=21&&t<=30||t>=39&&t<=48||t>=72&&t<=80||t>=104&&t<=112?"#91d5ff":"#d0d0d0"}const b={A:".-",B:"-...",C:"-.-.",D:"-..",E:".",F:"..-.",G:"--.",H:"....",I:"..",J:".---",K:"-.-",L:".-..",M:"--",N:"-.",O:"---",P:".--.",Q:"--.-",R:".-.",S:"...",T:"-",U:"..-",V:"...-",W:".--",X:"-..-",Y:"-.--",Z:"--..",0:"-----",1:".----",2:"..---",3:"...--",4:"....-",5:".....",6:"-....",7:"--...",8:"---..",9:"----."},x={};Object.entries(b).forEach(([t,e])=>x[e]=t);const y=[{id:"audioplayer",name:"éŸ³é¢‘æ’­æ”¾å™¨",icon:"ğŸ§",cat:"music",desc:"ç½‘æ˜“äº‘/QQ/é…·ç‹—è§£æ Â· æ­Œè¯ Â· ä¸‹è½½",html:()=>'<style>.ap-upper{display:flex;gap:10px;margin:4px 0;flex-wrap:wrap}.ap-input-area{flex:1;min-width:200px}.ap-lrc-area{background:linear-gradient(135deg,#0d1117,#161b22);border-radius:10px;padding:22px 16px;min-height:80px;display:flex;flex-direction:column;align-items:center;justify-content:center;margin:6px 0;gap:4px}.ap-lrc-line{color:rgba(255,255,255,.35);font-size:13px;line-height:1.8;transition:all .35s ease;text-align:center}.ap-lrc-line.active{color:#fff;font-size:16px;font-weight:600;text-shadow:0 0 12px rgba(64,158,255,.45)}.ap-lrc-empty{color:rgba(255,255,255,.2);font-size:13px}.ap-player-box{margin:6px 0}.ap-player-box.aplayer{box-shadow:none!important;border:1px solid #e8e8e8!important;border-radius:10px!important}.ap-player-box .aplayer-lrc{height:0!important;overflow:hidden!important;margin:0!important;padding:0!important}.ap-player-box .aplayer-list{display:block!important;height:auto!important;max-height:400px!important;overflow-y:auto!important}.ap-player-box .aplayer-list ol{display:block!important}.ap-ctrls{display:none;align-items:center;justify-content:center;gap:16px;margin:6px 0;padding:6px 0}.ap-cb{background:none;border:1px solid #ddd;border-radius:50%;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .2s;color:#666;padding:0}.ap-cb:hover{border-color:#409EFF;color:#409EFF}.ap-cb-sm{width:32px;height:32px;font-size:13px}.ap-cb-lg{width:42px;height:42px;font-size:18px;border-color:#409EFF;color:#409EFF}.ap-status{text-align:center;font-size:.72em;margin:2px 0;min-height:1.2em}.ap-player-box .aplayer-list ol li{position:relative!important;padding-right:48px!important}.ap-dl-wrap{position:absolute;right:4px;top:0;bottom:0;display:flex;align-items:center;gap:2px}.ap-player-box .aplayer-list ol li .ap-dl-wrap{opacity:0;transition:opacity .15s}.ap-player-box .aplayer-list ol li:hover .ap-dl-wrap{opacity:1}.ap-dl-wrap a{color:#bbb;font-size:11px;text-decoration:none;padding:2px 3px;border-radius:3px;transition:color .2s;cursor:pointer}.ap-dl-wrap a:hover{color:#409EFF}.ap-mode-inline{cursor:pointer;display:inline-flex!important;align-items:center;justify-content:center;padding:0 3px}.ap-mode-inline svg{width:15px;height:15px;fill:#409EFF;opacity:.7;transition:opacity .2s}.ap-mode-inline:hover svg{opacity:1}@media(hover:none){.ap-dl-wrap{opacity:1!important}}</style><div class="ap-upper"><div class="ap-input-area"><input class="t-in" id="apUrl" placeholder="ç²˜è´´éŸ³ä¹é“¾æ¥æˆ–è¾“å…¥ IDâ€¦" style="width:100%;margin-bottom:6px"><div style="font-size:.68em;color:#aaa;margin:2px 0">æ”¯æŒç½‘æ˜“äº‘/QQéŸ³ä¹/é…·ç‹— Â· æ­Œå•/å•æ›²/ä¸“è¾‘ Â· ç²˜è´´é“¾æ¥è‡ªåŠ¨è§£æ<br>âš  ä»…å¯è§£æå…è´¹æ­Œæ›²ï¼ŒVIPåŠäº‘ç›˜æ­Œæ›²æ— æ³•æ’­æ”¾</div><div class="t-row" style="gap:6px"><button class="t-btn" id="apGo">â–¶ åŠ è½½</button><label class="t-btn t-btn-s" style="cursor:pointer">ğŸ“‚ æœ¬åœ°æ–‡ä»¶<input type="file" id="apFile" accept="audio/*" multiple style="display:none"></label></div></div></div><div class="ap-lrc-area" id="apLrc"><span class="ap-lrc-empty">â™ª</span></div><div class="ap-ctrls" id="apCtrls"><button class="ap-cb ap-cb-sm" id="apPrev" title="ä¸Šä¸€é¦–">â®</button><button class="ap-cb ap-cb-lg" id="apPlayPause" title="æ’­æ”¾/æš‚åœ">â–¶</button><button class="ap-cb ap-cb-sm" id="apNext" title="ä¸‹ä¸€é¦–">â­</button></div><div class="ap-player-box" id="apBox"></div><div class="ap-status" id="apStatus"></div><div id="apAlbumDl" style="display:none;margin:6px 0;text-align:center"><div class="t-row" style="gap:6px;justify-content:center;flex-wrap:wrap"><button class="t-btn t-btn-o" id="apDlAllAudio" style="font-size:.72em">â¬‡ å…¨éƒ¨éŸ³é¢‘</button><button class="t-btn t-btn-o" id="apDlAllLrc" style="font-size:.72em">ğŸ“ å…¨éƒ¨æ­Œè¯</button></div><div style="font-size:.65em;color:#bbb;margin-top:2px">âš  å¤§é‡ä¸‹è½½å¯èƒ½è§¦å‘æµè§ˆå™¨å¼¹çª—æ‹¦æˆª</div></div>',init(t){var e=function(e){return t.querySelector(e)},n=e("#apLrc"),a=e("#apStatus"),l=null,i=[];function o(t,e){a.textContent=t||"",a.style.color="error"===e?"#f56c6c":"warn"===e?"#e6a23c":"#909399"}function r(){var t=e("#apBox");t&&i.length&&t.querySelectorAll(".aplayer-list ol li").forEach(function(t,e){if(!t.querySelector(".ap-dl-wrap")){var n=i[e];if(n){var a=document.createElement("span");if(a.className="ap-dl-wrap",n.url){var l=document.createElement("a");l.href=n.url,l.target="_blank",l.download=(n.name||"track")+".mp3",l.title="ä¸‹è½½éŸ³é¢‘",l.textContent="â¬‡",l.onclick=function(t){t.stopPropagation()},a.appendChild(l)}if(n.lrc&&n.lrc.indexOf("[")>=0){var o=document.createElement("a");o.href="#",o.title="ä¸‹è½½æ­Œè¯",o.textContent="ğŸ“";var r=n.lrc,s=n.name;o.onclick=function(t){t.preventDefault(),t.stopPropagation();var e=new Blob([r],{type:"text/plain"}),n=document.createElement("a");n.href=URL.createObjectURL(e),n.download=(s||"lyrics")+".lrc",document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(n.href)},a.appendChild(o)}t.appendChild(a)}}})}var s=[{svg:'<svg viewBox="0 0 32 32"><path d="M22.667 4l7 6-7 6 7 6-7 6v-4h-3.653l-3.76-3.76 2.827-2.827 2.587 2.587h2v-8h-2l-12 12h-6v-4h4.347l12-12h3.653v-4zM2.667 8h6l3.76 3.76-2.827 2.827-2.587-2.587h-4.347v-4z"/></svg>',title:"åˆ—è¡¨éšæœº"},{svg:'<svg viewBox="0 0 29 32"><path d="M9.333 9.333h13.333v4l5.333-5.333-5.333-5.333v4h-16v8h2.667v-5.333zM22.667 22.667h-13.333v-4l-5.333 5.333 5.333 5.333v-4h16v-8h-2.667v5.333z"/></svg>',title:"åˆ—è¡¨é¡ºåº"},{svg:'<svg viewBox="0 0 33 32"><path d="M9.333 9.333h13.333v4l5.333-5.333-5.333-5.333v4h-16v8h2.667v-5.333zM22.667 22.667h-13.333v-4l-5.333 5.333 5.333 5.333v-4h16v-8h-2.667v5.333zM17.333 20v-8h-1.333l-2.667 1.333v1.333h2v5.333h2z"/></svg>',title:"å•æ›²å¾ªç¯"},{svg:'<svg viewBox="0 0 22 32"><path d="M22 16l-10.105-10.6-1.895 1.987 8.211 8.613-8.211 8.612 1.895 1.988z"/></svg>',title:"æ’­å®Œåœæ­¢"}],c=0;function d(t){if(l){try{l.pause(),l.destroy()}catch(t){}l=null}var a=e("#apBox");a.innerHTML="",function(t){if(window.APlayer)t();else{if(!document.querySelector('link[href*="APlayer"]')){var e=document.createElement("link");e.rel="stylesheet",e.href="/js/aplayer/APlayer.min.css",document.head.appendChild(e)}var n=document.createElement("script");n.src="/js/aplayer/APlayer.min.js",n.onload=t,document.head.appendChild(n)}}(function(){for(var d=!1,p=0;p<t.length;p++)if(t[p].lrc&&t[p].lrc.indexOf("[")>=0){d=!0;break}function u(t){!function(){var t=e("#apBox");if(t){t.classList.remove("aplayer-narrow"),t.classList.remove("aplayer-arrow"),t.classList.remove("aplayer-withlrc"),t.classList.add("aplayer-withlist");var n=t.querySelector(".aplayer-time");n&&n.classList.remove("aplayer-time-narrow");var a=t.querySelector(".aplayer-list");a&&(a.style.display="block",a.style.height="auto");var l=t.querySelector(".aplayer-list ol");l&&(l.style.display="block")}}();var n=a.querySelectorAll(".aplayer-list ol li");n&&n.length?(r(),function(){var t=e("#apBox"),n=t.querySelector(".aplayer-icon-loop"),a=t.querySelector(".aplayer-icon-order");if(n&&a){var l=";width:0!important;padding:0!important;margin:0!important;overflow:hidden;opacity:0;pointer-events:none";n.style.cssText+=l,a.style.cssText+=l;var i=document.createElement("span");i.className="aplayer-icon ap-mode-inline",c=0,r();var o=[function(){a.click()},function(){n.click()},function(){n.click()},function(){n.click(),a.click()}];i.onclick=function(t){t.stopPropagation(),o[c](),c=(c+1)%s.length,r()},a.parentNode.insertBefore(i,a)}function r(){i.innerHTML=s[c].svg,i.title=s[c].title}}(),e("#apAlbumDl").style.display=i.length>=2?"":"none"):t<10&&setTimeout(function(){u(t+1)},300)}l=new APlayer({container:a,audio:t,theme:"#409EFF",volume:.7,lrcType:d?1:0,listFolded:!1,loop:"all",order:t.length>1?"random":"list"}),i=t,setTimeout(function(){u(0)},200),e("#apCtrls").style.display="flex",function(){if(!l)return;var t=l.audio;if(!t)return;var a=e("#apPlayPause");t.addEventListener("play",function(){o(""),a&&(a.textContent="â¸")}),t.addEventListener("pause",function(){a&&(a.textContent="â–¶")}),t.addEventListener("timeupdate",function(){!function(){var t=e("#apBox");if(t){var a=t.querySelector(".aplayer-lrc-current");if(a&&a.textContent.trim()){var l="",i=a.previousElementSibling;i&&i.textContent.trim()&&(l+='<div class="ap-lrc-line">'+i.textContent+"</div>"),l+='<div class="ap-lrc-line active">'+a.textContent+"</div>";var o=a.nextElementSibling;o&&o.textContent.trim()&&(l+='<div class="ap-lrc-line">'+o.textContent+"</div>");var r=o&&o.nextElementSibling;r&&r.textContent.trim()&&(l+='<div class="ap-lrc-line">'+r.textContent+"</div>"),n.innerHTML=l}else n.innerHTML='<span class="ap-lrc-empty">â™ª</span>'}}()}),t.addEventListener("error",function(){var e="æ’­æ”¾å¤±è´¥";if(t.error)switch(t.error.code){case 1:e="åŠ è½½è¢«ä¸­æ–­";break;case 2:e="ç½‘ç»œé”™è¯¯";break;case 3:e="éŸ³é¢‘è§£ç å¤±è´¥";break;case 4:e="éŸ³æºä¸å¯ç”¨ï¼Œå¯èƒ½ä¸º VIP æˆ–å·²ä¸‹æ¶"}o(e,"error")}),l.on&&l.on("listswitch",function(){o(""),n.innerHTML='<span class="ap-lrc-empty">â™ª</span>',setTimeout(function(){r()},400)})}()})}function p(t,e,n){o("åŠ è½½ä¸­â€¦"),function(t,e,n,a){var l="ap_"+t+"_"+e+"_"+n;try{var i=sessionStorage.getItem(l);if(i)return void a(null,JSON.parse(i))}catch(t){}var o=window.meting_api_list||[window.meting_api||"https://api.injahow.cn/meting/?server=:server&type=:type&id=:id&r=:r"];!function i(r){if(r>=o.length)a(new Error("æ‰€æœ‰APIå‡ä¸å¯ç”¨"));else{var s=o[r].replace(":server",t).replace(":type",e).replace(":id",n).replace(":r",Math.random());fetch(s).then(function(t){return t.json()}).then(function(t){if(Array.isArray(t)){var e=[];if(t.forEach(function(t){t.url&&e.push({name:t.name||t.title||"Unknown",artist:t.artist||t.author||"",url:t.url,cover:t.pic||t.cover||"",lrc:t.lrc||""})}),e.length){var n=e.filter(function(t){return t.lrc&&0===t.lrc.indexOf("http")});if(n.length)!function t(i){if(i>=n.length){try{sessionStorage.setItem(l,JSON.stringify(e))}catch(t){}a(null,e)}else{var o=n.slice(i,i+5);Promise.all(o.map(function(t){var e=t.lrc;return fetch(e).then(function(t){return t.text()}).then(function(e){t.lrc=e&&e.indexOf("[")>=0?e:""}).catch(function(){t.lrc=""})})).then(function(){t(i+5)})}}(0);else{try{sessionStorage.setItem(l,JSON.stringify(e))}catch(t){}a(null,e)}}else i(r+1)}else i(r+1)}).catch(function(t){i(r+1)})}}(0)}(t,e,n,function(t,e){!t&&e&&e.length?(o(""),d(e)):o(t&&t.message&&"empty"!==t.message?t.message:"åŠ è½½å¤±è´¥ï¼Œè¯·æ£€æŸ¥é“¾æ¥æˆ–ç½‘ç»œ","error")})}e("#apDlAllAudio").onclick=function(){if(i.length&&(!(i.length>10)||confirm("å°†ä¸‹è½½ "+i.length+" ä¸ªéŸ³é¢‘æ–‡ä»¶ï¼Œå¯èƒ½è§¦å‘æµè§ˆå™¨æ‹¦æˆªã€‚ç»§ç»­ï¼Ÿ"))){var t=0;!function e(){if(!(t>=i.length)){var n=i[t];if(n.url){var a=document.createElement("a");a.href=n.url,a.target="_blank",a.download=(n.name||"track_"+t)+".mp3",document.body.appendChild(a),a.click(),document.body.removeChild(a)}t++,setTimeout(e,500)}}()}},e("#apDlAllLrc").onclick=function(){var t=i.filter(function(t){return t.lrc&&t.lrc.indexOf("[")>=0});t.length?confirm("å°†ä¸‹è½½ "+t.length+" ä¸ªæ­Œè¯æ–‡ä»¶ï¼Œå¯èƒ½è§¦å‘æµè§ˆå™¨æ‹¦æˆªã€‚ç»§ç»­ï¼Ÿ")&&t.forEach(function(t,e){setTimeout(function(){var n=new Blob([t.lrc],{type:"text/plain"}),a=document.createElement("a");a.href=URL.createObjectURL(n),a.download=(t.name||"lyrics_"+e)+".lrc",document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(a.href)},300*e)}):o("æš‚æ— å¯ä¸‹è½½çš„æ­Œè¯","warn")},e("#apPrev").onclick=function(){l&&l.skipBack()},e("#apPlayPause").onclick=function(){l&&l.toggle()},e("#apNext").onclick=function(){l&&l.skipForward()},e("#apGo").onclick=function(){var t=e("#apUrl").value;if(t.trim()){var n=function(t){var e,n={server:"netease",type:"song",id:""};return(e=(t=t.trim()).match(/music\.163\.com.*(?:#\/|\/)(song|playlist|album|artist)\?id=(\d+)/i))?(n.server="netease",n.type=e[1],n.id=e[2],n):(e=t.match(/music\.163\.com.*[?&]id=(\d+)/i))?(n.server="netease",n.id=e[1],/playlist/i.test(t)?n.type="playlist":/album/i.test(t)?n.type="album":/artist/i.test(t)&&(n.type="artist"),n):(e=t.match(/y\.qq\.com.*\/(songDetail|playlist|albumDetail)\/(\w+)/i))?(n.server="tencent",n.id=e[2],n.type="playlist"===e[1]?"playlist":"albumDetail"===e[1]?"album":"song",n):(e=t.match(/y\.qq\.com.*[?&]id=(\w+)/i))?(n.server="tencent",n.id=e[1],n):/kugou\.com/i.test(t)?(n.server="kugou",((e=t.match(/hash=([a-fA-F0-9]+)/i))||(e=t.match(/(\d{5,})/)))&&(n.id=e[1]),n):/^\d+$/.test(t)?(n.id=t,n):((e=t.match(/(\d{5,})/))?n.id=e[1]:n.id=t,n)}(t);if(n.id){if(l)try{l.pause(),l.destroy()}catch(t){}i=[],l=null,o(""),p(n.server,n.type,n.id)}}},e("#apUrl").onkeydown=function(t){"Enter"===t.key&&e("#apGo").click()},e("#apFile").onchange=function(){var t=this.files;if(t&&t.length){if(l)try{l.pause(),l.destroy()}catch(t){}var e,n;i=[],l=null,o(""),e=t,n=[],Array.from(e).forEach(function(t){n.push({name:t.name.replace(/\.[^.]+$/,""),artist:"Local",url:URL.createObjectURL(t),cover:"",lrc:""})}),d(n)}},t._cleanup=function(){if(l)try{l.pause(),l.destroy()}catch(t){}l=null,i=[]}}},{id:"base64",name:"Base64 ç¼–è§£ç ",icon:"ğŸ”„",cat:"dev",desc:"åŒå‘å®æ—¶äº’è½¬ Â· æ–‡ä»¶æ¨¡å¼",html:()=>'<div class="t-row"><button class="t-btn t-btn-o" id="b64ModeText" style="font-weight:700">æ–‡æœ¬æ¨¡å¼</button><button class="t-btn t-btn-o" id="b64ModeFile">æ–‡ä»¶æ¨¡å¼</button></div><div id="b64TextMode"><div class="t-split"><div><div class="t-lbl">ğŸ“ åŸæ–‡ï¼ˆè¾“å…¥å³è½¬æ¢ï¼‰</div><textarea class="t-ta" id="b64Text" rows="5">Hello, å·¥å…·ç®±!</textarea></div><div><div class="t-lbl">ğŸ”‘ Base64ï¼ˆè¾“å…¥å³è½¬æ¢ï¼‰</div><textarea class="t-ta" id="b64Code" rows="5"></textarea></div></div></div><div id="b64FileMode" style="display:none"><input type="file" id="b64File"><div id="b64FileOut" class="t-res" style="max-height:200px;margin-top:8px"></div><button class="t-btn t-btn-o" id="b64FileCopy" style="margin-top:6px">ğŸ“‹ å¤åˆ¶</button></div>',init(t){const e=t.querySelector("#b64Text"),n=t.querySelector("#b64Code");let a=!1;e.oninput=()=>{if(!a){a=!0;try{n.value=btoa(unescape(encodeURIComponent(e.value)))}catch(t){n.value="âš  "+t.message}a=!1}},n.oninput=()=>{if(!a){a=!0;try{e.value=decodeURIComponent(escape(atob(n.value)))}catch(t){e.value="âš  "+t.message}a=!1}},e.oninput(),t.querySelector("#b64ModeText").onclick=()=>{t.querySelector("#b64TextMode").style.display="",t.querySelector("#b64FileMode").style.display="none",t.querySelector("#b64ModeText").style.fontWeight="700",t.querySelector("#b64ModeFile").style.fontWeight=""},t.querySelector("#b64ModeFile").onclick=()=>{t.querySelector("#b64TextMode").style.display="none",t.querySelector("#b64FileMode").style.display="",t.querySelector("#b64ModeFile").style.fontWeight="700",t.querySelector("#b64ModeText").style.fontWeight=""},t.querySelector("#b64File").onchange=function(){const e=this.files[0];if(!e)return;const n=new FileReader;n.onload=e=>{t.querySelector("#b64FileOut").textContent=e.target.result.split(",")[1]||""},n.readAsDataURL(e)},t.querySelector("#b64FileCopy").onclick=()=>navigator.clipboard.writeText(t.querySelector("#b64FileOut").textContent)}},{id:"colorpicker",name:"è°ƒè‰²æ¿",icon:"ğŸ¨",cat:"fun",desc:"HSL / RGB / HEX äº’è½¬ Â· è‰²å½©ç©ºé—´åˆ†ç»„",html:()=>'<div style="display:flex;gap:14px;flex-wrap:wrap;align-items:flex-start"><div style="flex:1;min-width:200px"><div class="t-row"><span class="t-lbl">HEX</span><input class="t-in" id="cpHex" value="#4a90d9" style="width:100px"></div><fieldset style="border:1px solid #e0e0e0;border-radius:8px;padding:8px 10px;margin:6px 0"><legend style="font-size:.78em;font-weight:600;color:#409eff;padding:0 4px">ğŸ”´ RGB è‰²å½©ç©ºé—´</legend><div class="t-row"><span class="t-lbl" style="color:#e74c3c;font-weight:600">R</span><input type="range" id="cpR" min="0" max="255" value="74" style="width:110px;accent-color:#e74c3c"><span class="t-val" id="cpRv">74</span></div><div class="t-row"><span class="t-lbl" style="color:#27ae60;font-weight:600">G</span><input type="range" id="cpG" min="0" max="255" value="144" style="width:110px;accent-color:#27ae60"><span class="t-val" id="cpGv">144</span></div><div class="t-row"><span class="t-lbl" style="color:#2980b9;font-weight:600">B</span><input type="range" id="cpB" min="0" max="255" value="217" style="width:110px;accent-color:#2980b9"><span class="t-val" id="cpBv">217</span></div></fieldset><fieldset style="border:1px solid #e0e0e0;border-radius:8px;padding:8px 10px;margin:6px 0"><legend style="font-size:.78em;font-weight:600;color:#e6a23c;padding:0 4px">ğŸŒˆ HSL è‰²å½©ç©ºé—´</legend><div class="t-row"><span class="t-lbl" style="font-weight:600">H</span><input type="range" id="cpH" min="0" max="360" value="211" style="width:110px;accent-color:#e6a23c"><span class="t-val" id="cpHv">211Â°</span></div><div class="t-row"><span class="t-lbl" style="font-weight:600">S</span><input type="range" id="cpS" min="0" max="100" value="63" style="width:110px;accent-color:#e6a23c"><span class="t-val" id="cpSv">63%</span></div><div class="t-row"><span class="t-lbl" style="font-weight:600">L</span><input type="range" id="cpL" min="0" max="100" value="57" style="width:110px;accent-color:#e6a23c"><span class="t-val" id="cpLv">57%</span></div></fieldset><div style="font-size:.68em;color:#aaa;margin-top:2px">RGB å’Œ HSL æ˜¯ä¸¤ç§ç­‰ä»·çš„è‰²å½©æè¿°æ–¹å¼ï¼Œè°ƒæ•´ä»»æ„ä¸€ç»„å³å¯</div></div><div style="flex:0 0 auto;text-align:center"><div class="color-swatch" id="cpSwatch" style="width:110px;height:110px;border-radius:14px;border:2px solid #e0e0e0;background:#4a90d9;box-shadow:0 4px 16px rgba(0,0,0,.12);transition:background .15s"></div><div style="margin-top:8px;font-size:.78em;color:#555;font-family:monospace" id="cpCss">rgb(74, 144, 217)</div><div style="margin-top:2px;font-size:.78em;color:#555;font-family:monospace" id="cpHsl">hsl(211, 63%, 57%)</div><button class="t-btn t-btn-d" id="cpCopy" style="margin-top:8px;font-size:.72em">ğŸ“‹ å¤åˆ¶ HEX</button></div></div>',init(t){const e=e=>t.querySelector(e);function n(t,n,a){const l=function(t,e,n){return"#"+[t,e,n].map(t=>t.toString(16).padStart(2,"0")).join("")}(t,n,a),[i,o,r]=function(t,e,n){t/=255,e/=255,n/=255;const a=Math.max(t,e,n),l=Math.min(t,e,n),i=(a+l)/2;let o=0,r=0;if(a!==l){const s=a-l;switch(r=i>.5?s/(2-a-l):s/(a+l),a){case t:o=((e-n)/s+(e<n?6:0))/6;break;case e:o=((n-t)/s+2)/6;break;case n:o=((t-e)/s+4)/6}}return[Math.round(360*o),Math.round(100*r),Math.round(100*i)]}(t,n,a);e("#cpHex").value=l,e("#cpR").value=t,e("#cpG").value=n,e("#cpB").value=a,e("#cpH").value=i,e("#cpS").value=o,e("#cpL").value=r,e("#cpRv").textContent=t,e("#cpGv").textContent=n,e("#cpBv").textContent=a,e("#cpHv").textContent=i+"Â°",e("#cpSv").textContent=o+"%",e("#cpLv").textContent=r+"%",e("#cpSwatch").style.background=l,e("#cpCss").textContent="rgb("+t+", "+n+", "+a+")",e("#cpHsl").textContent="hsl("+i+", "+o+"%, "+r+"%)"}["cpR","cpG","cpB"].forEach(t=>e("#"+t).oninput=()=>n(+e("#cpR").value,+e("#cpG").value,+e("#cpB").value)),["cpH","cpS","cpL"].forEach(t=>e("#"+t).oninput=()=>{n(...function(t,e,n){let a,l,i;if(t/=360,n/=100,0==(e/=100))a=l=i=n;else{const o=(t,e,n)=>(n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t),r=n<.5?n*(1+e):n+e-n*e,s=2*n-r;a=o(s,r,t+1/3),l=o(s,r,t),i=o(s,r,t-1/3)}return[Math.round(255*a),Math.round(255*l),Math.round(255*i)]}(+e("#cpH").value,+e("#cpS").value,+e("#cpL").value))}),e("#cpHex").oninput=function(){const t=this.value;if(/^#?[0-9a-fA-F]{3,6}$/.test(t)){n(...(3===(e=(e=t).replace("#","")).length&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),[parseInt(e.substr(0,2),16),parseInt(e.substr(2,2),16),parseInt(e.substr(4,2),16)]))}var e},e("#cpCopy").onclick=()=>navigator.clipboard.writeText(e("#cpHex").value).then(()=>{e("#cpCopy").textContent="âœ“",setTimeout(()=>e("#cpCopy").textContent="ğŸ“‹ å¤åˆ¶ HEX",1500)}),n(74,144,217)}},{id:"constants",name:"ç‰©ç†å¸¸æ•°",icon:"ğŸ“",cat:"academic",desc:"CODATA æ ‡å‡†å€¼ Â· LaTeX æ¸²æŸ“",html:()=>'<input class="t-in" id="constSearch" placeholder="æœç´¢å¸¸æ•°..." style="margin-bottom:8px"><div id="constBody" style="overflow:auto;max-height:420px"></div>',async init(t){await a();var e='<table class="ct-table"><tr><th>ç¬¦å·</th><th>åç§°</th><th>æ•°å€¼</th><th>å•ä½</th></tr>';o.forEach(function(t){e+='<tr class="const-row"><td>'+l(t[0])+"</td><td>"+t[1]+"</td><td>"+l(t[2])+"</td><td>"+(t[3]?l(t[3]):"â€”")+"</td></tr>"}),e+="</table>",t.querySelector("#constBody").innerHTML=e,t.querySelector("#constSearch").oninput=function(){var e=this.value.toLowerCase();t.querySelectorAll(".const-row").forEach(function(t){t.style.display=t.textContent.toLowerCase().includes(e)?"":"none"})}}},{id:"countdown",name:"å€’è®¡æ—¶",icon:"â³",cat:"fun",desc:"è·ç¦»ç›®æ ‡æ—¶åˆ»è¿˜æœ‰â€¦",html(){function t(t,e,n){let a="";for(let l=t;l<=e;l++)a+='<option value="'+l+'">'+(n&&l<10?"0"+l:l)+"</option>";return a}return'<div style="display:flex;gap:3px;align-items:center;flex-wrap:wrap;justify-content:center"><select class="t-sel cd-u" id="cdY" style="width:75px">'+t(2025,2040)+'</select><span style="color:#aaa;font-size:.78em">å¹´</span><select class="t-sel cd-u" id="cdM" style="width:52px">'+t(1,12,!0)+'</select><span style="color:#aaa;font-size:.78em">æœˆ</span><select class="t-sel cd-u" id="cdD" style="width:52px">'+t(1,31,!0)+'</select><span style="color:#aaa;font-size:.78em">æ—¥</span><select class="t-sel cd-u" id="cdHH" style="width:52px">'+t(0,23,!0)+'</select><span style="font-weight:700;color:#999">:</span><select class="t-sel cd-u" id="cdMM" style="width:52px">'+t(0,59,!0)+'</select><button class="t-btn t-btn-s" id="cdStart" style="margin-left:6px">â–¶ å¼€å§‹</button></div><div style="display:flex;flex-wrap:wrap;gap:6px;justify-content:center;margin:8px 0"><button class="t-btn t-btn-d cd-preset" data-v="ny">ğŸ† æ–°å¹´</button><button class="t-btn t-btn-d cd-preset" data-v="mid">ğŸŒ• ä¸­ç§‹</button><button class="t-btn t-btn-d cd-preset" data-v="nat">ğŸ‡¨ğŸ‡³ å›½åº†</button><button class="t-btn t-btn-d cd-preset" data-v="cx">ğŸ„ åœ£è¯</button></div><div class="pomo-label" id="cdLabel" style="margin-top:10px"></div><div style="display:flex;gap:10px;justify-content:center;flex-wrap:wrap;margin-top:8px"><div style="text-align:center"><div style="font-size:2em;font-weight:700;color:#f44" id="cdDy">0</div><div style="font-size:.72em;color:#888">å¤©</div></div><div style="text-align:center"><div style="font-size:2em;font-weight:700;color:#fa1" id="cdH">0</div><div style="font-size:.72em;color:#888">æ—¶</div></div><div style="text-align:center"><div style="font-size:2em;font-weight:700;color:#4a90d9" id="cdMi">0</div><div style="font-size:.72em;color:#888">åˆ†</div></div><div style="text-align:center"><div style="font-size:2em;font-weight:700;color:#52c41a" id="cdS">0</div><div style="font-size:.72em;color:#888">ç§’</div></div></div><div style="text-align:center;margin-top:8px;font-size:.78em;color:#888" id="cdTotal"></div>'},init(t){let e=null,n=null;const a=e=>t.querySelector(e);function l(){for(var t=function(t,e){return new Date(t,e,0).getDate()}(+a("#cdY").value,+a("#cdM").value),e=+a("#cdD").value,n=a("#cdD"),l="",i=1;i<=t;i++)l+='<option value="'+i+'">'+(i<10?"0"+i:i)+"</option>";n.innerHTML=l,n.value=Math.min(e,t)}function i(t){a("#cdY").value=t.getFullYear(),a("#cdM").value=t.getMonth()+1,l(),a("#cdD").value=t.getDate(),a("#cdHH").value=t.getHours(),a("#cdMM").value=t.getMinutes()}function o(){if(!e)return;const t=e-Date.now();if(t<=0)return a("#cdDy").textContent=a("#cdH").textContent=a("#cdMi").textContent=a("#cdS").textContent="0",a("#cdLabel").textContent="ğŸ‰ å·²åˆ°è¾¾ï¼",a("#cdTotal").textContent="",void clearInterval(n);const l=Math.floor(t/1e3),i=Math.floor(l/60),o=Math.floor(i/60),r=Math.floor(o/24);a("#cdDy").textContent=r,a("#cdH").textContent=o%24,a("#cdMi").textContent=i%60,a("#cdS").textContent=l%60,a("#cdTotal").textContent="å…±è®¡ "+l.toLocaleString()+" ç§’"}function r(){clearInterval(n),e=new Date(+a("#cdY").value,+a("#cdM").value-1,+a("#cdD").value,+a("#cdHH").value,+a("#cdMM").value).getTime(),a("#cdLabel").textContent="â³ ç›®æ ‡: "+new Date(e).toLocaleString("zh-CN"),o(),n=setInterval(o,1e3)}a("#cdY").onchange=l,a("#cdM").onchange=l,a("#cdStart").onclick=r,t.querySelectorAll(".cd-preset").forEach(t=>t.onclick=function(){i(function(t){const e=new Date,n=e.getFullYear();if("ny"===t)return new Date(n+1,0,1);if("mid"===t)return new Date({2025:"2025-10-06",2026:"2026-09-25",2027:"2027-09-15"}[n]||n+"-09-20");return"nat"===t?new Date(e>new Date(n,9,1)?n+1:n,9,1):"cx"===t?new Date(e>new Date(n,11,25)?n+1:n,11,25):new Date(n+1,0,1)}(this.dataset.v)),r()});i(new Date((new Date).getFullYear()+1,0,1)),r(),t._cleanup=()=>clearInterval(n)}},{id:"cron",name:"Cron è§£æ",icon:"â°",cat:"dev",desc:"å¯è§†åŒ– Cron è¡¨è¾¾å¼",html:()=>'<div class="t-row"><input class="t-in" id="cronIn" value="*/5 * * * *" style="flex:1"><button class="t-btn" id="cronParse">è§£æ</button></div><div id="cronOut" class="t-res"></div><div style="font-size:.72em;color:#999;margin-top:4px">æ ¼å¼: åˆ†(0-59) æ—¶(0-23) æ—¥(1-31) æœˆ(1-12) å‘¨(0-7)</div>',init(t){const e=[["åˆ†é’Ÿ",60],["å°æ—¶",24],["æ—¥",31],["æœˆ",12],["æ˜ŸæœŸ",7]];function n(){const n=t.querySelector("#cronIn").value.trim().split(/\s+/);if(n.length<5)return void(t.querySelector("#cronOut").textContent="éœ€è¦ 5 ä¸ªå­—æ®µ");const a=n.slice(0,5).map((t,n)=>function(t,n){const a=e[n][0];if("*"===t)return"æ¯"+a;if(t.startsWith("*/"))return"æ¯éš” "+t.slice(2)+" "+a;if(t.includes(","))return a+" ä¸º "+t;if(t.includes("-")){const[e,n]=t.split("-");return a+" "+e+" è‡³ "+n}return a+" ä¸º "+t}(t,n));t.querySelector("#cronOut").textContent="å«ä¹‰:\n"+a.join("\n")+"\n\nâ†’ "+a.join("ï¼Œ")}t.querySelector("#cronParse").onclick=n,t.querySelector("#cronIn").addEventListener("keydown",t=>{"Enter"===t.key&&n()})}},{id:"diff",name:"æ–‡æœ¬å¯¹æ¯”",icon:"ğŸ“ƒ",cat:"dev",desc:"LCS ç®—æ³• Â· å¹¶æ’/ç»Ÿä¸€è§†å›¾ Â· æ–‡ä»¶å¯¹æ¯”",html:()=>'<div class="t-split"><div><div class="t-row" style="justify-content:space-between;align-items:center"><span class="t-lbl">åŸå§‹æ–‡æœ¬</span><label class="t-btn t-btn-d" style="font-size:.7em;cursor:pointer;margin:0">ğŸ“‚ ä¸Šä¼ <input type="file" id="diffFileA" accept=".txt,.md,.py,.js,.ts,.sh,.css,.html,.json,.xml,.yml,.yaml,.c,.cpp,.h,.java,.go,.rs,.rb,.php,.sql,.log,.csv,.ini,.cfg,.toml,.bat,.ps1" style="display:none"></label></div><textarea class="t-ta" id="diffA" rows="8" placeholder="ç²˜è´´æˆ–ä¸Šä¼ åŸå§‹æ–‡æœ¬â€¦"></textarea></div><div><div class="t-row" style="justify-content:space-between;align-items:center"><span class="t-lbl">ä¿®æ”¹æ–‡æœ¬</span><label class="t-btn t-btn-d" style="font-size:.7em;cursor:pointer;margin:0">ğŸ“‚ ä¸Šä¼ <input type="file" id="diffFileB" accept=".txt,.md,.py,.js,.ts,.sh,.css,.html,.json,.xml,.yml,.yaml,.c,.cpp,.h,.java,.go,.rs,.rb,.php,.sql,.log,.csv,.ini,.cfg,.toml,.bat,.ps1" style="display:none"></label></div><textarea class="t-ta" id="diffB" rows="8" placeholder="ç²˜è´´æˆ–ä¸Šä¼ ä¿®æ”¹æ–‡æœ¬â€¦"></textarea></div></div><div class="t-row" style="gap:8px;margin-top:6px;flex-wrap:wrap;align-items:center"><button class="t-btn" id="diffRun">ğŸ” å¯¹æ¯”</button><button class="t-btn t-btn-o diffView active" data-v="split">å¹¶æ’è§†å›¾</button><button class="t-btn t-btn-o diffView" data-v="unified">ç»Ÿä¸€è§†å›¾</button><label style="font-size:.75em"><input type="checkbox" id="diffTrim"> å¿½ç•¥è¡Œé¦–å°¾ç©ºç™½</label><span id="diffStats" style="font-size:.75em;color:#888;margin-left:auto"></span></div><div id="diffResult" style="margin-top:8px;border:1px solid #e8e8e8;border-radius:8px;overflow:hidden;max-height:420px;overflow-y:auto;background:#fafafa"></div>',init(t){var e=function(e){return t.querySelector(e)},n="split";function a(t,n){e(t).onchange=function(){var t=this.files[0];if(t){var a=new FileReader;a.onload=function(){e(n).value=a.result},a.readAsText(t)}}}function l(t){return t?t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):""}function i(t,e){if(!t||!e)return{a:l(t),b:l(e)};for(var n=t.length,a=e.length,i=[],o=0;o<=n;o++){i[o]=[];for(var r=0;r<=a;r++)i[o][r]=0}for(o=1;o<=n;o++)for(r=1;r<=a;r++)i[o][r]=t[o-1]===e[r-1]?i[o-1][r-1]+1:Math.max(i[o-1][r],i[o][r-1]);var s="",c="";for(o=n,r=a;o>0||r>0;)o>0&&r>0&&t[o-1]===e[r-1]?(s=l(t[o-1])+s,c=l(e[r-1])+c,o--,r--):r>0&&(0===o||i[o][r-1]>=i[o-1][r])?(c='<mark style="background:#a6f3a6;border-radius:2px">'+l(e[r-1])+"</mark>"+c,r--):(s='<mark style="background:#f8b4b4;border-radius:2px">'+l(t[o-1])+"</mark>"+s,o--);return{a:s,b:c}}function o(){var t=function(){for(var t=e("#diffTrim").checked,n=e("#diffA").value.split("\n"),a=e("#diffB").value.split("\n"),l=t?n.map(function(t){return t.trim()}):n,i=t?a.map(function(t){return t.trim()}):a,o=l.length,r=i.length,s=[],c=0;c<=o;c++){s[c]=[];for(var d=0;d<=r;d++)s[c][d]=0}for(c=1;c<=o;c++)for(d=1;d<=r;d++)s[c][d]=l[c-1]===i[d-1]?s[c-1][d-1]+1:Math.max(s[c-1][d],s[c][d-1]);var p=[];for(c=o,d=r;c>0||d>0;)c>0&&d>0&&l[c-1]===i[d-1]?(p.unshift({type:"eq",a:n[c-1],b:a[d-1],ai:c,bi:d}),c--,d--):d>0&&(0===c||s[c][d-1]>=s[c-1][d])?(p.unshift({type:"add",b:a[d-1],bi:d}),d--):(p.unshift({type:"del",a:n[c-1],ai:c}),c--);return p}();if(t.every(function(t){return"eq"===t.type}))return e("#diffResult").innerHTML='<div style="text-align:center;padding:30px;color:#67c23a;font-size:.9em">âœ“ ä¸¤æ®µæ–‡æœ¬å®Œå…¨ç›¸åŒ</div>',void(e("#diffStats").innerHTML="");e("#diffResult").innerHTML="split"===n?function(t){for(var n=0,a=0,o=0,r="",s=0;s<t.length;s++){var c=t[s];if("eq"===c.type)r+='<tr><td class="dln">'+c.ai+'</td><td class="dtd">'+l(c.a)+'</td><td class="dln">'+c.bi+'</td><td class="dtd">'+l(c.b)+"</td></tr>";else if("del"===c.type)if(s+1<t.length&&"add"===t[s+1].type){var d=i(c.a,t[s+1].b);r+='<tr><td class="dln dln-d">'+c.ai+'</td><td class="dtd dtd-d">'+d.a+'</td><td class="dln dln-a">'+t[s+1].bi+'</td><td class="dtd dtd-a">'+d.b+"</td></tr>",s++,o++}else r+='<tr><td class="dln dln-d">'+c.ai+'</td><td class="dtd dtd-d">'+l(c.a)+'</td><td class="dln"></td><td class="dtd" style="background:#f9f9f9"></td></tr>',a++;else r+='<tr><td class="dln"></td><td class="dtd" style="background:#f9f9f9"></td><td class="dln dln-a">'+c.bi+'</td><td class="dtd dtd-a">'+l(c.b)+"</td></tr>",n++}return e("#diffStats").innerHTML='<span style="color:#27ae60">+'+n+'</span> <span style="color:#e74c3c">-'+a+'</span> <span style="color:#e6a23c">~'+o+"</span>",'<table class="dtbl dtbl-split">'+r+"</table>"}(t):function(t){for(var n=0,a=0,i="",o=0;o<t.length;o++){var r=t[o];"eq"===r.type?i+='<tr><td class="dln">'+r.ai+'</td><td class="dln">'+r.bi+'</td><td class="dtd">&nbsp; '+l(r.a)+"</td></tr>":"del"===r.type?(i+='<tr><td class="dln dln-d">'+r.ai+'</td><td class="dln"></td><td class="dtd dtd-d">- '+l(r.a)+"</td></tr>",a++):(i+='<tr><td class="dln"></td><td class="dln dln-a">'+r.bi+'</td><td class="dtd dtd-a">+ '+l(r.b)+"</td></tr>",n++)}return e("#diffStats").innerHTML='<span style="color:#27ae60">+'+n+'</span> <span style="color:#e74c3c">-'+a+"</span>",'<table class="dtbl">'+i+"</table>"}(t)}if(e("#diffA").value="ç¬¬ä¸€è¡Œå†…å®¹\nç¬¬äºŒè¡Œä¸å˜\nç¬¬ä¸‰è¡Œè¦æ”¹\nç¬¬å››è¡Œè¦åˆ ",e("#diffB").value="ç¬¬ä¸€è¡Œå†…å®¹\nç¬¬äºŒè¡Œä¸å˜\nç¬¬ä¸‰è¡Œæ”¹äº†\næ–°å¢ç¬¬äº”è¡Œ",a("#diffFileA","#diffA"),a("#diffFileB","#diffB"),t.querySelectorAll(".diffView").forEach(function(e){e.onclick=function(){t.querySelectorAll(".diffView").forEach(function(t){t.classList.remove("active")}),this.classList.add("active"),n=this.dataset.v,o()}}),e("#diffRun").onclick=o,e("#diffTrim").onchange=o,!document.getElementById("diffCSS")){var r=document.createElement("style");r.id="diffCSS",r.textContent=".dtbl{width:100%;border-collapse:collapse;font-family:Consolas,Monaco,monospace;font-size:.78em;line-height:1.6;table-layout:fixed}.dtbl td{padding:0 6px;white-space:pre-wrap;word-break:break-all;vertical-align:top}.dln{width:32px;min-width:32px;max-width:32px;text-align:right;color:#bbb;font-size:.85em;user-select:none;border-right:1px solid #eee;background:#fafafa}.dtbl-split .dtd{width:calc(50% - 32px)}.dln-d{background:#fde8e8;color:#c0392b}.dln-a{background:#e6f9e6;color:#27ae60}.dtd-d{background:#fef0f0}.dtd-a{background:#f0faf0}.dtbl tr:hover td{background:rgba(64,158,255,.04)}",document.head.appendChild(r)}}},{id:"eigenvalue",name:"æœ¬å¾å€¼æ±‚è§£",icon:"âš›",cat:"academic",desc:"1D è–›å®šè°”æ–¹ç¨‹åŒä¾§æ‰“é¶æ³•æ±‚è§£å™¨ â€” æ±‚æœ¬å¾èƒ½é‡ä¸æ³¢å‡½æ•°",html:function(){return'<div class="t-row"><label class="t-lbl">V(x) è¡¨è¾¾å¼</label><input id="eigVx" class="t-in" value="0" style="flex:1" placeholder="ä¾‹: x^2, (x^2-4)^2/4"></div><div class="t-row"><label class="t-lbl">åŒºé—´ a</label><input id="eigA" class="t-in" value="0" style="width:80px"><label class="t-lbl" style="margin-left:12px">b</label><input id="eigB" class="t-in" value="1" style="width:80px"></div><div class="t-row"><label class="t-lbl">E<sub>min</sub></label><input id="eigEmin" class="t-in" value="1" style="width:80px"><label class="t-lbl" style="margin-left:12px">E<sub>max</sub></label><input id="eigEmax" class="t-in" value="200" style="width:80px"></div><div class="t-row"><label class="t-lbl">Î³ = âˆš(2m/â„Â²)</label><input id="eigGamma" class="t-in" value="3.14159265" style="width:120px" placeholder="Î³ ç³»æ•°"></div><div class="t-row"><label class="t-lbl">ç½‘æ ¼ç‚¹æ•° N</label><input id="eigN" type="range" min="200" max="2000" step="50" value="500" style="flex:1"><span id="eigNVal" style="min-width:40px;text-align:right">500</span></div><div class="t-row"><label class="t-lbl">æ‰«ææ­¥æ•°</label><input id="eigScan" class="t-in" value="500" style="width:80px"></div><div class="t-row"><label class="t-lbl">æ–¹æ³•</label><label style="margin-right:12px"><input type="radio" name="eigMethod" value="numerov" checked> Numerov</label><label><input type="radio" name="eigMethod" value="rk4"> RK4</label></div><div class="t-row" style="flex-wrap:wrap;gap:6px"><button class="t-btn t-btn-o" id="eigPre1">æ— é™æ·±æ–¹åŠ¿é˜±</button><button class="t-btn t-btn-o" id="eigPre2">è°æŒ¯å­</button><button class="t-btn t-btn-o" id="eigPre3">åŒåŠ¿é˜±</button><button class="t-btn t-btn-o" id="eigPre4">Morse åŠ¿</button><button class="t-btn t-btn-o" id="eigPre5">Lennard-Jones</button></div><div class="t-row"><button class="t-btn" id="eigSolve">æ±‚ è§£</button></div><canvas id="eigCv1" class="t-cv" width="600" height="400"></canvas><canvas id="eigCv2" class="t-cv" width="600" height="260"></canvas><div id="eigRes" class="t-res"></div>'},init:async function(t){await a();var e=await n(),i=getComputedStyle(document.documentElement),o=i.getPropertyValue("--accent").trim()||"#5B8BA4",r=(i.getPropertyValue("--font-color-1").trim(),i.getPropertyValue("--font-color-3").trim()||"#999"),s=i.getPropertyValue("--background").trim()||"#fff",c=[o,"#67c23a","#f56c6c","#e6a23c","#9b59b6","#00bcd4","#ff5722","#795548"],d=t.querySelector("#eigVx"),p=t.querySelector("#eigA"),u=t.querySelector("#eigB"),f=t.querySelector("#eigEmin"),v=t.querySelector("#eigEmax"),h=t.querySelector("#eigGamma"),m=t.querySelector("#eigN"),b=t.querySelector("#eigNVal"),x=t.querySelector("#eigScan"),y=t.querySelector("#eigSolve"),g=t.querySelector("#eigCv1"),w=t.querySelector("#eigCv2"),S=t.querySelector("#eigRes");m.addEventListener("input",function(){b.textContent=m.value});var k=[{vx:"0",a:"0",b:"1",emin:"1",emax:"200",gamma:"3.14159265"},{vx:"x^2",a:"-5",b:"5",emin:"0",emax:"20",gamma:"3.16227766"},{vx:"(x^2-4)^2/4",a:"-4",b:"4",emin:"0",emax:"20",gamma:"1"},{vx:"10*(1-exp(-x))^2",a:"-1",b:"5",emin:"0",emax:"10",gamma:"1"},{vx:"4*(x^(-12)-x^(-6))",a:"0.9",b:"3",emin:"-1",emax:"0",gamma:"1"}],M=-1;function T(e){var n=k[e];d.value=n.vx,p.value=n.a,u.value=n.b,f.value=n.emin,v.value=n.emax,h.value=n.gamma,M=e;for(var a=t.querySelectorAll('[id^="eigPre"]'),l=0;l<a.length;l++)l===e?(a[l].className="t-btn",a[l].style.fontWeight="700"):(a[l].className="t-btn t-btn-o",a[l].style.fontWeight="")}function C(t,e,n,a,l,i,o){for(var r=(n-e)/a,s=Math.floor(a/2),c=1/0,d=1;d<a;d++){if((t(e+(d-1)*r)-l)*(t(e+d*r)-l)<0){var p=Math.abs(d-a/2);p<c&&(c=p,s=d)}}s<2&&(s=2),s>a-2&&(s=a-2);var u,f,v=e+s*r,h=s,m=a-s;o?(u=function(t,e,n,a,l,i){var o=(n-e)/a,r=new Array(a+1);r[0]=0,r[1]=1e-6;for(var s=1;s<a;s++){var c=i*(l-t(e+(s-1)*o)),d=i*(l-t(e+s*o)),p=i*(l-t(e+(s+1)*o));r[s+1]=(2*(1-5*o*o*d/12)*r[s]-(1+o*o*c/12)*r[s-1])/(1+o*o*p/12)}return r}(t,e,v,h,l,i),f=function(t,e,n,a,l,i){var o=(n-e)/a,r=new Array(a+1);r[a]=0,r[a-1]=1e-6;for(var s=a-1;s>0;s--){var c=i*(l-t(e+(s+1)*o)),d=i*(l-t(e+s*o)),p=i*(l-t(e+(s-1)*o));r[s-1]=(2*(1-5*o*o*d/12)*r[s]-(1+o*o*c/12)*r[s+1])/(1+o*o*p/12)}return r}(t,v,n,m,l,i)):(u=function(t,e,n,a,l,i){var o=(n-e)/a,r=new Array(a+1),s=0,c=1e-6;r[0]=s;for(var d=0;d<a;d++){var p=e+d*o,u=c,f=i*(t(p)-l)*s,v=s+.5*o*u,h=c+.5*o*f,m=i*(t(p+.5*o)-l)*v,b=s+.5*o*h,x=c+.5*o*m,y=i*(t(p+.5*o)-l)*b,g=s+o*x;s+=o*(u+2*h+2*x+(c+o*y))/6,c+=o*(f+2*m+2*y+i*(t(p+o)-l)*g)/6,r[d+1]=s}return r}(t,e,v,h,l,i),f=function(t,e,n,a,l,i){var o=(n-e)/a,r=new Array(a+1),s=0,c=-1e-6;r[a]=s;for(var d=a;d>0;d--){var p=e+d*o,u=c,f=i*(t(p)-l)*s,v=s-.5*o*u,h=c-.5*o*f,m=i*(t(p-.5*o)-l)*v,b=s-.5*o*h,x=c-.5*o*m,y=i*(t(p-.5*o)-l)*b,g=s-o*x;s-=o*(u+2*h+2*x+(c-o*y))/6,c-=o*(f+2*m+2*y+i*(t(p-o)-l)*g)/6,r[d-1]=s}return r}(t,v,n,m,l,i));var b=u[h],x=f[0];if(Math.abs(b)<1e-30||Math.abs(x)<1e-30)return{psi:null,F:NaN};var y=(u[h]-u[h-1])/(r*u[h])-(f[1]-f[0])/(r*f[0]),g=b/x,w=new Array(a+1);for(d=0;d<=h;d++)w[d]=u[d];for(d=1;d<=m;d++)w[h+d]=f[d]*g;return{psi:w,F:y}}function q(){var n=d.value.trim(),a=parseFloat(p.value),i=parseFloat(u.value),b=parseFloat(f.value),y=parseFloat(v.value),k=parseFloat(h.value),T=parseInt(m.value,10),q=parseInt(x.value,10)||500,P=function(){for(var e=t.querySelectorAll('input[name="eigMethod"]'),n=0;n<e.length;n++)if(e[n].checked)return e[n].value;return"numerov"}();if(isNaN(a)||isNaN(i)||a>=i)S.innerHTML='<span style="color:#f56c6c">åŒºé—´å‚æ•°æ— æ•ˆ</span>';else if(isNaN(b)||isNaN(y)||b>=y)S.innerHTML='<span style="color:#f56c6c">èƒ½é‡èŒƒå›´æ— æ•ˆ</span>';else if(isNaN(k)||k<=0)S.innerHTML='<span style="color:#f56c6c">Î³ å‚æ•°æ— æ•ˆï¼ˆéœ€ä¸ºæ­£æ•°ï¼‰</span>';else{var E,L,F;try{L=n,F=e.compile(L),(E=function(t){return F.evaluate({x:t})})(a),E(i),E((a+i)/2)}catch(t){return void(S.innerHTML='<span style="color:#f56c6c">V(x) è¡¨è¾¾å¼é”™è¯¯: '+t.message+"</span>")}for(var A=k*k,R="numerov"===P,N=(y-b)/q,H=[],z=[],j=null,D=[],B=0;B<=q;B++){var I=b+B*N,O=C(E,a,i,T,I,A,R).F;H.push(I),z.push(isFinite(O)?O:null),null!==j&&isFinite(O)&&isFinite(j)&&j*O<0&&D.push([I-N,I]),isFinite(O)&&(j=O)}for(var W=[],U=[],_=0;_<D.length&&W.length<8;_++){var V=D[_][0],X=D[_][1],G=C(E,a,i,T,V,A,R).F,K=C(E,a,i,T,X,A,R).F;if(isFinite(G)&&isFinite(K)){for(var Y=0;Y<60;Y++){var $=(V+X)/2,J=C(E,a,i,T,$,A,R).F;if(!isFinite(J))break;if(G*J<0?(X=$,K=J):(V=$,G=J),Math.abs(X-V)<1e-12)break}var Q=(V+X)/2,Z=C(E,a,i,T,Q,A,R);if(Z.psi){for(var tt=Z.psi,et=(i-a)/T,nt=0,at=0;at<T;at++)nt+=(tt[at]*tt[at]+tt[at+1]*tt[at+1])*et/2;var lt=Math.sqrt(nt);if(lt>0)for(at=0;at<=T;at++)tt[at]/=lt;W.push(Q),U.push(tt)}}}for(var it=[],ot=0;ot<U.length;ot++){var rt=0,st=U[ot];for(at=1;at<st.length;at++)st[at-1]*st[at]<0&&rt++;it.push(rt)}!function(t,e,n,a,l,i){var o=window.devicePixelRatio||1,s=g.clientWidth||600,d=g.clientHeight||400;g.width=s*o,g.height=d*o;var p=g.getContext("2d");p.scale(o,o);var u={top:20,right:20,bottom:40,left:50},f=s-u.left-u.right,v=d-u.top-u.bottom;p.clearRect(0,0,s,d);for(var h=(n-e)/a,m=[],b=0;b<=a;b++){var x=e+b*h;try{D=t(x)}catch(t){D=0}m.push(D)}var y=1/0,w=-1/0;for(b=0;b<m.length;b++)isFinite(m[b])&&(m[b]<y&&(y=m[b]),m[b]>w&&(w=m[b]));for(b=0;b<l.length;b++)l[b]<y&&(y=l[b]),l[b]>w&&(w=l[b]);for(var S=0,k=0;k<i.length;k++)for(var M=0;M<=a;M++){var T=Math.abs(i[k][M]);T>S&&(S=T)}var C=l.length>1?l[l.length-1]-l[0]:w-y||1,q=.15*C/(S||1),P=.15*(w-y)||1;function E(t){return u.left+(t-e)/(n-e)*f}function L(t){return u.top+v-(t-y)/(w-y)*v}y-=P,w+=P+.2*C,p.strokeStyle=r,p.lineWidth=1,p.beginPath(),p.moveTo(u.left,u.top),p.lineTo(u.left,u.top+v),p.lineTo(u.left+f,u.top+v),p.stroke(),p.fillStyle=r,p.font="11px sans-serif",p.textAlign="center";for(var F=6,A=0;A<=F;A++){var R=e+(n-e)*A/F,N=E(R);p.beginPath(),p.moveTo(N,u.top+v),p.lineTo(N,u.top+v+4),p.stroke(),p.fillText(R.toFixed(2),N,u.top+v+16)}p.fillText("x",u.left+f/2,d-4),p.textAlign="right";var H=5;for(A=0;A<=H;A++){var z=y+(w-y)*A/H,j=L(z);p.beginPath(),p.moveTo(u.left-4,j),p.lineTo(u.left,j),p.stroke(),p.fillText(z.toFixed(1),u.left-6,j+4)}p.save(),p.translate(12,u.top+v/2),p.rotate(-Math.PI/2),p.textAlign="center",p.fillText("E / V(x)",0,0),p.restore(),p.beginPath();for(b=0;b<=a;b++){x=e+b*h;var D=isFinite(m[b])?m[b]:0,B=Math.max(y,Math.min(w,D));0===b?p.moveTo(E(x),L(B)):p.lineTo(E(x),L(B))}p.lineTo(E(n),L(y)),p.lineTo(E(e),L(y)),p.closePath(),p.fillStyle="rgba(150,150,150,0.15)",p.fill(),p.beginPath();for(b=0;b<=a;b++){x=e+b*h,D=isFinite(m[b])?m[b]:0,B=Math.max(y,Math.min(w,D));0===b?p.moveTo(E(x),L(B)):p.lineTo(E(x),L(B))}p.strokeStyle=r,p.lineWidth=1.5,p.stroke();for(k=0;k<l.length;k++){var I=l[k],O=c[k%c.length],W=i[k];p.save(),p.setLineDash([4,4]),p.strokeStyle=O,p.globalAlpha=.5,p.lineWidth=1,p.beginPath(),p.moveTo(E(e),L(I)),p.lineTo(E(n),L(I)),p.stroke(),p.restore(),p.fillStyle=O,p.font="bold 11px sans-serif",p.textAlign="left",p.fillText("E"+(k+1),E(n)+4,L(I)+4),p.beginPath();for(M=0;M<=a;M++){x=e+M*h;var U=I+W[M]*q,_=E(x),V=L(U);0===M?p.moveTo(_,V):p.lineTo(_,V)}p.strokeStyle=O,p.lineWidth=1.5,p.stroke()}}(E,a,i,T,W,U),function(t,e,n){var a=window.devicePixelRatio||1,l=w.clientWidth||600,i=w.clientHeight||260;w.width=l*a,w.height=i*a;var d=w.getContext("2d");d.scale(a,a);var p={top:16,right:20,bottom:40,left:60},u=l-p.left-p.right,f=i-p.top-p.bottom;if(d.clearRect(0,0,l,i),0===t.length)return;for(var v=t[0],h=t[t.length-1],m=[],b=0;b<e.length;b++)null!==e[b]&&isFinite(e[b])&&m.push(e[b]);if(0===m.length)return;m.sort(function(t,e){return t-e});var x=m[Math.floor(.05*m.length)]||-1,y=m[Math.floor(.95*m.length)]||1,g=y-x||1,S=x-.15*g,k=y+.15*g;function M(t){return p.left+(t-v)/(h-v)*u}function T(t){return p.top+f-(t-S)/(k-S)*f}d.strokeStyle=r,d.lineWidth=1,d.beginPath(),d.moveTo(p.left,p.top),d.lineTo(p.left,p.top+f),d.lineTo(p.left+u,p.top+f),d.stroke(),S<0&&k>0&&(d.save(),d.setLineDash([3,3]),d.strokeStyle=r,d.globalAlpha=.5,d.beginPath(),d.moveTo(p.left,T(0)),d.lineTo(p.left+u,T(0)),d.stroke(),d.restore());d.fillStyle=r,d.font="11px sans-serif",d.textAlign="center";for(var C=6,q=0;q<=C;q++){var P=v+(h-v)*q/C,E=M(P);d.beginPath(),d.moveTo(E,p.top+f),d.lineTo(E,p.top+f+4),d.stroke(),d.fillText(P.toFixed(1),E,p.top+f+16)}d.fillText("E",p.left+u/2,i-4),d.save(),d.translate(14,p.top+f/2),d.rotate(-Math.PI/2),d.textAlign="center",d.fillText("F(E)",0,0),d.restore(),d.textAlign="right";var L=4;for(q=0;q<=L;q++){var F=S+(k-S)*q/L,A=T(F);d.beginPath(),d.moveTo(p.left-4,A),d.lineTo(p.left,A),d.stroke(),d.fillText(F.toExponential(1),p.left-6,A+4)}d.beginPath();var R=!1;for(b=0;b<t.length;b++){var N=e[b];if(null!==N&&isFinite(N)){var H=Math.max(S,Math.min(k,N)),z=M(t[b]),j=T(H);R?d.lineTo(z,j):(d.moveTo(z,j),R=!0)}else R=!1}d.strokeStyle=o,d.lineWidth=1.5,d.stroke();for(b=0;b<n.length;b++){var D=M(n[b]),B=T(0),I=c[b%c.length];d.save(),d.setLineDash([2,3]),d.strokeStyle=I,d.globalAlpha=.4,d.beginPath(),d.moveTo(D,p.top),d.lineTo(D,p.top+f),d.stroke(),d.restore(),d.beginPath(),d.arc(D,B,4,0,2*Math.PI),d.fillStyle=I,d.fill(),d.strokeStyle=s,d.lineWidth=1,d.stroke()}}(H,z,W);var ct=!1,dt=[],pt="";if(0===M){ct=!0,pt="n^2\\pi^2/\\gamma^2";for(var ut=0;ut<W.length;ut++){var ft=ut+1;dt.push(ft*ft*Math.PI*Math.PI/A)}}else if(1===M){ct=!0,pt="(2n-1)/\\gamma";for(ut=0;ut<W.length;ut++){ft=ut+1;dt.push((2*ft-1)/k)}}if(0===W.length)S.innerHTML='<span style="color:#e6a23c">æœªæ‰¾åˆ°æœ¬å¾å€¼ï¼Œå°è¯•è°ƒæ•´èƒ½é‡èŒƒå›´æˆ–å¢åŠ æ‰«ææ­¥æ•°</span>';else{var vt="<b>æ‰¾åˆ° "+W.length+' ä¸ªæœ¬å¾å€¼</b>&ensp;<span style="font-size:12px;color:'+r+'">(æ–¹æ³•: '+P.toUpperCase()+", Î³ = "+k.toFixed(6)+", Î³Â² = "+A.toFixed(6)+')</span><br><table style="width:100%;border-collapse:collapse;margin-top:8px;font-size:13px"><tr style="border-bottom:1px solid '+r+'"><th style="text-align:left;padding:4px">n</th><th style="text-align:left;padding:4px">'+l("E_n")+' (æ•°å€¼)</th><th style="text-align:left;padding:4px">èŠ‚ç‚¹</th>';ct&&(vt+='<th style="text-align:left;padding:4px">'+l(pt)+"</th>",vt+='<th style="text-align:left;padding:4px">ç›¸å¯¹è¯¯å·®</th>'),vt+="</tr>";for(ut=0;ut<W.length;ut++){if(vt+='<tr><td style="padding:4px;color:'+c[ut%c.length]+'"><b>'+l("E_{"+(ut+1)+"}")+'</b></td><td style="padding:4px">'+W[ut].toFixed(8)+'</td><td style="padding:4px">'+it[ut]+"</td>",ct){var ht=dt[ut],mt=Math.abs(ht)>1e-15?Math.abs(W[ut]-ht)/Math.abs(ht):0;vt+='<td style="padding:4px">'+ht.toFixed(8)+"</td>",vt+='<td style="padding:4px">'+mt.toExponential(2)+"</td>"}vt+="</tr>"}vt+="</table>",ct&&(vt+='<div style="margin-top:6px;font-size:12px;color:'+r+'">è§£æ: '+l("E_n = "+pt)+"</div>"),S.innerHTML=vt}}}t.querySelector("#eigPre1").addEventListener("click",function(){T(0)}),t.querySelector("#eigPre2").addEventListener("click",function(){T(1)}),t.querySelector("#eigPre3").addEventListener("click",function(){T(2)}),t.querySelector("#eigPre4").addEventListener("click",function(){T(3)}),t.querySelector("#eigPre5").addEventListener("click",function(){T(4)}),y.addEventListener("click",function(){try{q()}catch(t){S.innerHTML='<span style="color:#f56c6c">è®¡ç®—é”™è¯¯: '+t.message+"</span>"}})}},{id:"favicon",name:"Faviconç”Ÿæˆ",icon:"ğŸ–¼ï¸",cat:"productivity",desc:"ä¸Šä¼ å›¾ç‰‡ â†’ å¤šå°ºå¯¸ favicon",html:()=>'<div class="t-row" style="justify-content:center"><label class="t-btn t-btn-s" style="cursor:pointer">ğŸ“‚ ä¸Šä¼ å›¾æ ‡ <input type="file" id="favFile" accept="image/*" style="display:none"></label></div><div style="text-align:center;margin:8px 0"><canvas id="favPrev" width="128" height="128" style="border:1px solid #eee;border-radius:8px;background:#f9f9f9"></canvas></div><div style="display:flex;flex-wrap:wrap;gap:6px;justify-content:center;margin:8px 0" id="favSizes"><label><input type="checkbox" value="16" checked> 16px</label><label><input type="checkbox" value="32" checked> 32px</label><label><input type="checkbox" value="48" checked> 48px</label><label><input type="checkbox" value="64" checked> 64px</label><label><input type="checkbox" value="128"> 128px</label><label><input type="checkbox" value="192"> 192px</label><label><input type="checkbox" value="512"> 512px</label></div><div id="favOut" style="display:flex;flex-wrap:wrap;gap:8px;justify-content:center;margin-top:10px"></div>',init(t){let e=null;function n(){if(!e)return;const n=t.querySelector("#favOut");n.innerHTML="",t.querySelectorAll("#favSizes input:checked").forEach(t=>{const a=+t.value,l=document.createElement("canvas");l.width=l.height=a;var i=Math.min(a/e.width,a/e.height),o=e.width*i,r=e.height*i;l.getContext("2d").drawImage(e,(a-o)/2,(a-r)/2,o,r),l.toBlob(t=>{const l=document.createElement("div");l.style.cssText="text-align:center";const i=document.createElement("a");i.href=URL.createObjectURL(t),i.download="favicon-"+a+"x"+a+".png",i.className="t-btn t-btn-d",i.style.cssText="font-size:.72em;display:block;text-decoration:none",i.textContent="ğŸ’¾ "+a+"px";const o=document.createElement("canvas");o.width=o.height=Math.min(a,64),o.style.cssText="border:1px solid #eee;border-radius:4px",o.getContext("2d").drawImage(e,0,0,o.width,o.height),l.appendChild(o),l.appendChild(document.createElement("br")),l.appendChild(i),n.appendChild(l)},"image/png")})}t.querySelector("#favFile").onchange=function(){const a=this.files[0];a&&(e=new Image,e.onload=()=>{const a=t.querySelector("#favPrev").getContext("2d");a.clearRect(0,0,128,128);const l=Math.min(128/e.width,128/e.height),i=e.width*l,o=e.height*l;a.drawImage(e,(128-i)/2,(128-o)/2,i,o),n()},t._favUrl&&URL.revokeObjectURL(t._favUrl),t._favUrl=URL.createObjectURL(a),e.src=t._favUrl)},t.querySelectorAll("#favSizes input").forEach(t=>t.onchange=n),t._cleanup=function(){t._favUrl&&URL.revokeObjectURL(t._favUrl)}}},{id:"focus",name:"ä¸“æ³¨åŠ©æ‰‹",icon:"ğŸ…",cat:"productivity",desc:"ç•ªèŒ„é’Ÿ Â· ç™½å™ªéŸ³ Â· è‡ªå®šä¹‰éŸ³é¢‘",html(){let t="",e="";for(let n=1;n<=120;n++)t+='<option value="'+n+'"'+(25===n?" selected":"")+">"+n+"</option>",n<=60&&(e+='<option value="'+n+'"'+(5===n?" selected":"")+">"+n+"</option>");return'<div class="t-row" style="justify-content:center"><span class="t-lbl">å·¥ä½œ</span><select class="t-sel" id="focWork" style="width:auto">'+t+'</select><span class="t-lbl">åˆ†é’Ÿ</span><span class="t-lbl" style="margin-left:8px">ä¼‘æ¯</span><select class="t-sel" id="focBreak" style="width:auto">'+e+'</select><span class="t-lbl">åˆ†é’Ÿ</span></div><div class="pomo-label" id="focPhase">ä¸“æ³¨æ—¶é—´</div><div class="pomo-time" id="focTime">25:00</div><div class="t-row" style="justify-content:center"><button class="t-btn t-btn-s" id="focToggle" style="min-width:100px">â–¶ å¼€å§‹</button><button class="t-btn t-btn-d" id="focReset">â†º é‡ç½®</button></div><div style="text-align:center;margin:12px 0;font-size:.82em;color:#888">ğŸ… Ã— <span id="focDone">0</span></div><div style="border-top:1px solid #f0f0f0;margin-top:10px;padding-top:10px"><div class="t-lbl" style="text-align:center;margin-bottom:8px">ğŸ§ ç¯å¢ƒéŸ³</div><div style="display:flex;gap:8px;flex-wrap:wrap;justify-content:center"><span class="focus-sound" data-type="white">ğŸŒŠ ç™½å™ªéŸ³</span><span class="focus-sound" data-type="brown">ğŸŒ² æ£•å™ªéŸ³</span><span class="focus-sound" data-type="pink">ğŸŒ¸ ç²‰å™ªéŸ³</span><span class="focus-sound" data-type="rain">ğŸŒ§ï¸ é›¨å£°</span><span class="focus-sound" data-type="fire">ğŸ”¥ å£ç‚‰</span><span class="focus-sound" data-type="wind">ğŸ’¨ å¾®é£</span><span class="focus-sound" data-type="custom">ğŸ”— è‡ªå®šä¹‰</span></div><div id="focCustomWrap" style="display:none;margin-top:8px;text-align:center"><input type="text" class="t-in" id="focCustomUrl" placeholder="ç²˜è´´ MP3/OGG éŸ³é¢‘ URL" style="width:80%;font-size:.82em"><div style="font-size:.7em;color:#999;margin-top:4px">ğŸ’¡ å¯ä» <a href="https://freesound.org" target="_blank">Freesound</a> / <a href="https://pixabay.com/sound-effects" target="_blank">Pixabay</a> è·å–å…è´¹éŸ³æ•ˆ</div></div><div class="t-row" style="justify-content:center;margin-top:8px"><span class="t-lbl">éŸ³é‡</span><input type="range" id="focVol" min="0" max="100" value="20" style="width:150px"><span id="focVolVal" style="font-size:.78em;color:#888">20%</span></div></div>'},init(t){let e,n=!1,a=null,l=!0,i=0,o=null,r=null,s=null,c=null,d=null;function p(){return 60*(+t.querySelector("#focWork").value||25)}function u(){return 60*(+t.querySelector("#focBreak").value||5)}function f(t){return String(Math.floor(t/60)).padStart(2,"0")+":"+String(t%60).padStart(2,"0")}function v(){n=!1,clearInterval(a),e=p(),l=!0,t.querySelector("#focPhase").textContent="ä¸“æ³¨æ—¶é—´",t.querySelector("#focTime").textContent=f(e),t.querySelector("#focToggle").textContent="â–¶ å¼€å§‹",t.querySelector("#focToggle").className="t-btn t-btn-s"}function h(){if(n&&(e--,t.querySelector("#focTime").textContent=f(e),e<=0)){l?(i++,t.querySelector("#focDone").textContent=i,e=u(),l=!1,t.querySelector("#focPhase").textContent="â˜• ä¼‘æ¯æ—¶é—´"):(e=p(),l=!0,t.querySelector("#focPhase").textContent="ä¸“æ³¨æ—¶é—´"),t.querySelector("#focTime").textContent=f(e);try{new Notification(l?"ä¼‘æ¯ç»“æŸï¼Œç»§ç»­ä¸“æ³¨ï¼":"ğŸ… ç•ªèŒ„å®Œæˆï¼ä¼‘æ¯ä¸€ä¸‹")}catch(t){}}}function m(){if(r)try{r.stop()}catch(t){}r=null,d&&(d.pause(),d.src="",d=null)}function b(e){if(o||(o=new(window.AudioContext||window.webkitAudioContext)),"suspended"===o.state&&o.resume(),m(),"custom"===e){const e=t.querySelector("#focCustomUrl").value.trim();return void(e&&function(e){o||(o=new(window.AudioContext||window.webkitAudioContext)),"suspended"===o.state&&o.resume(),m(),d=new Audio,d.crossOrigin="anonymous",d.loop=!0,d.src=e;const n=o.createMediaElementSource(d);s=o.createGain(),s.gain.value=t.querySelector("#focVol").value/100,n.connect(s).connect(o.destination),d.play().catch(e=>{t.querySelector("#focCustomUrl").placeholder="âŒ æ— æ³•æ’­æ”¾æ­¤ URL"})}(e))}const n=o.sampleRate,a=o.createBuffer(2,10*n,n),l=a.getChannelData(0),i=a.getChannelData(1),c=l.length;if("white"===e)for(let t=0;t<c;t++)l[t]=.4*(2*Math.random()-1),i[t]=.4*(2*Math.random()-1);else if("brown"===e){let t=0,e=0;for(let n=0;n<c;n++)t+=.015*(2*Math.random()-1),e+=.015*(2*Math.random()-1),t=Math.max(-.5,Math.min(.5,t)),e=Math.max(-.5,Math.min(.5,e)),l[n]=t,i[n]=e}else if("pink"===e){let t=0,e=0,n=0,a=0,o=0,r=0,s=0,d=0,p=0,u=0,f=0,v=0,h=0,m=0;for(let b=0;b<c;b++){const c=2*Math.random()-1,x=2*Math.random()-1;t=.99886*t+.0555179*c,e=.99332*e+.0750759*c,n=.969*n+.153852*c,a=.8665*a+.3104856*c,o=.55*o+.5329522*c,r=-.7616*r-.016898*c,l[b]=.11*(t+e+n+a+o+r+s+.5362*c),s=.115926*c,d=.99886*d+.0555179*x,p=.99332*p+.0750759*x,u=.969*u+.153852*x,f=.8665*f+.3104856*x,v=.55*v+.5329522*x,h=-.7616*h-.016898*x,i[b]=.11*(d+p+u+f+v+h+m+.5362*x),m=.115926*x}}else if("rain"===e)for(let t=0;t<c;t++){let e=.12*(2*Math.random()-1);Math.random()<3e-4&&(e+=.6*Math.random()-.3),Math.random()<.001&&(e+=.3*(Math.random()-.5)),l[t]=e+.03*(2*Math.random()-1),i[t]=e+.03*(2*Math.random()-1)}else if("fire"===e){let t=0;for(let e=0;e<c;e++){let a=.08*(2*Math.random()-1);t*=.999,Math.random()<8e-4&&(t=.6*(Math.random()-.3)),a+=t;const o=.02*Math.sin(e/n*2);l[e]=a+o+.02*(Math.random()-.5),i[e]=a-o+.02*(Math.random()-.5)}}else if("wind"===e){let t=0,e=0,n=0;for(let a=0;a<c;a++)n+=1e-4*(Math.random()-.5),n=Math.max(-.1,Math.min(.1,n)),t+=.008*(Math.random()-.5)+n,e+=.008*(Math.random()-.5)+.8*n,t*=.9995,e*=.9995,l[a]=t+.02*(Math.random()-.5),i[a]=e+.02*(Math.random()-.5)}r=o.createBufferSource(),r.buffer=a,r.loop=!0;const p=o.createBiquadFilter();"white"===e?(p.type="lowpass",p.frequency.value=8e3):"rain"===e?(p.type="bandpass",p.frequency.value=2e3,p.Q.value=.5):"wind"===e?(p.type="lowpass",p.frequency.value=600):(p.type="lowpass",p.frequency.value=12e3),s=o.createGain(),s.gain.value=t.querySelector("#focVol").value/100,r.connect(p).connect(s).connect(o.destination),r.start()}e=p(),t.querySelector("#focToggle").onclick=function(){if(n)n=!1,clearInterval(a),this.textContent="â–¶ ç»§ç»­",this.className="t-btn t-btn-s";else{n=!0,a=setInterval(h,1e3),this.textContent="â¸ æš‚åœ",this.className="t-btn t-btn-o";try{Notification.requestPermission()}catch(t){}}},t.querySelector("#focReset").onclick=v,t.querySelector("#focWork").onchange=()=>{n||v()},t.querySelector("#focBreak").onchange=()=>{n||l||(e=u(),t.querySelector("#focTime").textContent=f(e))},t.querySelectorAll(".focus-sound").forEach(e=>{e.onclick=()=>{const n="custom"===e.dataset.type;if(t.querySelector("#focCustomWrap").style.display=n?"":"none",c===e)return e.classList.remove("active"),m(),void(c=null);t.querySelectorAll(".focus-sound").forEach(t=>t.classList.remove("active")),e.classList.add("active"),c=e,n||b(e.dataset.type)}}),t.querySelector("#focCustomUrl").onchange=()=>{c&&"custom"===c.dataset.type&&b("custom")},t.querySelector("#focVol").oninput=function(){t.querySelector("#focVolVal").textContent=this.value+"%",s&&(s.gain.value=this.value/100),d&&(d.volume=this.value/100)},t._cleanup=()=>{if(clearInterval(a),m(),o)try{o.close()}catch(t){}}}},{id:"fourier",name:"å‚…é‡Œå¶åˆæˆå™¨",icon:"ã€°ï¸",cat:"music",desc:"å‚…é‡Œå¶çº§æ•° Â· ä¹å™¨éŸ³è‰² Â· æ‰‹ç»˜æ³¢å½¢ Â· éŸ³é¢‘æ’­æ”¾",html:function(){return'<div class="t-row" style="flex-wrap:wrap"><label class="t-lbl">æ³¢å½¢/éŸ³è‰²</label><select class="t-sel" id="fouWave"><option value="square">æ–¹æ³¢</option><option value="sawtooth">é”¯é½¿æ³¢</option><option value="triangle">ä¸‰è§’æ³¢</option><option disabled>â”€â”€â”€â”€ ä¹å™¨éŸ³è‰² â”€â”€â”€â”€</option><option value="piano">ğŸ¹ é’¢ç´</option><option value="erhu">ğŸ» äºŒèƒ¡</option><option value="clarinet">ğŸ· å•ç°§ç®¡</option><option value="trumpet">ğŸº å°å·</option><option value="flute">ğŸªˆ ç¬›å­</option><option value="organ">ğŸ™ï¸ é£ç´</option><option disabled>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</option><option value="custom">è‡ªç”±è°ƒèŠ‚</option><option value="draw">âœï¸ æ‰‹ç»˜æ³¢å½¢</option></select><label class="t-lbl" style="margin-left:12px">è°æ³¢æ•° N</label><input class="t-in" id="fouN" type="number" min="1" max="32" value="8" style="width:60px"><label class="t-lbl" style="margin-left:12px">åŸºé¢‘ fâ‚€</label><input class="t-in" id="fouFreq" type="number" min="20" max="2000" value="220" style="width:70px"><span class="t-lbl">Hz</span></div><canvas id="fouCv" class="t-cv" style="max-width:760px;height:360px;margin:8px auto;display:block"></canvas><div id="fouDrawHint" style="text-align:center;font-size:12px;color:#99AAB5;display:none">ğŸ¨ åœ¨ç”»å¸ƒå·¦åŠéƒ¨åˆ†æ‹–åŠ¨ç»˜åˆ¶ä¸€ä¸ªå‘¨æœŸçš„æ³¢å½¢ï¼Œæ¾å¼€åè‡ªåŠ¨è®¡ç®—å‚…é‡Œå¶ç³»æ•°</div><div id="fouSliders" style="max-width:760px;margin:0 auto;max-height:220px;overflow-y:auto;padding:4px 0"></div><div class="t-row" style="justify-content:center;margin-top:6px;flex-wrap:wrap"><button class="t-btn" id="fouPlay">â–¶ æ’­æ”¾</button><button class="t-btn t-btn-o" id="fouStop" style="display:none">â–  åœæ­¢</button><button class="t-btn t-btn-o" id="fouAnim">ğŸ¬ é€é¡¹å åŠ </button><button class="t-btn t-btn-o" id="fouReset">é‡ç½®ç³»æ•°</button></div><div id="fouFormula" class="t-res" style="text-align:center;margin-top:6px"></div>'},init:function(t){var e=t.querySelector("#fouCv"),n=e.getContext("2d"),a=window.devicePixelRatio||1,l=Math.min(760,e.parentElement.clientWidth-4),i=Math.round(.47*l);e.width=l*a,e.height=i*a,e.style.width=l+"px",e.style.height=i+"px",n.scale(a,a);var o=getComputedStyle(document.documentElement),r=o.getPropertyValue("--accent").trim()||"#5B8BA4",s=o.getPropertyValue("--bg-paper").trim()||"#FCFCFD",c=o.getPropertyValue("--font-color-1").trim()||"#2D2D32",d=o.getPropertyValue("--font-color-3").trim()||"#99AAB5",p=o.getPropertyValue("--border-warm").trim()||"#DCE1E7",u=t.querySelector("#fouWave"),f=t.querySelector("#fouN"),v=t.querySelector("#fouFreq"),h=t.querySelector("#fouSliders"),m=t.querySelector("#fouPlay"),b=t.querySelector("#fouStop"),x=t.querySelector("#fouAnim"),y=t.querySelector("#fouReset"),g=t.querySelector("#fouFormula"),w=t.querySelector("#fouDrawHint"),S=32,k=[],M=[],T=8,C=null,q=null,P=!1,E=!1,L=null,F=200,A=null,R=!1,N=-1,H=50,z=30,j=l-H-20,D=i-z-30,B=z+D/2,I=D/2*.85,O={piano:[0,1,.7,.4,.25,.18,.12,.08,.06,.04,.03],erhu:[0,1,.85,.65,.45,.3,.2,.12,.08,.05,.03],clarinet:[0,1,.06,.85,.04,.55,.03,.35,.02,.18,.01],trumpet:[0,1,.9,.85,.7,.55,.4,.3,.2,.12,.08],flute:[0,1,.12,.04,.02,.01],organ:[0,1,.8,.6,.5,.4,.35,.28,.2,.15,.1]};function W(t,e){if("square"===t)return e%2==0?{a:0,p:0}:{a:4/(Math.PI*e),p:0};if("sawtooth"===t)return{a:2/(Math.PI*e)*(e%2==0?-1:1),p:0};if("triangle"===t)return e%2==0?{a:0,p:0}:{a:8*((e-1)/2%2==0?1:-1)/(Math.PI*Math.PI*e*e),p:0};if(O[t]){var n=O[t];return{a:e<n.length?n[e]:0,p:0}}return{a:0,p:0}}function U(){for(var t=u.value,e=1;e<=S;e++){var n=W(t,e);k[e]=n.a,M[e]=n.p}}function _(){if(A)for(var t=1;t<=S;t++){for(var e=0,n=0;n<F;n++)e+=(A[n]||0)*Math.sin(2*Math.PI*t*n/F);k[t]=Math.max(-1,Math.min(1,2*e/F))}}function V(t){var e=u.value,n=t-Math.floor(t);if("square"===e)return n<.5?1:-1;if("sawtooth"===e)return n<.5?2*n:2*n-2;if("triangle"===e)return n<.25?4*n:n<.75?2-4*n:4*n-4;if("draw"===e&&A){var a=Math.floor(n*F);return a>=F&&(a=199),A[a]||0}if(O[e]){for(var l=0,i=1;i<=S;i++){var o=W(e,i);Math.abs(o.a)>1e-10&&(l+=o.a*Math.sin(2*Math.PI*i*t))}return l}return 0}function X(t){for(var e=0,n=1;n<=T;n++){var a=k[n]||0;Math.abs(a)<1e-10||(e+=a*Math.sin(2*Math.PI*n*t+(M[n]||0)))}return e}function G(){(T=parseInt(f.value)||8)<1&&(T=1),T>S&&(T=S),h.innerHTML="";for(var t=1;t<=T;t++)(function(t){var e=37*(t-1)%360,n=document.createElement("div");n.style.cssText="display:flex;align-items:center;gap:6px;margin:2px 0;font-size:13px";var a=document.createElement("span");a.style.cssText="width:10px;height:10px;border-radius:50%;flex-shrink:0;background:hsl("+e+",55%,55%)";var l=document.createElement("span");l.style.cssText="width:28px;text-align:right;color:"+c,l.textContent="n="+t;var i=document.createElement("input");i.type="range",i.min="-1",i.max="1",i.step="0.01",i.value=k[t]||0,i.style.cssText="flex:1;max-width:280px";var o=document.createElement("span");o.style.cssText="width:48px;font-size:12px;color:"+d,o.textContent=(k[t]||0).toFixed(2),i.oninput=function(){k[t]=parseFloat(i.value),o.textContent=k[t].toFixed(2),K(),Y()},n.appendChild(a),n.appendChild(l),n.appendChild(i),n.appendChild(o),h.appendChild(n)})(t)}function K(){n.clearRect(0,0,l,i),n.fillStyle=s,n.fillRect(0,0,l,i),n.strokeStyle=p,n.lineWidth=1,n.beginPath(),n.moveTo(H,z),n.lineTo(H,z+D),n.lineTo(H+j,z+D),n.stroke(),n.strokeStyle=d,n.setLineDash([4,4]),n.beginPath(),n.moveTo(H,B),n.lineTo(H+j,B),n.stroke(),n.setLineDash([]),n.font="11px sans-serif",n.fillStyle=d,n.textAlign="right",n.textBaseline="middle",n.fillText("+1",44,z+.075*D),n.fillText("0",44,B),n.fillText("-1",44,z+.925*D),n.textAlign="center",n.textBaseline="top",n.fillText("0",H,z+D+4),n.fillText("T",H+j/2,z+D+4),n.fillText("2T",H+j,z+D+4),"draw"===u.value&&(n.strokeStyle="rgba(91,139,164,0.2)",n.setLineDash([3,5]),n.lineWidth=1,n.beginPath(),n.moveTo(H+j/2,z),n.lineTo(H+j/2,z+D),n.stroke(),n.setLineDash([]),n.font="11px sans-serif",n.fillStyle="rgba(91,139,164,0.5)",n.textBaseline="top",n.fillText("â† ç»˜åˆ¶åŒº",H+j/4,34));var t=j,e=u.value;if("custom"!==e){n.strokeStyle=d,n.setLineDash([3,3]),n.lineWidth=1.5,n.beginPath();for(var a=0;a<t;a++){var o=V(m=a/t*2),c=H+a,f=B-o*I;0===a?n.moveTo(c,f):n.lineTo(c,f)}n.stroke(),n.setLineDash([])}for(var v=1;v<=T;v++){var h=k[v]||0;if(!(Math.abs(h)<.005)){n.strokeStyle="hsla("+37*(v-1)%360+",55%,55%,0.25)",n.lineWidth=1,n.beginPath();for(a=0;a<t;a++){var m=a/t*2;o=h*Math.sin(2*Math.PI*v*m+(M[v]||0)),c=H+a,f=B-o*I;0===a?n.moveTo(c,f):n.lineTo(c,f)}n.stroke()}}n.strokeStyle=r,n.lineWidth=2.5,n.beginPath();for(a=0;a<t;a++){o=X(m=a/t*2),c=H+a,f=B-o*I;0===a?n.moveTo(c,f):n.lineTo(c,f)}n.stroke(),n.font="12px sans-serif",n.textAlign="left",n.textBaseline="top";var b=60,x=36;if(n.fillStyle=r,n.fillRect(b,x+2,16,3),n.fillText("åˆæˆ (N="+T+")",80,x-2),"custom"!==e){x+=16,n.fillStyle=d,n.setLineDash([3,3]),n.beginPath(),n.moveTo(b,x+3),n.lineTo(76,x+3),n.stroke(),n.setLineDash([]);n.fillText("ç›®æ ‡: "+({square:"æ–¹æ³¢",sawtooth:"é”¯é½¿æ³¢",triangle:"ä¸‰è§’æ³¢",draw:"æ‰‹ç»˜",piano:"é’¢ç´",erhu:"äºŒèƒ¡",clarinet:"å•ç°§ç®¡",trumpet:"å°å·",flute:"ç¬›å­",organ:"é£ç´"}[e]||e),80,x-2)}var y=function(){if("custom"===u.value)return-1;for(var t=0,e=0;e<400;e++){var n=e/400,a=X(n)-V(n);t+=a*a}return Math.sqrt(t/400)}();y>=0&&(x+=16,n.fillStyle="#e17055",n.fillText("RMS è¯¯å·® = "+y.toFixed(4),80,x-2))}function Y(){for(var t=[],e=1;e<=T;e++){var n=k[e]||0;if(!(Math.abs(n)<.005)){var a=Math.abs(n).toFixed(3),l=n<0?" âˆ’ ":" + ";if(0===t.length&&n>0&&(l=""),t.push(l+a+"sin("+e+"Ï‰t)"),t.length>=6){t.push("â€¦");break}}}g.textContent="f(t) â‰ˆ "+(t.length?t.join(""):"0")}function $(){E&&(E=!1,L&&(clearTimeout(L),L=null),x.textContent="ğŸ¬ é€é¡¹å åŠ ")}function J(t){var n=e.getBoundingClientRect(),a=l/n.width,o=i/n.height,r=t.clientX||t.touches&&t.touches[0].clientX,s=t.clientY||t.touches&&t.touches[0].clientY,c=(r-n.left)*a,d=(s-n.top)*o,p=j/2,u=Math.floor((c-H)/p*F),f=(B-d)/I;return{idx:u,val:f=Math.max(-1,Math.min(1,f))}}function Q(t,e,n,a){if(t<0&&(t=0),e>=F&&(e=199),t>e){var l=t;t=e,e=l;var i=n;n=a,a=i}for(var o=t;o<=e;o++){var r=e===t?0:(o-t)/(e-t);A[o]=n+(a-n)*r}}function Z(){if(!A){A=[];for(var t=0;t<F;t++)A[t]=0}}function tt(){R=!1,N=-1,_(),G(),K(),Y()}function et(){P&&(q&&(q.disconnect(),q=null),C&&(C.close(),C=null),P=!1,m.style.display="",b.style.display="none")}e.addEventListener("mousedown",function(t){if("draw"===u.value){var e=J(t);e.idx<0||e.idx>=F||(R=!0,Z(),A[e.idx]=e.val,N=e.idx,K())}}),e.addEventListener("mousemove",function(t){if(R&&"draw"===u.value){var e=J(t);e.idx<0||e.idx>=F||(N>=0?Q(N,e.idx,A[N]||0,e.val):A[e.idx]=e.val,N=e.idx,K())}}),e.addEventListener("mouseup",function(){R&&"draw"===u.value&&tt()}),e.addEventListener("mouseleave",function(){R&&"draw"===u.value&&tt()}),e.addEventListener("touchstart",function(t){if("draw"===u.value){t.preventDefault();var e=J(t);e.idx<0||e.idx>=F||(R=!0,Z(),A[e.idx]=e.val,N=e.idx,K())}},{passive:!1}),e.addEventListener("touchmove",function(t){if(R&&"draw"===u.value){t.preventDefault();var e=J(t);e.idx<0||e.idx>=F||(N>=0?Q(N,e.idx,A[N]||0,e.val):A[e.idx]=e.val,N=e.idx,K())}},{passive:!1}),e.addEventListener("touchend",function(t){"draw"===u.value&&(t.preventDefault(),tt())},{passive:!1}),u.onchange=function(){$();var t=u.value;w.style.display="draw"===t?"":"none","draw"===t?A=null:"custom"!==t&&U(),G(),K(),Y()},f.onchange=function(){$(),(T=parseInt(f.value)||8)<1&&(T=1),T>S&&(T=S);var t=u.value;"custom"!==t&&"draw"!==t&&U(),"draw"===t&&A&&_(),G(),K(),Y()},m.onclick=function(){if(!P){try{C=new(window.AudioContext||window.webkitAudioContext)}catch(t){return}var t=parseFloat(v.value)||220;q=C.createScriptProcessor(4096,0,1);for(var e=C.sampleRate,n=0,a=0,l=[],i=0;i<=S;i++)l[i]=0;var o=u.value;q.onaudioprocess=function(i){for(var r=i.outputBuffer.getChannelData(0),s=0;s<4096;s++){var c=n/e,d=a/e,p=1;if("piano"===o){if((p=Math.exp(4*-d))<.003){a=0;for(var u=1;u<=S;u++)l[u]=0}}else"erhu"===o&&(p=Math.min(1,4*d));var f=t;"erhu"===o&&(f=t*(1+.025*Math.sin(2*Math.PI*5.5*c)));for(var v=0,h=1;h<=T;h++){var m=k[h]||0;Math.abs(m)<1e-10||(l[h]+=2*Math.PI*h*f/e,v+=m*Math.sin(l[h]))}r[s]=.3*v*p,n++,a++}},q.connect(C.destination),P=!0,m.style.display="none",b.style.display=""}},b.onclick=et,x.onclick=function(){E?$():function(){if(!E){E=!0,x.textContent="â³ åŠ¨ç”»ä¸­...";var t=parseInt(f.value)||8;t>S&&(t=S);var e=0;!function n(){if(++e>t)return E=!1,x.textContent="ğŸ¬ é€é¡¹å åŠ ",f.value=t,G(),K(),void Y();f.value=e,G(),K(),Y(),L=setTimeout(n,350)}()}}()},y.onclick=function(){if($(),"draw"===u.value)A=null;else if("custom"!==u.value)U();else for(var t=1;t<=S;t++)k[t]=0,M[t]=0;G(),K(),Y()};for(var nt=0;nt<=S;nt++)k[nt]=0,M[nt]=0;U(),G(),K(),Y(),t._cleanup=function(){et(),$()}}},{id:"frontmatter",name:"æ–‡ç« æ¨¡æ¿",icon:"ğŸ“",cat:"productivity",desc:"Front-matter ç”Ÿæˆ Â· ä¸‹è½½ .md",html:()=>'<div style="font-size:.75em;color:#888;margin-bottom:10px">âœï¸ ç”Ÿæˆ Hexo æ–‡ç«  Front-matter Â· è‡ªåŠ¨ UUID Â· ä¸€é”®ä¸‹è½½ .md</div><div class="t-row"><span class="t-lbl" style="min-width:55px">æ ‡é¢˜ *</span><input class="t-in" id="fmTitle" placeholder="æ–‡ç« æ ‡é¢˜ï¼ˆå¿…å¡«ï¼‰" style="flex:1"></div><div class="t-row"><span class="t-lbl" style="min-width:55px">ä½œè€…</span><input class="t-in" id="fmAuthor" value="yeliqin666" placeholder="å¤šäººç”¨é€—å·åˆ†éš”" style="flex:1"></div><div class="t-row"><span class="t-lbl" style="min-width:55px">æ ‡ç­¾</span><input class="t-in" id="fmTags" placeholder="é€—å·åˆ†éš”ï¼Œå¦‚: ç‰©ç†,å¤‡è€ƒ" style="flex:1"></div><div class="t-row"><span class="t-lbl" style="min-width:55px">åˆ†ç±»</span><input class="t-in" id="fmCats" placeholder="é€—å·åˆ†éš”ï¼Œå¦‚: èµ„æº" style="flex:1"></div><div style="display:flex;flex-wrap:wrap;gap:8px 16px;margin:8px 0;font-size:.82em"><label title="ç”Ÿæˆå¸¦ç¼–å·çš„ç« èŠ‚æ ‡é¢˜"><input type="checkbox" id="fmNumSec"> ç« èŠ‚ç¼–å·</label><label title="ç”Ÿæˆç›®å½•"><input type="checkbox" id="fmToc"> ç›®å½•(toc)</label><label title="æ–‡ç« ç½®é¡¶"><input type="checkbox" id="fmTop"> ç½®é¡¶(top)</label><label title="åŠ å¯†æ–‡ç« "><input type="checkbox" id="fmEncrypt"> åŠ å¯†</label><label title="å…³é—­è¯„è®º"><input type="checkbox" id="fmNoComment"> å…³é—­è¯„è®º</label></div><div id="fmEncRow" class="t-row" style="display:none"><span class="t-lbl" style="min-width:55px">å¯†ç </span><input class="t-in" id="fmPwd" type="password" placeholder="åŠ å¯†å¯†ç " style="flex:1;max-width:200px"></div><div class="t-row"><span class="t-lbl" style="min-width:55px">ä¸“æ </span><input class="t-in" id="fmSeries" placeholder="å¦‚: åŸå­ç‰©ç†å­¦ï¼ˆå¯é€‰ï¼‰" style="flex:1"><input class="t-in" id="fmSeriesSlug" placeholder="slug: atomic-physics" style="flex:1;max-width:160px"></div><div class="t-row" style="justify-content:center;gap:8px;margin-top:10px"><button class="t-btn t-btn-s" id="fmGen">âš¡ ç”Ÿæˆé¢„è§ˆ</button><button class="t-btn" id="fmDl">ğŸ“¥ ä¸‹è½½ .md</button><button class="t-btn t-btn-o" id="fmCopy" style="font-size:.75em">ğŸ“‹ å¤åˆ¶</button></div><div style="margin-top:6px;display:flex;flex-wrap:wrap;gap:6px;justify-content:center;font-size:.72em"><button class="t-btn t-btn-o fm-preset" data-p="essay" style="padding:4px 10px;font-size:.9em">ğŸ’¬ éšç¬”</button><button class="t-btn t-btn-o fm-preset" data-p="academic" style="padding:4px 10px;font-size:.9em">ğŸ“š å­¦æœ¯</button><button class="t-btn t-btn-o fm-preset" data-p="resource" style="padding:4px 10px;font-size:.9em">ğŸ“¦ èµ„æº</button><button class="t-btn t-btn-o fm-preset" data-p="reading" style="padding:4px 10px;font-size:.9em">ğŸ“– è¯»ä¹¦</button></div><pre id="fmOut" class="t-res" style="min-height:120px;white-space:pre;font-size:.8em"></pre>',init(t){function e(e){return t.querySelector(e)}function n(t){return t<10?"0"+t:""+t}function a(t){return t?t.split(",").map(function(t){return t.trim()}).filter(function(t){return t}):[]}e("#fmEncrypt").onchange=function(){e("#fmEncRow").style.display=this.checked?"flex":"none"};var l={essay:{tags:"éšç¬”",cats:"æœ‰æ„Ÿ",numSec:!1,toc:!1,series:"",slug:""},academic:{tags:"ç‰©ç†,å¤‡è€ƒ",cats:"èµ„æº",numSec:!0,toc:!0,series:"",slug:""},resource:{tags:"å·¥å…·,èµ„æº",cats:"èµ„æº",numSec:!1,toc:!1,series:"",slug:""},reading:{tags:"è¯»ä¹¦",cats:"è¯»ä¹¦",numSec:!1,toc:!1,series:"",slug:""}};function i(){var t=e("#fmTitle").value.trim();if(!t)return e("#fmOut").textContent="âš ï¸ è¯·è¾“å…¥æ ‡é¢˜","";var l,i,o=[];o.push("---"),o.push("uuid: "+((l=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)})()+l()+"-"+l()+"-"+l()+"-"+l()+"-"+l()+l()+l())),o.push("title: "+t),o.push("date: "+((i=new Date).getFullYear()+"-"+n(i.getMonth()+1)+"-"+n(i.getDate())+" "+n(i.getHours())+":"+n(i.getMinutes())+":"+n(i.getSeconds())));var r=a(e("#fmAuthor").value);0===r.length&&(r=["yeliqin666"]),1===r.length?o.push("author: "+r[0]):(o.push("author:"),r.forEach(function(t){o.push("  - "+t)})),e("#fmNumSec").checked&&(o.push("numbersections: true"),o.push("secnumdepth: 3")),e("#fmToc").checked&&o.push("toc: true");var s=e("#fmSeries").value.trim();if(s){o.push("series: "+s);var c=e("#fmSeriesSlug").value.trim();c&&o.push("series_slug: "+c)}if(e("#fmTop").checked&&o.push("top: true"),e("#fmEncrypt").checked){var d=e("#fmPwd").value.trim();d&&o.push("password: "+d)}e("#fmNoComment").checked&&o.push("comment: false");var p=a(e("#fmTags").value);o.push("tags:"),p.length?p.forEach(function(t){o.push("  - "+t)}):o.push("  - ");var u=a(e("#fmCats").value);o.push("categories:"),u.length?u.forEach(function(t){o.push("  - "+t)}):o.push("  - "),o.push("---"),o.push("");var f=o.join("\n");return e("#fmOut").textContent=f,f}t.querySelectorAll(".fm-preset").forEach(function(t){t.onclick=function(){var n=l[t.dataset.p];n&&(e("#fmTags").value=n.tags,e("#fmCats").value=n.cats,e("#fmNumSec").checked=n.numSec,e("#fmToc").checked=n.toc,e("#fmSeries").value=n.series,e("#fmSeriesSlug").value=n.slug,i())}}),e("#fmGen").onclick=i,e("#fmDl").onclick=function(){var t=i();if(t){var n=e("#fmTitle").value.trim(),a=document.createElement("a");a.href="data:text/plain;charset=utf-8,"+encodeURIComponent(t),a.download=n+".md",a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a)}},e("#fmCopy").onclick=function(){var t=i();t&&navigator.clipboard.writeText(t).then(function(){e("#fmCopy").textContent="âœ“ å·²å¤åˆ¶",setTimeout(function(){e("#fmCopy").textContent="ğŸ“‹ å¤åˆ¶"},1500)})},e("#fmTitle").oninput=i}},{id:"gpa",name:"GPA è®¡ç®—å™¨",icon:"ğŸ“Š",cat:"campus",desc:"ç»©ç‚¹è®¡ç®— Â· XJTU é»˜è®¤è§„åˆ™ Â· å¯è‡ªå®šä¹‰",html:function(){return'<div class="t-row" style="align-items:center;flex-wrap:wrap"><span class="t-lbl" id="gpaRuleDesc" style="flex:1;font-size:.75em;color:#888">ğŸ“ XJTU ç ”ç©¶ç”Ÿç»©ç‚¹: 95â†’4.3 Â· 90â†’4.0 Â· 85â†’3.7 Â· 81â†’3.3 Â· 78â†’3.0 Â· 75â†’2.7 Â· 72â†’2.3 Â· 68â†’2.0 Â· 64â†’1.7 Â· 60â†’1.0</span><button class="t-btn t-btn-o" id="gpaRuleBtn" style="font-size:.72em;padding:3px 10px">âš™ è§„åˆ™è®¾ç½®</button></div><div id="gpaRulePanel" style="display:none;border:1px solid #DCE1E7;border-radius:8px;padding:10px;margin:6px 0;background:#F5F7F9"><div class="t-row" style="justify-content:space-between;align-items:center;margin-bottom:6px"><span class="t-lbl" style="font-weight:600">åˆ†æ•°â†’ç»©ç‚¹ æ˜ å°„è§„åˆ™</span><div><button class="t-btn t-btn-o" id="gpaAddRule" style="padding:2px 8px;font-size:.72em">ï¼‹ æ·»åŠ åŒºé—´</button><button class="t-btn t-btn-o" id="gpaResetRule" style="padding:2px 8px;font-size:.72em;margin-left:4px">æ¢å¤ XJTU é»˜è®¤</button></div></div><div id="gpaRuleBody" style="max-height:200px;overflow-y:auto"></div><div style="font-size:.7em;color:#99AAB5;margin-top:6px">æç¤º: åˆ†æ•°åŒºé—´ä»é«˜åˆ°ä½æ’åˆ—ï¼Œä¸åœ¨ä»»ä½•åŒºé—´å†…çš„åˆ†æ•°ç»©ç‚¹ä¸º 0ã€‚ä¸åŒå­¦æ ¡å¯èƒ½æœ‰ä¸åŒçš„åˆ†æ®µä¸æ»¡ç»©ã€‚</div></div><div style="overflow-x:auto"><table class="ct-table" id="gpaTable"><thead><tr><th style="min-width:140px">è¯¾ç¨‹åç§°</th><th style="width:70px">å­¦åˆ†</th><th style="width:70px">åˆ†æ•°</th><th style="width:60px">ç»©ç‚¹</th><th style="width:40px"></th></tr></thead><tbody id="gpaTbody"></tbody></table></div><div class="t-row" style="justify-content:center;margin:10px 0"><button class="t-btn t-btn-s" id="gpaAdd">ï¼‹ æ·»åŠ è¯¾ç¨‹</button><button class="t-btn t-btn-o" id="gpaClear" style="font-size:.75em">ğŸ—‘ï¸ æ¸…ç©º</button></div><div id="gpaResult" style="background:#f0f7ff;border-radius:10px;padding:14px;text-align:center;margin-top:8px"><div style="font-size:.78em;color:#888">åŠ æƒå¹³å‡ç»©ç‚¹</div><div id="gpaVal" style="font-size:2.2em;font-weight:700;color:#409eff">â€”</div><div id="gpaDetail" style="font-size:.75em;color:#999;margin-top:4px"></div></div>'},init:function(t){var e=[[95,100,4.3],[90,94,4],[85,89,3.7],[81,84,3.3],[78,80,3],[75,77,2.7],[72,74,2.3],[68,71,2],[64,67,1.7],[60,63,1],[0,59,0]],n=[];function a(t){for(var e=[],n=0;n<t.length;n++)e.push([t[n][0],t[n][1],t[n][2]]);return e}var l=t.querySelector("#gpaRulePanel"),i=t.querySelector("#gpaRuleBody"),o=t.querySelector("#gpaRuleDesc"),r=!1;function s(){for(var t=[],e=0;e<n.length;e++)n[e][2]>0&&t.push(n[e][0]+"â†’"+n[e][2]);o.textContent="ğŸ“ å½“å‰è§„åˆ™: "+t.join(" Â· ")}function c(){i.innerHTML="";for(var t=0;t<n.length;t++)(function(t){var e=document.createElement("div");e.style.cssText="display:flex;align-items:center;gap:4px;margin:3px 0;font-size:.78em",e.innerHTML='<input class="t-in" type="number" min="0" max="100" value="'+n[t][0]+'" style="width:50px" data-field="min"><span>~</span><input class="t-in" type="number" min="0" max="100" value="'+n[t][1]+'" style="width:50px" data-field="max"><span>åˆ† â†’ ç»©ç‚¹</span><input class="t-in" type="number" min="0" max="5" step="0.1" value="'+n[t][2]+'" style="width:55px" data-field="gpa"><button class="t-btn t-btn-d" style="padding:2px 6px;font-size:.7em">âœ•</button>';var a=e.querySelectorAll("input");a[0].oninput=function(){n[t][0]=parseFloat(this.value)||0,d()},a[1].oninput=function(){n[t][1]=parseFloat(this.value)||0,d()},a[2].oninput=function(){n[t][2]=parseFloat(this.value)||0,d()},e.querySelector("button").onclick=function(){n.splice(t,1),c(),d()},i.appendChild(e)})(t)}function d(){s(),f()}t.querySelector("#gpaRuleBtn").onclick=function(){r=!r,l.style.display=r?"":"none",r&&c()},t.querySelector("#gpaAddRule").onclick=function(){n.push([0,0,0]),c(),d()},t.querySelector("#gpaResetRule").onclick=function(){n=a(e),c(),d()};var p=t.querySelector("#gpaTbody");function u(t,e,n){var a=document.createElement("tr");return a.innerHTML='<td><input class="t-in gpa-name" value="'+(t||"")+'" placeholder="è¯¾ç¨‹å"></td><td><input class="t-in gpa-credit" type="number" min="0" max="20" step="0.5" value="'+(e||"")+'" placeholder="å­¦åˆ†" style="width:60px"></td><td><input class="t-in gpa-score" type="number" min="0" max="100" value="'+(n||"")+'" placeholder="åˆ†æ•°" style="width:60px"></td><td class="gpa-gp" style="font-weight:600;color:#409eff;text-align:center">â€”</td><td><button class="t-btn t-btn-d" style="padding:3px 8px;font-size:.7em">âœ•</button></td>',a.querySelector(".gpa-score").oninput=function(){f()},a.querySelector(".gpa-credit").oninput=function(){f()},a.querySelector("button").onclick=function(){a.remove(),f()},p.appendChild(a),f(),a}function f(){var e=p.querySelectorAll("tr"),a=0,l=0,i=0,o=0;if(e.forEach(function(t){var e=parseFloat(t.querySelector(".gpa-credit").value),r=parseFloat(t.querySelector(".gpa-score").value),s=t.querySelector(".gpa-gp");if(isNaN(e)||isNaN(r))return s.textContent="â€”",void(s.style.color="#ccc");var c=function(t){for(var e=0;e<n.length;e++)if(t>=n[e][0]&&t<=n[e][1])return n[e][2];return 0}(r);s.textContent=c.toFixed(1),s.style.color=c>=3.7?"#67c23a":c>=2?"#409eff":c>=1?"#e6a23c":"#f56c6c",a+=e,l+=e*c,i+=e*r,o++}),a>0){var r=l/a;t.querySelector("#gpaVal").textContent=r.toFixed(4),t.querySelector("#gpaVal").style.color=r>=3.7?"#67c23a":r>=2?"#409eff":"#f56c6c",t.querySelector("#gpaDetail").textContent=o+" é—¨è¯¾ Â· æ€»å­¦åˆ† "+a+" Â· åŠ æƒå‡åˆ† "+(i/a).toFixed(2)}else t.querySelector("#gpaVal").textContent="â€”",t.querySelector("#gpaVal").style.color="#409eff",t.querySelector("#gpaDetail").textContent=""}t.querySelector("#gpaAdd").onclick=function(){u("","","")},t.querySelector("#gpaClear").onclick=function(){p.innerHTML="",f()},n=a(e),s(),u("ç¤ºä¾‹ï¼šè‡ªç„¶è¾©è¯æ³•",1,92),u("ç¤ºä¾‹ï¼šæ•°å€¼åˆ†æ",3,87),u("ç¤ºä¾‹ï¼šçŸ©é˜µè®º",3,78),f()}},{id:"gradient",name:"CSS æ¸å˜",icon:"ğŸŒˆ",cat:"dev",desc:"å¯è§†åŒ– CSS æ¸å˜ç¼–è¾‘å™¨",html:()=>'<div class="grad-preview" id="gradPrev"></div><div class="t-row"><label class="t-lbl">è‰²1</label><input type="color" id="gradC1" value="#409eff"><label class="t-lbl">è‰²2</label><input type="color" id="gradC2" value="#67c23a"><label class="t-lbl">è§’åº¦</label><input type="range" id="gradAngle" min="0" max="360" value="135" style="flex:1"><span id="gradDeg">135Â°</span></div><div class="t-row"><label class="t-lbl">è‰²3</label><input type="color" id="gradC3" value="#f56c6c"><label><input type="checkbox" id="gradUse3"> ä¸‰è‰²</label><label class="t-lbl" style="margin-left:12px">ç±»å‹</label><select class="t-sel" id="gradType"><option value="linear">çº¿æ€§</option><option value="radial">å¾„å‘</option></select></div><div id="gradCode" class="t-res" style="cursor:pointer" title="ç‚¹å‡»å¤åˆ¶"></div>',init(t){function e(){const e=t.querySelector("#gradC1").value,n=t.querySelector("#gradC2").value,a=t.querySelector("#gradC3").value,l=t.querySelector("#gradAngle").value,i=t.querySelector("#gradUse3").checked,o=t.querySelector("#gradType").value;t.querySelector("#gradDeg").textContent=l+"Â°",t.querySelector("#gradAngle").disabled="linear"!==o,t.querySelector("#gradAngle").style.opacity="linear"===o?"1":"0.4",t.querySelector("#gradDeg").style.opacity="linear"===o?"1":"0.4";const r=i?e+", "+a+", "+n:e+", "+n,s="linear"===o?"linear-gradient("+l+"deg, "+r+")":"radial-gradient(circle, "+r+")";t.querySelector("#gradPrev").style.background=s,t.querySelector("#gradCode").textContent="background: "+s+";"}["gradC1","gradC2","gradC3","gradAngle","gradUse3","gradType"].forEach(n=>t.querySelector("#"+n).addEventListener("input",e)),t.querySelector("#gradCode").onclick=function(){navigator.clipboard.writeText(this.textContent),this.textContent="âœ“ å·²å¤åˆ¶",setTimeout(e,1e3)},e()}},{id:"hash",name:"Hash è®¡ç®—",icon:"ğŸ”‘",cat:"dev",desc:"MD5 / SHA å¤šç®—æ³• Â· æ–‡æœ¬ä¸æ–‡ä»¶",html:()=>'<div class="t-row"><label><input type="checkbox" id="haMd5"> MD5</label><label><input type="checkbox" id="haSha1"> SHA-1</label><label><input type="checkbox" id="haSha256" checked> SHA-256</label><label><input type="checkbox" id="haSha384"> SHA-384</label><label><input type="checkbox" id="haSha512"> SHA-512</label></div><div class="t-lbl">æ–‡æœ¬è¾“å…¥</div><textarea class="t-ta" id="hashIn" rows="3">Hello World</textarea><div class="t-row" style="margin-top:6px"><button class="t-btn" id="hashCalc">è®¡ç®—æ–‡æœ¬Hash</button><span style="color:#999;font-size:.82em">æˆ–</span><input type="file" id="hashFile"><button class="t-btn t-btn-o" id="hashFileCalc">è®¡ç®—æ–‡ä»¶Hash</button></div><div id="hashOut" class="t-res"></div>',async init(t){if(!window.crypto||!window.crypto.subtle)return t.querySelector("#hashOut").textContent="âš ï¸ æ­¤åŠŸèƒ½éœ€è¦ HTTPS æˆ– localhost ç¯å¢ƒï¼ˆcrypto.subtle ä¸å¯ç”¨ï¼‰",t.querySelector("#hashCalc").disabled=!0,void(t.querySelector("#hashFileCalc").disabled=!0);async function n(n){var a=[];if(t.querySelector("#haMd5").checked&&a.push("MD5"),t.querySelector("#haSha1").checked&&a.push("SHA-1"),t.querySelector("#haSha256").checked&&a.push("SHA-256"),t.querySelector("#haSha384").checked&&a.push("SHA-384"),t.querySelector("#haSha512").checked&&a.push("SHA-512"),a.length){for(var l=[],i=0;i<a.length;i++){var o=a[i];if("MD5"===o)"undefined"==typeof md5&&await e("https://cdn.jsdelivr.net/npm/js-md5@0.8.3/src/md5.min.js"),l.push("MD5: "+md5(n));else{var r=await crypto.subtle.digest(o,n),s=[].slice.call(new Uint8Array(r)).map(function(t){return t.toString(16).padStart(2,"0")}).join("");l.push(o+": "+s)}}t.querySelector("#hashOut").textContent=l.join("\n")}else t.querySelector("#hashOut").textContent="è¯·è‡³å°‘é€‰æ‹©ä¸€ç§ç®—æ³•"}t.querySelector("#hashCalc").onclick=function(){n((new TextEncoder).encode(t.querySelector("#hashIn").value))},t.querySelector("#hashFileCalc").onclick=function(){var e=t.querySelector("#hashFile").files[0];e?e.arrayBuffer().then(function(t){n(new Uint8Array(t))}):t.querySelector("#hashOut").textContent="è¯·å…ˆé€‰æ‹©æ–‡ä»¶"}}},{id:"imgcompress",name:"å›¾ç‰‡å‹ç¼©",icon:"ğŸ—œï¸",cat:"productivity",desc:"çº¯æµè§ˆå™¨ç«¯ Â· JPEG / WebP Â· è´¨é‡å¯è°ƒ",html:()=>'<div class="t-row" style="justify-content:center"><label class="t-btn t-btn-s" style="cursor:pointer">ğŸ“‚ é€‰æ‹©å›¾ç‰‡ <input type="file" id="icFile" accept="image/*" style="display:none"></label></div><div class="t-row"><span class="t-lbl">æ ¼å¼</span><select class="t-sel" id="icFmt"><option value="image/jpeg">JPEG</option><option value="image/webp">WebP</option><option value="image/png">PNGï¼ˆæ— æŸï¼‰</option></select></div><div class="t-row"><span class="t-lbl">ç”»è´¨</span><input type="range" id="icQ" min="1" max="100" value="75" style="width:160px"><span id="icQVal" style="font-size:.78em;color:#888">75%</span></div><div class="t-row"><span class="t-lbl">æœ€å¤§å®½åº¦</span><input type="number" class="t-in" id="icMaxW" value="0" style="width:80px"><span style="font-size:.75em;color:#888">px (0=åŸå°ºå¯¸)</span></div><div id="icInfo" style="font-size:.78em;color:#888;text-align:center;margin:8px 0"></div><div style="display:flex;gap:10px;justify-content:center;flex-wrap:wrap"><div style="text-align:center"><div style="font-size:.75em;color:#888">åŸå›¾</div><canvas id="icOrig" style="max-width:200px;max-height:160px;border:1px solid #eee;border-radius:4px"></canvas></div><div style="text-align:center"><div style="font-size:.75em;color:#888">å‹ç¼©å</div><canvas id="icComp" style="max-width:200px;max-height:160px;border:1px solid #eee;border-radius:4px"></canvas></div></div><div class="t-row" style="justify-content:center;margin-top:8px"><a id="icDl" class="t-btn t-btn-s" style="display:none;text-decoration:none">ğŸ’¾ ä¸‹è½½</a></div>',init(t){var e=t.querySelector("#icQ"),n=t.querySelector("#icQVal"),a=t.querySelector("#icFmt");function l(t){return t<1024?t+"B":t<1048576?(t/1024).toFixed(1)+"KB":(t/1048576).toFixed(2)+"MB"}function i(n){var i=+t.querySelector("#icMaxW").value,o=n.width,r=n.height;i>0&&o>i&&(r=Math.round(r*i/o),o=i);var s=t.querySelector("#icOrig"),c=t.querySelector("#icComp");s.width=n.width,s.height=n.height,s.getContext("2d").drawImage(n,0,0),c.width=o,c.height=r,c.getContext("2d").drawImage(n,0,0,o,r);var d=a.value,p=e.value/100,u="image/webp"===d?"webp":"image/png"===d?"png":"jpg";c.toBlob(function(e){var a=t._origSize||0,i=(100*(1-e.size/a)).toFixed(1),s=e.size>=a,d=s?"#e74c3c":"#27ae60",p=s?" âš ï¸ å‹ç¼©åæ›´å¤§ï¼è¯·é™ä½ç”»è´¨æˆ–æ”¹ç”¨ WebP":"";t.querySelector("#icInfo").innerHTML="åŸå§‹: "+l(a)+' â†’ å‹ç¼©: <span style="color:'+d+';font-weight:600">'+l(e.size)+"</span> ("+i+"% å‡å°‘)"+p+"<br>å°ºå¯¸: "+n.width+"Ã—"+n.height+" â†’ "+o+"Ã—"+r;var f=new Image;f.onload=function(){c.width=f.width,c.height=f.height,c.getContext("2d").drawImage(f,0,0),URL.revokeObjectURL(f.src)},f.src=URL.createObjectURL(e);var v=t.querySelector("#icDl");v.href=URL.createObjectURL(e),v.download="compressed."+u,v.style.display=""},d,"image/png"===d?void 0:p)}e.oninput=function(){n.textContent=e.value+"%"},a.onchange=function(){var n="image/png"===this.value;e.disabled=n,e.style.opacity=n?.4:1,t._img&&i(t._img)},t.querySelector("#icFile").onchange=function(){var e=this.files[0];if(e){t._origSize=e.size;var n=new Image;n.onload=function(){i(n)},t._imgUrl&&URL.revokeObjectURL(t._imgUrl),t._imgUrl=URL.createObjectURL(e),n.src=t._imgUrl,t._img=n}},e.onchange=function(){t._img&&i(t._img)},t.querySelector("#icMaxW").onchange=function(){t._img&&i(t._img)},t._cleanup=function(){t._imgUrl&&URL.revokeObjectURL(t._imgUrl);var e=t.querySelector("#icDl");e&&e.href&&0===e.href.indexOf("blob:")&&URL.revokeObjectURL(e.href)}}},{id:"integration",name:"æ•°å€¼ç§¯åˆ†",icon:"âˆ«",cat:"academic",desc:"å•é‡ Â· äºŒé‡ Â· æ¢¯å½¢ Â· Simpson Â· è‡ªåŠ¨è¯¯å·®ä¼°è®¡",html:()=>'\n<div class="t-row" style="margin-bottom:12px">\n  <button id="intTab1" class="t-btn" style="font-weight:700">å•é‡ç§¯åˆ†</button>\n  <button id="intTab2" class="t-btn t-btn-o">äºŒé‡ç§¯åˆ†</button>\n</div>\n<div id="intP1">\n  <label class="t-lbl">f(x)</label>\n  <input id="intExpr" class="t-in" value="sin(x)" placeholder="å¦‚ sin(x), exp(-x^2)">\n  <div class="t-row" style="gap:8px;margin-top:6px">\n    <div style="flex:1"><label class="t-lbl">a</label><input id="intA" class="t-in" value="0"></div>\n    <div style="flex:1"><label class="t-lbl">b</label><input id="intB" class="t-in" value="pi"></div>\n    <div style="flex:1"><label class="t-lbl">n</label><input id="intN" class="t-in" value="100"></div>\n  </div>\n  <div style="margin:8px 0">\n    <label class="t-lbl" style="margin-right:12px"><input type="checkbox" id="intChkTrap" checked> æ¢¯å½¢æ³•</label>\n    <label class="t-lbl" style="margin-right:12px"><input type="checkbox" id="intChkS13" checked> Simpson 1/3</label>\n    <label class="t-lbl"><input type="checkbox" id="intChkS38"> Simpson 3/8</label>\n  </div>\n  <div id="intPresets" style="margin-bottom:8px">\n    <span class="t-lbl" style="margin-right:4px">é¢„è®¾:</span>\n    <button class="t-btn t-btn-o" data-e="sin(x)" data-a="0" data-b="pi">sin(x) [0,Ï€]</button>\n    <button class="t-btn t-btn-o" data-e="exp(-x^2)" data-a="-3" data-b="3">e^(-xÂ²) [-3,3]</button>\n    <button class="t-btn t-btn-o" data-e="1/(1+x^2)" data-a="-5" data-b="5">1/(1+xÂ²) [-5,5]</button>\n  </div>\n  <button id="intCalc" class="t-btn">è®¡ç®—</button>\n</div>\n<div id="intP2" style="display:none">\n  <label class="t-lbl">f(x, y)</label>\n  <input id="intExpr2" class="t-in" value="sin(x)*cos(y)" placeholder="å¦‚ x^2+y^2">\n  <div class="t-row" style="gap:8px;margin-top:6px">\n    <div style="flex:1"><label class="t-lbl">a</label><input id="intA2" class="t-in" value="0"></div>\n    <div style="flex:1"><label class="t-lbl">b</label><input id="intB2" class="t-in" value="pi"></div>\n    <div style="flex:1"><label class="t-lbl">nx</label><input id="intNx" class="t-in" value="50"></div>\n  </div>\n  <div class="t-row" style="gap:8px;margin-top:6px">\n    <div style="flex:1"><label class="t-lbl">c</label><input id="intC2" class="t-in" value="0"></div>\n    <div style="flex:1"><label class="t-lbl">d</label><input id="intD2" class="t-in" value="pi"></div>\n    <div style="flex:1"><label class="t-lbl">ny</label><input id="intNy" class="t-in" value="50"></div>\n  </div>\n  <div style="margin:8px 0">\n    <label class="t-lbl" style="margin-right:12px"><input type="checkbox" id="intChk2Trap" checked> 2D æ¢¯å½¢æ³•</label>\n    <label class="t-lbl"><input type="checkbox" id="intChk2Simp" checked> 2D Simpson</label>\n  </div>\n  <div id="intPresets2" style="margin-bottom:8px">\n    <span class="t-lbl" style="margin-right:4px">é¢„è®¾:</span>\n    <button class="t-btn t-btn-o" data-e="sin(x)*cos(y)" data-a="0" data-b="pi" data-c="0" data-d="pi">sinÂ·cos [0,Ï€]Â²</button>\n    <button class="t-btn t-btn-o" data-e="x^2+y^2" data-a="0" data-b="1" data-c="0" data-d="1">xÂ²+yÂ² [0,1]Â²</button>\n  </div>\n  <button id="intCalc2" class="t-btn">è®¡ç®—</button>\n</div>\n<div id="intRes" class="t-res"></div>',async init(t){var e=function(e){return t.querySelector(e)},a=e("#intRes"),l=1;function i(t,e){return t.evaluate({x:e,e:Math.E,pi:Math.PI})}function o(t,e,n){return t.evaluate({x:e,y:n,e:Math.E,pi:Math.PI})}function r(t,e,n,a){for(var l=(n-e)/a,o=.5*(i(t,e)+i(t,n)),r=1;r<a;r++)o+=i(t,e+r*l);return o*l}function s(t,e,n,a){a%2!=0&&a++;for(var l=(n-e)/a,o=i(t,e)+i(t,n),r=1;r<a;r++)o+=i(t,e+r*l)*(r%2==0?2:4);return o*l/3}function c(t,e,n,a){for(;a%3!=0;)a++;for(var l=(n-e)/a,o=i(t,e)+i(t,n),r=1;r<a;r++){var s=r%3==0?2:3;o+=i(t,e+r*l)*s}return 3*o*l/8}function d(t,e,n,a,l,i,r){for(var s=(n-e)/i,c=(l-a)/r,d=0,p=0;p<i;p++)for(var u=0;u<r;u++){var f=e+p*s,v=f+s,h=a+u*c,m=h+c;d+=o(t,f,h)+o(t,v,h)+o(t,f,m)+o(t,v,m)}return d*s*c/4}function p(t,e,n,a,l,i,r){i%2!=0&&i++,r%2!=0&&r++;var s=(n-e)/i,c=(l-a)/r;function d(t){return 0===t||t===i?1:t%2==0?2:4}function p(t){return 0===t||t===r?1:t%2==0?2:4}for(var u=0,f=0;f<=i;f++)for(var v=0;v<=r;v++)u+=d(f)*p(v)*o(t,e+f*s,a+v*c);return u*s*c/9}function u(t,e,n,a){return'<div style="border-radius:8px;border:1px solid var(--border-warm);padding:10px;background:var(--bg-zebra);margin-bottom:8px"><b>'+t+"</b><br>ç»“æœ: <code>"+(("number"==typeof(l=e)?l.toPrecision(12):String(l))+"</code><br>è¯¯å·®ä¼°è®¡: <code>")+n.toPrecision(4)+'</code><br><span style="color:var(--font-color-3)">è€—æ—¶ '+a.toFixed(1)+" ms</span></div>";var l}async function f(){var t=await n(),l=e("#intExpr").value.trim();if(l){var i,o,d;try{i=t.evaluate(e("#intA").value),o=t.evaluate(e("#intB").value),d=parseInt(e("#intN").value)}catch(t){return void(a.innerHTML='<span style="color:#f56c6c">åŒºé—´å‚æ•°é”™è¯¯</span>')}if(isNaN(d)||d<1)a.innerHTML='<span style="color:#f56c6c">n é¡»ä¸ºæ­£æ•´æ•°</span>';else if(d>1e5)a.innerHTML='<span style="color:#f56c6c">n ä¸èƒ½è¶…è¿‡ 100000</span>';else{var p;try{p=t.compile(l)}catch(t){return void(a.innerHTML='<span style="color:#f56c6c">è¡¨è¾¾å¼é”™è¯¯: '+t.message+"</span>")}var f=[[e("#intChkTrap"),"æ¢¯å½¢æ³•",r,null],[e("#intChkS13"),"Simpson 1/3",s,function(t){return t%2!=0?"Simpson 1/3 è¦æ±‚ n ä¸ºå¶æ•°":""}],[e("#intChkS38"),"Simpson 3/8",c,function(t){return t%3!=0?"Simpson 3/8 è¦æ±‚ n ä¸º 3 çš„å€æ•°":""}]],v="",h=[];f.forEach(function(t){if(t[0].checked){if(t[3]){var e=t[3](d);if(e)return void h.push(e)}var n=performance.now(),a=t[2](p,i,o,d),l=t[2](p,i,o,2*d),r=performance.now()-n;v+=u(t[1],a,Math.abs(l-a),r)}}),h.length&&(v='<div style="color:#e6a23c;margin-bottom:8px">âš  '+h.join("ï¼›")+"</div>"+v),v||(v='<span style="color:#e6a23c">è¯·è‡³å°‘é€‰æ‹©ä¸€ç§æ–¹æ³•</span>');var m=[];if(f.forEach(function(t){if(t[0].checked&&(!t[3]||!t[3](d))){var e=t[2](p,i,o,d);m.push({name:t[1],val:e})}}),m.length>1){var b=Math.min.apply(null,m.map(function(t){return t.val})),x=Math.max.apply(null,m.map(function(t){return t.val}));v+='<div style="color:var(--font-color-3);font-size:0.9em;margin-top:4px">æ–¹æ³•é—´æœ€å¤§å·®å¼‚: <code>'+(x-b).toPrecision(4)+"</code></div>"}a.innerHTML=v}}else a.innerHTML='<span style="color:#f56c6c">è¯·è¾“å…¥è¡¨è¾¾å¼</span>'}async function v(){var t=await n(),l=e("#intExpr2").value.trim();if(l){var i,o,r,s,c,f;try{i=t.evaluate(e("#intA2").value),o=t.evaluate(e("#intB2").value),r=t.evaluate(e("#intC2").value),s=t.evaluate(e("#intD2").value),c=parseInt(e("#intNx").value),f=parseInt(e("#intNy").value)}catch(t){return void(a.innerHTML='<span style="color:#f56c6c">å‚æ•°é”™è¯¯</span>')}if(isNaN(c)||isNaN(f)||c<1||f<1)a.innerHTML='<span style="color:#f56c6c">nx, ny é¡»ä¸ºæ­£æ•´æ•°</span>';else if(c>1e5||f>1e5)a.innerHTML='<span style="color:#f56c6c">æ­¥æ•°ä¸èƒ½è¶…è¿‡ 100000</span>';else{var v;try{v=t.compile(l)}catch(t){return void(a.innerHTML='<span style="color:#f56c6c">è¡¨è¾¾å¼é”™è¯¯: '+t.message+"</span>")}var h="",m=[];if(!e("#intChk2Simp").checked||c%2==0&&f%2==0||m.push("2D Simpson è¦æ±‚ nx, ny å‡ä¸ºå¶æ•°"),e("#intChk2Trap").checked){var b=performance.now(),x=d(v,i,o,r,s,c,f),y=d(v,i,o,r,s,2*c,2*f),g=performance.now()-b;h+=u("2D æ¢¯å½¢æ³•",x,Math.abs(y-x),g)}if(e("#intChk2Simp").checked&&c%2==0&&f%2==0){b=performance.now(),x=p(v,i,o,r,s,c,f),y=p(v,i,o,r,s,2*c,2*f),g=performance.now()-b;h+=u("2D Simpson",x,Math.abs(y-x),g)}m.length&&(h='<div style="color:#e6a23c;margin-bottom:8px">âš  '+m.join("ï¼›")+"</div>"+h),h||m.length||(h='<span style="color:#e6a23c">è¯·è‡³å°‘é€‰æ‹©ä¸€ç§æ–¹æ³•</span>');var w=[];if(e("#intChk2Trap").checked&&w.push({name:"2Dæ¢¯å½¢",val:d(v,i,o,r,s,c,f)}),e("#intChk2Simp").checked&&c%2==0&&f%2==0&&w.push({name:"2DSimpson",val:p(v,i,o,r,s,c,f)}),w.length>1){var S=Math.min.apply(null,w.map(function(t){return t.val}));h+='<div style="color:var(--font-color-3);font-size:0.9em;margin-top:4px">æ–¹æ³•é—´æœ€å¤§å·®å¼‚: <code>'+(Math.max.apply(null,w.map(function(t){return t.val}))-S).toPrecision(4)+"</code></div>"}a.innerHTML=h}}else a.innerHTML='<span style="color:#f56c6c">è¯·è¾“å…¥è¡¨è¾¾å¼</span>'}e("#intTab1").onclick=function(){l=1,e("#intP1").style.display="",e("#intP2").style.display="none",e("#intTab1").className="t-btn",e("#intTab1").style.fontWeight="700",e("#intTab2").className="t-btn t-btn-o",e("#intTab2").style.fontWeight="",a.innerHTML=""},e("#intTab2").onclick=function(){l=2,e("#intP1").style.display="none",e("#intP2").style.display="",e("#intTab2").className="t-btn",e("#intTab2").style.fontWeight="700",e("#intTab1").className="t-btn t-btn-o",e("#intTab1").style.fontWeight="",a.innerHTML=""},e("#intPresets").querySelectorAll(".t-btn-o").forEach(function(t){t.onclick=function(){e("#intExpr").value=t.dataset.e,e("#intA").value=t.dataset.a,e("#intB").value=t.dataset.b}}),e("#intPresets2").querySelectorAll(".t-btn-o").forEach(function(t){t.onclick=function(){e("#intExpr2").value=t.dataset.e,e("#intA2").value=t.dataset.a,e("#intB2").value=t.dataset.b,e("#intC2").value=t.dataset.c,e("#intD2").value=t.dataset.d}}),e("#intCalc").onclick=f,e("#intCalc2").onclick=v,t.addEventListener("keydown",function(t){"Enter"===t.key&&(t.preventDefault(),1===l?f():v())})}},{id:"json",name:"JSON æ ¼å¼åŒ–",icon:"ğŸ”§",cat:"dev",desc:"ç¾åŒ– Â· å‹ç¼© Â· æ ‘å½¢æµè§ˆ Â· è¯­æ³•é«˜äº®",html:()=>'<style>.jt-tree{font-family:"Fira Code",monospace;font-size:.82em;line-height:1.8;padding:4px 0}.jt-tree details{margin-left:18px;border-left:1px solid var(--border-warm);padding-left:0}.jt-tree details>div{padding-left:12px}.jt-tree summary{cursor:pointer;list-style:none;position:relative;padding:2px 0 2px 20px;border-radius:var(--radius-xs);transition:background .15s}.jt-tree summary:hover{background:var(--bg-zebra)}.jt-tree summary::-webkit-details-marker{display:none}.jt-tree summary::before{content:"â–¸";position:absolute;left:4px;font-size:13px;color:var(--font-color-2);transition:transform .2s var(--ease-soft)}.jt-tree details[open]>summary::before{transform:rotate(90deg)}.jt-tree .jk{color:var(--accent);font-weight:500}.jt-tree .js{color:var(--series-accent)}.jt-tree .jn{color:var(--accent);font-weight:600}.jt-tree .jb{color:var(--font-color-3);font-style:italic}.jt-tree .jnull{color:var(--font-color-2);font-style:italic}.jt-tree .jbracket{color:var(--font-color-2);font-weight:600}.jt-tree .jcount{color:var(--font-color-3);font-size:.8em;opacity:.7;margin-left:6px;font-weight:400}.jt-tree .jleaf{padding:2px 0 2px 20px}.jt-tree .jclose{padding-left:20px;color:var(--font-color-2);font-weight:600}</style><div class="t-lbl">è¾“å…¥ JSON</div><textarea class="t-ta" id="jsonIn" rows="6">{"name":"å·¥å…·ç®±","tools":31,"nested":{"a":[1,2,3],"deep":{"x":true,"y":null}}}</textarea><div class="t-row" style="margin-top:6px"><button class="t-btn" id="jsonFmt">æ ¼å¼åŒ–</button><button class="t-btn t-btn-o" id="jsonTree">ğŸŒ² æ ‘å½¢</button><button class="t-btn t-btn-o" id="jsonMin">å‹ç¼©</button><button class="t-btn t-btn-o" id="jsonCopy">å¤åˆ¶</button></div><div id="jsonOut" class="t-res" style="max-height:400px"></div>',init(t){const e=t.querySelector("#jsonIn"),n=t.querySelector("#jsonOut");function a(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function l(t,e,n){n=n||0;var i=void 0!==e?'<span class="jk">"'+a(String(e))+'"</span>: ':"";if(null===t)return'<div class="jleaf">'+i+'<span class="jnull">null</span></div>';if("object"!=typeof t)return'<div class="jleaf">'+i+("string"==typeof t?'<span class="js">"'+a(t)+'"</span>':"number"==typeof t?'<span class="jn">'+t+"</span>":'<span class="jb">'+t+"</span>")+"</div>";var o=Array.isArray(t),r=Object.keys(t),s=r.length,c=o?["[","]"]:["{","}"],d="<details"+(n<3?" open":"")+"><summary>"+(i+'<span class="jbracket">'+c[0]+'</span><span class="jcount">'+s+(o?" items":" keys")+"</span>")+"</summary>";return r.forEach(function(e){d+=l(t[o?+e:e],o?+e:e,n+1)}),d+='<div class="jclose">'+c[1]+"</div></details>"}t.querySelector("#jsonFmt").onclick=()=>{try{n.innerHTML='<pre style="margin:0;white-space:pre-wrap;word-break:break-all">'+(a(JSON.stringify(JSON.parse(e.value),null,2)).replace(/("(?:\\.|[^"\\])*")\s*:/g,'<span class="jk">$1</span>:').replace(/:(\s*)("(?:\\.|[^"\\])*")/g,':$1<span class="js">$2</span>').replace(/:\s*(\d+\.?\d*)/g,': <span class="jn">$1</span>').replace(/:\s*(true|false|null)/g,': <span class="jb">$1</span>')+"</pre>")}catch(t){n.textContent="é”™è¯¯: "+t.message}},t.querySelector("#jsonTree").onclick=()=>{try{var t=JSON.parse(e.value);n.innerHTML='<div class="jt-tree">'+l(t)+"</div>"}catch(t){n.textContent="é”™è¯¯: "+t.message}},t.querySelector("#jsonMin").onclick=()=>{try{n.textContent=JSON.stringify(JSON.parse(e.value))}catch(t){n.textContent="é”™è¯¯: "+t.message}},t.querySelector("#jsonCopy").onclick=()=>{navigator.clipboard.writeText(n.textContent),t.querySelector("#jsonCopy").textContent="âœ“",setTimeout(()=>t.querySelector("#jsonCopy").textContent="å¤åˆ¶",1200)}}},{id:"jwt",name:"JWT è§£ç ",icon:"ğŸ«",cat:"dev",desc:"è§£æ Header/Payload Â· æ—¶é—´è½¬æ¢",html:()=>'<div class="t-lbl">ç²˜è´´ JWT</div><textarea class="t-ta" id="jwtIn" rows="3">eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IuW3peWFt-eosSIsImlhdCI6MTUxNjIzOTAyMn0.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c</textarea><button class="t-btn" id="jwtDec" style="margin-top:6px">è§£ç </button><div id="jwtOut" style="margin-top:8px"></div>',init(t){t.querySelector("#jwtDec").onclick=()=>{try{const e=t.querySelector("#jwtIn").value.trim().split(".");if(3!==e.length)throw new Error("JWT åº”æœ‰ 3 æ®µ");function n(t){for(t=t.replace(/-/g,"+").replace(/_/g,"/");t.length%4;)t+="=";for(var e=atob(t),n=new Uint8Array(e.length),a=0;a<e.length;a++)n[a]=e.charCodeAt(a);return(new TextDecoder).decode(n)}function a(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}const l=t=>a(JSON.stringify(JSON.parse(n(t)),null,2));let i=JSON.parse(n(e[1])),o="";if(i.exp&&(o+="\nâ° è¿‡æœŸ: "+new Date(1e3*i.exp).toLocaleString("zh-CN")),i.iat&&(o+="\nğŸ“… ç­¾å‘: "+new Date(1e3*i.iat).toLocaleString("zh-CN")),i.exp){const r=1e3*i.exp-Date.now();o+="\n"+(r>0?"âœ… å‰©ä½™ "+Math.floor(r/36e5)+"h "+Math.floor(r%36e5/6e4)+"m":"âŒ å·²è¿‡æœŸ")}t.querySelector("#jwtOut").innerHTML='<div class="t-lbl">Header</div><pre class="jwt-part jwt-header">'+l(e[0])+'</pre><div class="t-lbl">Payload</div><pre class="jwt-part jwt-payload">'+l(e[1])+(o?"\nâ”€â”€â”€"+o:"")+'</pre><div class="t-lbl">Signature</div><div class="jwt-part jwt-sig">'+e[2]+"</div>"}catch(s){t.querySelector("#jwtOut").innerHTML='<div class="t-res" style="color:#f56c6c">'+s.message+"</div>"}}}},{id:"latex",name:"LaTeX å…¬å¼",icon:"ğŸ“",cat:"academic",desc:"å®æ—¶æ¸²æŸ“ Â· ç¬¦å·é”®ç›˜ Â· ä¸‹è½½ SVG/PNG",html:()=>'<div class="t-lbl">LaTeX è¾“å…¥</div><textarea class="t-ta" id="latexIn" rows="3">E = mc^2</textarea><div class="pk" id="latexKb" style="margin:4px 0"></div><div class="t-lbl" style="margin-top:6px">æ¸²æŸ“ç»“æœ</div><div id="latexOut" class="t-res" style="text-align:center;font-size:1.2em;min-height:50px"></div><div class="t-row" style="justify-content:center;margin-top:6px"><button class="t-btn" id="latexDlSvg" style="font-size:.72em">â¬‡ ä¸‹è½½ SVG</button><button class="t-btn t-btn-o" id="latexDlPng" style="font-size:.72em">â¬‡ ä¸‹è½½ PNG</button></div><details style="margin-top:6px;font-size:.72em;color:#999"><summary style="cursor:pointer">ğŸ“– å¸¸ç”¨è¯­æ³•å‚è€ƒ</summary><div style="columns:2;column-gap:12px;margin-top:4px;line-height:1.8"><code>\\frac{a}{b}</code> åˆ†æ•°<br><code>\\sqrt{x}</code> å¹³æ–¹æ ¹<br><code>\\sqrt[n]{x}</code> næ¬¡æ ¹<br><code>x^{2}</code> ä¸Šæ ‡<br><code>x_{i}</code> ä¸‹æ ‡<br><code>\\sum_{i=0}^{n}</code> æ±‚å’Œ<br><code>\\prod_{i=1}^{n}</code> è¿ä¹˜<br><code>\\int_a^b</code> ç§¯åˆ†<br><code>\\lim_{x\\to 0}</code> æé™<br><code>\\vec{a}</code> å‘é‡<br><code>\\hat{a}</code> å¸½å­<br><code>\\dot{x}</code> ç‚¹<br><code>\\bar{x}</code> æ¨ªçº¿<br><code>\\partial</code> åå¯¼<br><code>\\nabla</code> æ¢¯åº¦<br><code>\\begin{pmatrix}a&b\\\\c&d\\end{pmatrix}</code> çŸ©é˜µ<br><code>\\begin{cases}...\\end{cases}</code> åˆ†æ®µ<br><code>\\left(\\right)</code> è‡ªé€‚åº”æ‹¬å·<br></div></details>',async init(t){await a();var n=t.querySelector("#latexIn"),l=t.querySelector("#latexOut");function i(){try{katex.render(n.value,l,{displayMode:!0,throwOnError:!1})}catch(t){l.textContent=t.message}}n.oninput=i,i();var o=t.querySelector("#latexKb");if(!document.getElementById("pkCSS")){var r=document.createElement("style");r.id="pkCSS",r.textContent=".pk{display:flex;flex-wrap:wrap;gap:3px;justify-content:center}.pk button{background:#f5f7fa;border:1px solid #e4e7ed;border-radius:4px;padding:2px 6px;cursor:pointer;font-size:.7em;font-family:inherit;transition:.15s;color:#606266}.pk button:hover{border-color:#409eff;color:#409eff;background:#ecf5ff}",document.head.appendChild(r)}[["\\frac{}{}","\\frac{a}{b}"],["\\sqrt{}","\\sqrt{x}"],["\\sqrt[n]{}","\\sqrt[n]{x}"],["^{}","x^{n}"],["_{}","x_{i}"],["\\sum_{}^{}","\\sum"],["\\prod_{}^{}","\\prod"],["\\int_{}^{}","\\int"],["\\lim_{}","\\lim"],["\\to","\\to"],["\\infty","\\infty"],["\\alpha","\\alpha"],["\\beta","\\beta"],["\\gamma","\\gamma"],["\\delta","\\delta"],["\\theta","\\theta"],["\\lambda","\\lambda"],["\\mu","\\mu"],["\\pi","\\pi"],["\\sigma","\\sigma"],["\\omega","\\omega"],["\\phi","\\phi"],["\\psi","\\psi"],["\\partial","\\partial"],["\\nabla","\\nabla"],["\\vec{}","\\vec"],["\\hat{}","\\hat"],["\\dot{}","\\dot"],["\\bar{}","\\bar"],["\\cdot","\\cdot"],["\\times","\\times"],["\\div","\\div"],["\\pm","\\pm"],["\\leq","\\leq"],["\\geq","\\geq"],["\\neq","\\neq"],["\\approx","\\approx"],["\\equiv","\\equiv"],["\\in","\\in"],["\\subset","\\subset"],["\\cup","\\cup"],["\\cap","\\cap"],["\\forall","\\forall"],["\\exists","\\exists"],["\\left(\\right)","( )"],["\\left[\\right]","[ ]"],["\\left\\{\\right\\}","\\{ \\}"],["\\begin{pmatrix}\\end{pmatrix}","matrix"],["\\begin{cases}\\end{cases}","cases"],["\\text{}","text"],["\\mathbf{}","bf"],["\\mathrm{}","rm"]].forEach(function(t){var e=t[0],a=t[1],l=document.createElement("button");l.textContent=a,l.title=e,l.onclick=function(){var t=n.selectionStart||0,a=n.selectionEnd||0;n.value=n.value.substring(0,t)+e+n.value.substring(a),n.focus();var l=e.indexOf("{}"),o=l>=0?t+l+1:t+e.length;n.setSelectionRange(o,o),i()},o.appendChild(l)}),t.querySelector("#latexDlSvg").onclick=function(){var t=l.innerHTML;if(t){for(var e=l.getBoundingClientRect(),n=Math.ceil(e.width)+40,a=Math.ceil(e.height)+40,i="",o=document.querySelectorAll('link[rel="stylesheet"]'),r=0;r<o.length;r++)o[r].href.indexOf("katex")>=0&&(i+='@import url("'+o[r].href+'");\n');var s=new Blob(['<svg xmlns="http://www.w3.org/2000/svg" width="'+n+'" height="'+a+'"><foreignObject width="100%" height="100%"><div xmlns="http://www.w3.org/1999/xhtml" style="display:flex;align-items:center;justify-content:center;width:100%;height:100%"><style>'+i+"</style>"+t+"</div></foreignObject></svg>"],{type:"image/svg+xml"}),c=document.createElement("a");c.href=URL.createObjectURL(s),c.download="formula.svg",c.click(),setTimeout(function(){URL.revokeObjectURL(c.href)},3e3)}},t.querySelector("#latexDlPng").onclick=function(){var n=t.querySelector("#latexDlPng");n.textContent="â³ ç”Ÿæˆä¸­â€¦",n.disabled=!0;var a=l.style.background;l.style.background="transparent",e("https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js").then(function(){return html2canvas(l,{backgroundColor:null,scale:3})}).then(function(t){l.style.background=a,t.toBlob(function(t){var e=document.createElement("a");e.href=URL.createObjectURL(t),e.download="formula.png",e.click(),setTimeout(function(){URL.revokeObjectURL(e.href)},3e3),n.textContent="â¬‡ ä¸‹è½½ PNG",n.disabled=!1})}).catch(function(){l.style.background=a,n.textContent="â¬‡ ä¸‹è½½ PNG",n.disabled=!1})}}},{id:"life",name:"ç”Ÿå‘½æ¸¸æˆ",icon:"ğŸ¦ ",cat:"fun",desc:"Conway ç”Ÿå‘½æ¸¸æˆ Â· ç»å…¸é¢„è®¾ Â· é€Ÿåº¦å¯è°ƒ",html:function(){return'<div class="t-row" style="flex-wrap:wrap"><label class="t-lbl">é¢„è®¾</label><select class="t-sel" id="lifPreset"><option value="">ç©ºç™½</option><option value="glider">æ»‘ç¿”æœº Glider</option><option value="blinker">é—ªçƒå™¨ Blinker</option><option value="pulsar">è„‰å†²æ˜Ÿ Pulsar</option><option value="rpent">R-äº”è”éª¨ç‰Œ</option><option value="lwss">è½»å‹é£èˆ¹ LWSS</option><option value="gosper">Gosper æ»‘ç¿”æœºæª</option><option value="random">éšæœº 25%</option></select><label class="t-lbl" style="margin-left:8px">é€Ÿåº¦</label><input class="t-in" id="lifSpeed" type="range" min="1" max="30" value="10" style="width:100px"><span class="t-lbl" id="lifSpeedVal">10 ä»£/s</span></div><div class="t-row" style="gap:6px;flex-wrap:wrap"><button class="t-btn t-btn-o" id="lifStep">å•æ­¥</button><button class="t-btn" id="lifPlay">â–¶ æ’­æ”¾</button><button class="t-btn t-btn-o" id="lifClear">æ¸…ç©º</button><span class="t-lbl" id="lifGen" style="margin-left:auto">ä»£: 0 Â· å­˜æ´»: 0</span></div><canvas id="lifCv" class="t-cv" style="width:100%;max-width:640px;margin:6px auto;display:block;cursor:crosshair;image-rendering:pixelated;max-height:calc(88vh - 220px)"></canvas>'},init:function(t){var e=80,n=60,a=t.querySelector("#lifCv");a.style.maxWidth="640px";var l=a.clientWidth||Math.min(640,t.clientWidth-4),i=l/640,o=Math.round(480*i),r=t.clientHeight,s=r>100?Math.max(150,r-100):Math.max(150,Math.round(.45*window.innerHeight));o>s&&(i=(o=s)/480,l=Math.round(640*i));var c=a.getContext("2d"),d=window.devicePixelRatio||1;a.width=l*d,a.height=o*d,a.style.height=o+"px",c.scale(d,d);var p=getComputedStyle(document.documentElement),u=p.getPropertyValue("--accent").trim()||"#5B8BA4",f=p.getPropertyValue("--bg-paper").trim()||"#FCFCFD",v=p.getPropertyValue("--border-warm").trim()||"#DCE1E7",h=[],m=[],b=0,x=0,y=!1,g=null,w=10,S=!1,k=1,M=t.querySelector("#lifPreset"),T=t.querySelector("#lifSpeed"),C=t.querySelector("#lifSpeedVal"),q=t.querySelector("#lifStep"),P=t.querySelector("#lifPlay"),E=t.querySelector("#lifClear"),L=t.querySelector("#lifGen");function F(){for(var t=[],a=0;a<n;a++){t[a]=[];for(var l=0;l<e;l++)t[a][l]=0}return t}function A(){h=F(),m=F(),b=0,x=0,R()}function R(){L.textContent="ä»£: "+b+" Â· å­˜æ´»: "+x}function N(){for(var t=0,a=0;a<n;a++)for(var l=0;l<e;l++)h[a][l]&&t++;return t}var H={glider:[[0,1],[1,2],[2,0],[2,1],[2,2]],blinker:[[0,0],[0,1],[0,2]],lwss:[[0,1],[0,4],[1,0],[2,0],[2,4],[3,0],[3,1],[3,2],[3,3]],rpent:[[0,1],[0,2],[1,0],[1,1],[2,1]],pulsar:[[0,2],[0,3],[0,4],[0,8],[0,9],[0,10],[2,0],[2,5],[2,7],[2,12],[3,0],[3,5],[3,7],[3,12],[4,0],[4,5],[4,7],[4,12],[5,2],[5,3],[5,4],[5,8],[5,9],[5,10],[7,2],[7,3],[7,4],[7,8],[7,9],[7,10],[8,0],[8,5],[8,7],[8,12],[9,0],[9,5],[9,7],[9,12],[10,0],[10,5],[10,7],[10,12],[12,2],[12,3],[12,4],[12,8],[12,9],[12,10]],gosper:[[0,24],[1,22],[1,24],[2,12],[2,13],[2,20],[2,21],[2,34],[2,35],[3,11],[3,15],[3,20],[3,21],[3,34],[3,35],[4,0],[4,1],[4,10],[4,16],[4,20],[4,21],[5,0],[5,1],[5,10],[5,14],[5,16],[5,17],[5,22],[5,24],[6,10],[6,16],[6,24],[7,11],[7,15],[8,12],[8,13]]};function z(){for(var t=0;t<n;t++)for(var a=0;a<e;a++){for(var l=0,i=-1;i<=1;i++)for(var o=-1;o<=1;o++)if(0!==i||0!==o){var r=(a+o+e)%e;l+=h[(t+i+n)%n][r]}h[t][a]?m[t][a]=2===l||3===l?1:0:m[t][a]=3===l?1:0}var s=h;h=m,m=s,b++,x=N(),R()}function j(){c.fillStyle=f,c.fillRect(0,0,l,o),c.strokeStyle=v,c.lineWidth=.5;for(var t=0;t<=n;t++)c.beginPath(),c.moveTo(0,8*t),c.lineTo(l,8*t),c.stroke();for(var a=0;a<=e;a++)c.beginPath(),c.moveTo(8*a,0),c.lineTo(8*a,o),c.stroke();c.fillStyle=u;for(t=0;t<n;t++)for(a=0;a<e;a++)h[t][a]&&c.fillRect(8*a+.5,8*t+.5,7,7)}function D(){y=!1,P.textContent="â–¶ æ’­æ”¾",g&&(clearTimeout(g),g=null)}function B(){y&&(z(),j(),g=setTimeout(B,1e3/w))}function I(t){var e,n,i=a.getBoundingClientRect(),r=l/i.width,s=o/i.height;t.touches?(e=t.touches[0].clientX,n=t.touches[0].clientY):(e=t.clientX,n=t.clientY);var c=(e-i.left)*r,d=(n-i.top)*s;return{r:Math.floor(d/8),c:Math.floor(c/8)}}function O(t){var a=I(t);a.r<0||a.r>=n||a.c<0||a.c>=e||(h[a.r][a.c]=k,x=N(),R(),j())}a.addEventListener("mousedown",function(t){var a=I(t);a.r<0||a.r>=n||a.c<0||a.c>=e||(k=h[a.r][a.c]?0:1,S=!0,O(t))}),a.addEventListener("mousemove",function(t){S&&O(t)}),a.addEventListener("mouseup",function(){S=!1}),a.addEventListener("mouseleave",function(){S=!1}),a.addEventListener("touchstart",function(t){t.preventDefault();var a=I(t);a.r>=0&&a.r<n&&a.c>=0&&a.c<e&&(k=h[a.r][a.c]?0:1,S=!0,O(t))},{passive:!1}),a.addEventListener("touchmove",function(t){t.preventDefault(),S&&O(t)},{passive:!1}),a.addEventListener("touchend",function(t){t.preventDefault(),S=!1},{passive:!1}),M.onchange=function(){D(),M.value?function(t){if(A(),"random"===t){for(var a=0;a<n;a++)for(var l=0;l<e;l++)h[a][l]=Math.random()<.25?1:0;return x=N(),R(),void j()}var i=H[t];if(i){var o=Math.floor(30)-6,r=Math.floor(40)-6;"gosper"===t&&(o=Math.floor(30)-5,r=4);for(var s=0;s<i.length;s++)a=i[s][0]+o,l=i[s][1]+r,a>=0&&a<n&&l>=0&&l<e&&(h[a][l]=1);x=N(),R(),j()}else j()}(M.value):(A(),j())},T.oninput=function(){w=parseInt(T.value)||10,C.textContent=w+" ä»£/s"},q.onclick=function(){D(),z(),j()},P.onclick=function(){y?D():y||(y=!0,P.textContent="â¸ æš‚åœ",B())},E.onclick=function(){D(),M.value="",A(),j()},A(),j(),t._cleanup=function(){D()}}},{id:"markdown",name:"Markdown é¢„è§ˆ",icon:"âœï¸",cat:"dev",desc:"GFM Â· è¡¨æ ¼ Â· ä»»åŠ¡åˆ—è¡¨ Â· è„šæ³¨ Â· è¯­æ³•é«˜äº®",html:()=>'<style>.md-prev{flex:1;overflow:auto;padding:16px 20px;background:#fff;border-radius:8px;border:1px solid #ddd;min-height:260px;font-size:.9em;line-height:1.75;color:#333;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif}.md-prev h1{font-size:1.6em;border-bottom:2px solid #eaecef;padding-bottom:.3em;margin:1.2em 0 .6em}.md-prev h2{font-size:1.35em;border-bottom:1px solid #eaecef;padding-bottom:.25em;margin:1em 0 .5em}.md-prev h3{font-size:1.15em;margin:.9em 0 .4em}.md-prev h4{font-size:1em;margin:.8em 0 .3em}.md-prev blockquote{margin:.8em 0;padding:.6em 1em;border-left:4px solid #42b983;background:#f8f8f8;color:#555;border-radius:0 4px 4px 0}.md-prev pre{background:#282c34;color:#abb2bf;padding:14px 16px;border-radius:6px;overflow-x:auto;font-size:.85em;line-height:1.5;margin:.8em 0}.md-prev code{background:#f0f0f0;padding:2px 5px;border-radius:3px;font-size:.88em;color:#e96900}.md-prev pre code{background:none;padding:0;color:inherit;font-size:inherit}.md-prev table{border-collapse:collapse;width:100%;margin:.8em 0}.md-prev th,.md-prev td{border:1px solid #dfe2e5;padding:8px 12px;text-align:left}.md-prev th{background:#f6f8fa;font-weight:600}.md-prev tr:nth-child(2n){background:#fafbfc}.md-prev img{max-width:100%;border-radius:4px}.md-prev a{color:#42b983;text-decoration:none}.md-prev a:hover{text-decoration:underline}.md-prev hr{border:none;border-top:2px solid #eaecef;margin:1.5em 0}.md-prev ul,.md-prev ol{padding-left:1.8em}.md-prev li{margin:.25em 0}.md-prev .task-list-item{list-style:none;margin-left:-1.5em}.md-prev .task-list-item input{margin-right:.4em;vertical-align:middle}.md-prev mark{background:#fff3bf;padding:1px 4px;border-radius:2px}.md-prev sup{font-size:.75em}.md-prev .footnotes-sep{margin-top:2em}.md-prev .footnotes{font-size:.85em;color:#666}.md-prev del{color:#999}</style><div class="t-row" style="gap:6px;margin-bottom:6px;flex-wrap:wrap;justify-content:center"><button class="t-btn t-btn-d" id="mdCopy" style="font-size:.75em">ğŸ“‹ å¤åˆ¶ HTML</button><button class="t-btn t-btn-d" id="mdClear" style="font-size:.75em">ğŸ—‘ï¸ æ¸…ç©º</button><span id="mdStatus" style="font-size:.72em;color:#888"></span></div><div class="t-split" style="height:440px;max-height:80vh"><div style="display:flex;flex-direction:column"><div class="t-lbl">Markdown æºç </div><textarea class="t-ta" id="mdIn" style="flex:1;min-height:220px;resize:none;font-family:Cascadia Code,Fira Code,Consolas,monospace;font-size:.85em;line-height:1.5;tab-size:4"></textarea></div><div style="display:flex;flex-direction:column"><div class="t-lbl">å®æ—¶é¢„è§ˆ</div><div id="mdOut" class="md-prev"></div></div></div>',async init(t){t.querySelector("#mdIn").value='# Markdown é¢„è§ˆå™¨\n\n## åŸºæœ¬è¯­æ³•\n\n**åŠ ç²—** *æ–œä½“* ~~åˆ é™¤çº¿~~ `è¡Œå†…ä»£ç ` ==é«˜äº®==\n\n> å¼•ç”¨æ–‡æœ¬ï¼Œæ”¯æŒåµŒå¥—\n> > äºŒå±‚å¼•ç”¨\n\n---\n\n## åˆ—è¡¨\n\n- æ— åºåˆ—è¡¨\n  - åµŒå¥—é¡¹\n- [x] å·²å®Œæˆä»»åŠ¡\n- [ ] æœªå®Œæˆä»»åŠ¡\n\n1. æœ‰åºåˆ—è¡¨\n2. ç¬¬äºŒé¡¹\n\n## è¡¨æ ¼\n\n| è¯­æ³• | æè¿° | ç¤ºä¾‹ |\n|:-----|:----:|-----:|\n| åŠ ç²— | ä¸¤ä¸ªæ˜Ÿå· | **æ–‡å­—** |\n| æ–œä½“ | ä¸€ä¸ªæ˜Ÿå· | *æ–‡å­—* |\n| ä»£ç  | åå¼•å· | `code` |\n\n## ä»£ç å—\n\n```javascript\nfunction hello(name) {\n  console.log("Hello, " + name + "!");\n  return { greeting: true };\n}\n```\n\n## é“¾æ¥ä¸è„šæ³¨\n\n[GitHub](https://github.com) Â· è„šæ³¨ç¤ºä¾‹[^1]\n\n[^1]: è¿™æ˜¯ä¸€æ¡è„šæ³¨è¯´æ˜ã€‚';var n=t.querySelector("#mdOut"),a=t.querySelector("#mdStatus");function l(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/^#### (.+)$/gm,"<h4>$1</h4>").replace(/^### (.+)$/gm,"<h3>$1</h3>").replace(/^## (.+)$/gm,"<h2>$1</h2>").replace(/^# (.+)$/gm,"<h1>$1</h1>").replace(/\*\*(.+?)\*\*/g,"<strong>$1</strong>").replace(/\*(.+?)\*/g,"<em>$1</em>").replace(/~~(.+?)~~/g,"<del>$1</del>").replace(/`([^`]+)`/g,"<code>$1</code>").replace(/==(.+?)==/g,"<mark>$1</mark>").replace(/^> (.+)$/gm,"<blockquote>$1</blockquote>").replace(/^- \[x\] (.+)$/gm,'<li class="task-list-item"><input type="checkbox" checked disabled> $1</li>').replace(/^- \[ \] (.+)$/gm,'<li class="task-list-item"><input type="checkbox" disabled> $1</li>').replace(/^- (.+)$/gm,"<li>$1</li>").replace(/^---$/gm,"<hr>").replace(/\n{2,}/g,"<br><br>").replace(/\n/g,"<br>")}n.innerHTML='<span style="color:#999">æ­£åœ¨åŠ è½½ markdown-it ...</span>';for(var i=null,o=["https://cdn.jsdelivr.net/npm/markdown-it@14.1.0/dist/markdown-it.min.js","https://cdnjs.cloudflare.com/ajax/libs/markdown-it/14.1.0/markdown-it.min.js","https://unpkg.com/markdown-it@14.1.0/dist/markdown-it.min.js"],r=!1,s=0;s<o.length;s++)try{await e(o[s]),r=!0;break}catch(t){continue}if(r&&"undefined"!=typeof markdownit){i=markdownit({html:!0,linkify:!0,typographer:!0,breaks:!0});try{await e("https://cdn.jsdelivr.net/npm/markdown-it-footnote@4.0.0/dist/markdown-it-footnote.min.js"),i.use(markdownitFootnote)}catch(t){}try{await e("https://cdn.jsdelivr.net/npm/markdown-it-task-lists@2.1.1/dist/markdown-it-task-lists.min.js"),i.use(markdownitTaskLists)}catch(t){}try{await e("https://cdn.jsdelivr.net/npm/markdown-it-mark@2.0.0/dist/markdown-it-mark.min.js"),i.use(markdownitMark)}catch(t){}a.textContent="âœ… markdown-it 14.1 å·²åŠ è½½"}else a.textContent="âš ï¸ CDN ä¸å¯ç”¨ï¼Œä½¿ç”¨å†…ç½®è§£æå™¨";var c=t.querySelector("#mdIn");c.addEventListener("keydown",function(t){if("Tab"===t.key){t.preventDefault();var e=c.selectionStart,n=c.selectionEnd;c.value=c.value.substring(0,e)+"    "+c.value.substring(n),c.selectionStart=c.selectionEnd=e+4,c.dispatchEvent(new Event("input"))}});var d=function(){try{n.innerHTML=i?i.render(c.value):l(c.value)}catch(t){n.innerHTML=l(c.value)}};c.oninput=d,d(),t.querySelector("#mdCopy").onclick=function(){var e=n.innerHTML;navigator.clipboard.writeText(e).then(function(){t.querySelector("#mdCopy").textContent="âœ“ å·²å¤åˆ¶",setTimeout(function(){t.querySelector("#mdCopy").textContent="ğŸ“‹ å¤åˆ¶ HTML"},1500)})},t.querySelector("#mdClear").onclick=function(){c.value="",d()}}},{id:"matrix",name:"çŸ©é˜µè®¡ç®—",icon:"ğŸ”¢",cat:"academic",desc:"å¤æ•° Â· è¡Œåˆ—å¼ Â· é€† Â· ç‰¹å¾å€¼ Â· KaTeX",html:()=>'<div class="t-split"><div><div class="t-lbl">çŸ©é˜µ Aï¼ˆé€—å·åˆ†éš”ï¼Œæ¢è¡Œåˆ†è¡Œï¼Œå¤æ•°å¦‚ 3+2iï¼‰</div><textarea class="t-ta" id="matA" rows="3">1+i, 2\n3, 4-i</textarea></div><div><div class="t-lbl">çŸ©é˜µ B</div><textarea class="t-ta" id="matB" rows="3">5, 6i\n7, 8</textarea></div></div><div class="t-row" style="margin-top:6px;flex-wrap:wrap"><button class="t-btn" data-op="det">det(A)</button><button class="t-btn" data-op="inv">Aâ»Â¹</button><button class="t-btn" data-op="mul">A Ã— B</button><button class="t-btn" data-op="trans">Aáµ€</button><button class="t-btn t-btn-o" data-op="conj">A*ï¼ˆå…±è½­è½¬ç½®ï¼‰</button><button class="t-btn t-btn-o" data-op="trace">tr(A)</button><button class="t-btn t-btn-o" data-op="rank">rank(A)</button><button class="t-btn t-btn-o" data-op="add">A + B</button><button class="t-btn t-btn-o" data-op="scale">kA</button><button class="t-btn t-btn-o" data-op="eigen">ç‰¹å¾å€¼</button></div><div class="t-row"><span class="t-lbl">æ ‡é‡ k =</span><input class="t-in" id="matK" value="2" style="width:60px"></div><div id="matRes" style="max-height:280px;overflow:auto;padding:12px;background:#fafafa;border-radius:8px;border:1px solid #eee;line-height:1.8"></div>',async init(t){function e(t,e){return[t||0,e||0]}function n(t,e){return[t[0]+e[0],t[1]+e[1]]}function o(t,e){return[t[0]-e[0],t[1]-e[1]]}function r(t,e){return[t[0]*e[0]-t[1]*e[1],t[0]*e[1]+t[1]*e[0]]}function s(t,e){var n=e[0]*e[0]+e[1]*e[1];if(0===n)throw new Error("é™¤ä»¥é›¶");return[(t[0]*e[0]+t[1]*e[1])/n,(t[1]*e[0]-t[0]*e[1])/n]}function c(t){return[-t[0],-t[1]]}function d(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function p(t){var e=+t[0].toFixed(4),n=+t[1].toFixed(4);return 0===n?String(e):0===e?1===n?"i":-1===n?"-i":n+"i":e+(n>0?"+":"")+n+"i"}function u(t){for(var e="\\begin{pmatrix}",n=0;n<t.length;n++){for(var a=0;a<t[n].length;a++)e+=p(t[n][a]),a<t[n].length-1&&(e+=" & ");n<t.length-1&&(e+="\\\\")}return e+="\\end{pmatrix}"}function f(t){var n=t.trim().split("\n").map(function(t){return t.split(",").map(function(t){return function(t){if(!(t=t.trim()))return e(0,0);if((t=t.replace(/\s/g,"")).match(/^[+-]?\d*\.?\d+$/))return e(+t,0);if(t.match(/^[+-]?\d*\.?\d*i$/)){var n=t.replace("i","");return e(0,""===n||"+"===n?1:"-"===n?-1:+n)}var a=t.match(/^([+-]?\d*\.?\d+)([+-]\d*\.?\d*)i$/);if(a){var l=+a[1],i=a[2];return e(l,"+"===i?1:"-"===i?-1:+i)}throw new Error("æ— æ³•è§£æ: "+t)}(t)})}),a=n[0].length;return n.forEach(function(t,e){if(t.length!==a)throw new Error("ç¬¬"+(e+1)+"è¡Œåˆ—æ•°ä¸ä¸€è‡´")}),n}function v(t){return t.length===t[0].length}function h(t){if(!v(t))throw new Error("è¡Œåˆ—å¼è¦æ±‚æ–¹é˜µ");var a=t.length;if(1===a)return t[0][0];if(2===a)return o(r(t[0][0],t[1][1]),r(t[0][1],t[1][0]));for(var l=e(0,0),i=0;i<a;i++){var s=t.slice(1).map(function(t){return t.slice(0,i).concat(t.slice(i+1))}),c=r(t[0][i],h(s));l=i%2==0?n(l,c):o(l,c)}return l}function m(t){if(2!==t.length)throw new Error("ç‰¹å¾å€¼ä»…æ”¯æŒ 2Ã—2");var a,l,i,c=n(t[0][0],t[1][1]),d=h(t),p=o(r(c,c),r(e(4,0),d)),u=(a=p,l=Math.sqrt(a[0]*a[0]+a[1]*a[1]),i=Math.atan2(a[1],a[0]),[Math.sqrt(l)*Math.cos(i/2),Math.sqrt(l)*Math.sin(i/2)]);return[s(n(c,u),e(2,0)),s(o(c,u),e(2,0))]}await a();var b=t.querySelector("#matRes");t.querySelectorAll("[data-op]").forEach(function(a){a.onclick=function(){try{var x=f(t.querySelector("#matA").value),y="",g=u(x);switch(a.dataset.op){case"det":y+=i("\\det"+g+" = "+p(h(x)));break;case"inv":var w=function(t){if(!v(t))throw new Error("æ±‚é€†è¦æ±‚æ–¹é˜µ");var e=t.length,n=h(t);if(d(n)<1e-10)throw new Error("çŸ©é˜µå¥‡å¼‚ï¼Œä¸å¯é€†");if(2===e)return[[s(t[1][1],n),s(c(t[0][1]),n)],[s(c(t[1][0]),n),s(t[0][0],n)]];for(var a=[],l=0;l<e;l++){a[l]=[];for(var i=0;i<e;i++){var o=t.filter(function(t,e){return e!==l}).map(function(t){return t.filter(function(t,e){return e!==i})});a[l][i]=s((l+i)%2==0?h(o):c(h(o)),n)}}return a[0].map(function(t,e){return a.map(function(t){return t[e]})})}(x);y+=i(g+"^{-1} = "+u(w));break;case"mul":y+=i(g+"\\times"+u(M=f(t.querySelector("#matB").value))+" = "+u(function(t,a){if(t[0].length!==a.length)throw new Error("Aåˆ—æ•° â‰  Bè¡Œæ•°");for(var l=[],i=0;i<t.length;i++){l[i]=[];for(var o=0;o<a[0].length;o++){for(var s=e(0,0),c=0;c<a.length;c++)s=n(s,r(t[i][c],a[c][o]));l[i][o]=s}}return l}(x,M)));break;case"trans":y+=i(g+"^{\\mathsf{T}} = "+u(x[0].map(function(t,e){return x.map(function(t){return t[e]})})));break;case"conj":y+=i(g+"^{\\dagger} = "+u(x[0].map(function(t,e){return x.map(function(t){return function(t){return[t[0],-t[1]]}(t[e])})})));break;case"trace":if(!v(x))throw new Error("è¿¹è¦æ±‚æ–¹é˜µ");for(var S=e(0,0),k=0;k<x.length;k++)S=n(S,x[k][k]);y+=i("\\text{tr}"+g+" = "+p(S));break;case"rank":y+=i("\\text{rank}"+g+" = "+function(t){for(var e=t.map(function(t){return t.map(function(t){return t.slice()})}),n=e.length,a=e[0].length,l=0,i=0;i<a&&l<n;i++){for(var c=-1,p=l;p<n;p++)if(d(e[p][i])>1e-10){c=p;break}if(-1!==c){var u=e[l];e[l]=e[c],e[c]=u;for(var f=e[l][i],v=i;v<a;v++)e[l][v]=s(e[l][v],f);for(p=0;p<n;p++)if(p!==l){var h=e[p][i];for(v=i;v<a;v++)e[p][v]=o(e[p][v],r(h,e[l][v]))}l++}}return l}(x));break;case"add":var M;y+=i(g+"+"+u(M=f(t.querySelector("#matB").value))+" = "+u(function(t,e){if(t.length!==e.length||t[0].length!==e[0].length)throw new Error("çŸ©é˜µå°ºå¯¸ä¸ä¸€è‡´");return t.map(function(t,a){return t.map(function(t,l){return n(t,e[a][l])})})}(x,M)));break;case"scale":var T=+t.querySelector("#matK").value,C=x.map(function(t){return t.map(function(t){return r(e(T,0),t)})});y+=i(T+"\\cdot"+g+" = "+u(C));break;case"eigen":if(!v(x))throw new Error("ç‰¹å¾å€¼è¦æ±‚æ–¹é˜µ");if(2===x.length){var q=m(x);y+="<strong>ç‰¹å¾æ–¹ç¨‹</strong> "+i("\\det(A-\\lambda I)=0"),y+=i("\\lambda_1="+p(q[0])),y+=i("\\lambda_2="+p(q[1]))}else if(1===x.length)y+=i("\\lambda="+p(x[0][0]));else{y+='<div style="color:#e6a23c">âš  ç‰¹å¾å€¼è®¡ç®—ä»…æ”¯æŒ 1Ã—1 å’Œ 2Ã—2ã€‚</div>';for(S=e(0,0),k=0;k<x.length;k++)S=n(S,x[k][k]);y+=l("\\text{tr}(A)=\\sum\\lambda_i="+p(S))+" &nbsp; "+l("\\det(A)=\\prod\\lambda_i="+p(h(x)))}}b.innerHTML=y}catch(t){b.innerHTML='<span style="color:#f56c6c">âš  '+t.message+"</span>"}}})}},{id:"metronome",name:"èŠ‚æ‹å™¨",icon:"ğŸ¥",cat:"music",desc:"å¯è°ƒèŠ‚æ‹ Â· å¤šç§æ‹å·",html:()=>'<div style="text-align:center"><div id="metBpm" style="font-size:3em;font-weight:700;color:#409eff;margin:12px 0">120</div><div style="color:#888;margin-bottom:8px">BPM</div><div class="t-row" style="justify-content:center"><span class="t-lbl">40</span><input type="range" id="metSpeed" min="40" max="240" value="120" style="width:200px"><span class="t-lbl">240</span></div><div class="t-row" style="justify-content:center;margin-top:8px"><select class="t-sel" id="metSig"><option value="4">4/4</option><option value="3">3/4</option><option value="2">2/4</option><option value="6">6/8</option></select></div><div id="metDots" style="margin:16px 0;display:flex;gap:10px;justify-content:center"></div><button class="t-btn" id="metToggle" style="width:120px;height:48px;border-radius:24px;font-size:1.1em">â–¶ å¼€å§‹</button></div>',init(t){let e=!1,n=null,a=0,l=null;const i=()=>+t.querySelector("#metSig").value;function o(){const e=t.querySelector("#metDots");e.innerHTML="";for(let t=0;t<i();t++){const t=document.createElement("span");t.className="metro-circle",e.appendChild(t)}}function r(){l||(l=new(window.AudioContext||window.webkitAudioContext));const e=t.querySelectorAll(".metro-circle");e.forEach(t=>t.classList.remove("beat","accent"));const n=e[a%i()];n&&n.classList.add(a%i()===0?"accent":"beat");const o=l.createOscillator(),r=l.createGain();o.connect(r),r.connect(l.destination),o.frequency.value=a%i()===0?880:660,r.gain.setValueAtTime(.3,l.currentTime),r.gain.exponentialRampToValueAtTime(.001,l.currentTime+.08),o.start(l.currentTime),o.stop(l.currentTime+.08),a++}o(),t.querySelector("#metSig").onchange=()=>{o(),a=0},t.querySelector("#metSpeed").oninput=function(){t.querySelector("#metBpm").textContent=this.value},t.querySelector("#metToggle").onclick=function(){e?(e=!1,clearInterval(n),this.textContent="â–¶ å¼€å§‹",this.classList.remove("t-btn-d"),this.classList.add("t-btn")):(e=!0,a=0,r(),n=setInterval(r,6e4/+t.querySelector("#metSpeed").value),this.textContent="â¸ åœæ­¢",this.classList.add("t-btn-d"))},t.querySelector("#metSpeed").addEventListener("input",()=>{e&&(clearInterval(n),n=setInterval(r,6e4/+t.querySelector("#metSpeed").value))}),t._cleanup=()=>{if(clearInterval(n),l)try{l.close()}catch(t){}}}},{id:"montecarlo",name:"Monte Carlo",icon:"ğŸ²",cat:"academic",desc:"MCç§¯åˆ† Â· ä¼°ç®—Ï€ Â· èˆé€‰æ³• Â· MCMC Â· éšæœºæ¸¸èµ° Â· Isingæ¨¡å‹",html:()=>'<div class="t-row" id="mcTabs" style="flex-wrap:wrap"></div><div id="mcP0"><div class="t-res" style="font-size:.78em;margin-bottom:10px;padding:8px 12px;background:var(--bg-zebra)">ç”¨ N ä¸ªéšæœºç‚¹ä¼°è®¡å®šç§¯åˆ† <b>âˆ«<sub>a</sub><sup>b</sup>f(x)dx</b>ã€‚ä¸Šå›¾: é‡‡æ ·ç‚¹ä¸å‡½æ•°æ›²çº¿ï¼›ä¸‹å›¾: ä¼°è®¡å€¼éš N æ”¶æ•›ï¼ˆè¯¯å·® âˆ 1/âˆšNï¼‰</div><label class="t-lbl">f(x) è¡¨è¾¾å¼</label><input class="t-in" id="mcF0" value="sin(x)*x" spellcheck="false"><div class="t-row"><label class="t-lbl">a</label><input class="t-in" id="mcA0" value="0" style="width:80px"><label class="t-lbl" style="margin-left:8px">b</label><input class="t-in" id="mcB0" value="3.14159" style="width:80px"><label class="t-lbl" style="margin-left:8px">N</label><input class="t-in" id="mcN0" value="5000" style="width:90px"></div><div class="t-row"><button class="t-btn" id="mcRun0">è¿è¡Œ</button></div><canvas class="t-cv" id="mcCv0a" style="width:100%;height:220px"></canvas><canvas class="t-cv" id="mcCv0b" style="width:100%;height:220px;margin-top:6px"></canvas><div class="t-res" id="mcR0"></div></div><div id="mcP1" style="display:none"><div class="t-res" style="font-size:.78em;margin-bottom:10px;padding:8px 12px;background:var(--bg-zebra)">åœ¨å•ä½æ­£æ–¹å½¢éšæœºæ’’ç‚¹ï¼Œè½å…¥å†…åˆ‡åœ† (xÂ²+yÂ²â‰¤1) çš„æ¯”ä¾‹ Ã— 4 â‰ˆ Ï€ã€‚ç»å…¸ hit-or-miss æ–¹æ³•ã€‚</div><div class="t-row"><label class="t-lbl">é‡‡æ ·æ•° N</label><input class="t-in" id="mcN1" value="10000" style="width:120px"></div><div class="t-row"><button class="t-btn" id="mcRun1">å¼€å§‹</button><button class="t-btn t-btn-o" id="mcStop1">åœæ­¢</button></div><canvas class="t-cv" id="mcCv1" style="width:100%;height:280px"></canvas><div class="t-res" id="mcR1"></div></div><div id="mcP2" style="display:none"><div class="t-res" style="font-size:.78em;margin-bottom:10px;padding:8px 12px;background:var(--bg-zebra)">Von Neumann èˆé€‰æ³•: åœ¨ [a,b]Ã—[0,M] å‡åŒ€æ’’ç‚¹ï¼Œä¿ç•™ yâ‰¤f(x) çš„æ ·æœ¬ï¼Œå®ç°ä»ä»»æ„ PDF é‡‡æ ·ã€‚ä¸Šå›¾: æ¥å—/æ‹’ç»ç‚¹ï¼›ä¸‹å›¾: é‡‡æ ·ç›´æ–¹å›¾ã€‚</div><label class="t-lbl">ç›®æ ‡ PDF f(x)</label><input class="t-in" id="mcF2" value="exp(-x^2/2)" spellcheck="false"><div class="t-row"><label class="t-lbl">a</label><input class="t-in" id="mcA2" value="-4" style="width:70px"><label class="t-lbl" style="margin-left:8px">b</label><input class="t-in" id="mcB2" value="4" style="width:70px"><label class="t-lbl" style="margin-left:8px">M(ä¸Šç•Œ)</label><input class="t-in" id="mcM2" placeholder="è‡ªåŠ¨" style="width:70px"><label class="t-lbl" style="margin-left:8px">N</label><input class="t-in" id="mcN2" value="8000" style="width:80px"></div><div class="t-row">é¢„è®¾: <span class="t-btn t-btn-o" style="font-size:12px;padding:4px 8px" id="mcPre2a">é«˜æ–¯</span> <span class="t-btn t-btn-o" style="font-size:12px;padding:4px 8px" id="mcPre2b">sinÂ²(x)</span></div><div class="t-row"><button class="t-btn" id="mcRun2">è¿è¡Œ</button></div><canvas class="t-cv" id="mcCv2a" style="width:100%;height:220px"></canvas><canvas class="t-cv" id="mcCv2b" style="width:100%;height:220px;margin-top:6px"></canvas><div class="t-res" id="mcR2"></div></div><div id="mcP3" style="display:none"><div class="t-res" style="font-size:.78em;margin-bottom:10px;padding:8px 12px;background:var(--bg-zebra)">Metropolis-Hastings ç®—æ³•: ä»ç›®æ ‡åˆ†å¸ƒ Ï€(x)âˆf(x) é‡‡æ ·ã€‚Ïƒ æ§åˆ¶æè®®æ­¥é•¿ï¼ŒBurn-in ä¸¢å¼ƒåˆå§‹æ ·æœ¬ä»¥æ¶ˆé™¤åˆå§‹çŠ¶æ€åå·®ã€‚ä¸Šå›¾: é©¬å°”å¯å¤«é“¾è½¨è¿¹ï¼›ä¸‹å›¾: é‡‡æ ·ç›´æ–¹å›¾ vs ç›®æ ‡ã€‚</div><label class="t-lbl">ç›®æ ‡åˆ†å¸ƒ Ï€(x) âˆ f(x)</label><input class="t-in" id="mcF3" value="exp(-x^2/2)" spellcheck="false"><div class="t-row" style="flex-wrap:wrap"><label class="t-lbl">xâ‚€</label><input class="t-in" id="mcX3" value="0" style="width:60px"><label class="t-lbl" style="margin-left:8px">Ïƒ</label><input class="t-in" id="mcS3" value="1" style="width:60px"><label class="t-lbl" style="margin-left:8px">N</label><input class="t-in" id="mcN3" value="10000" style="width:80px"><label class="t-lbl" style="margin-left:8px">Burn-in</label><input class="t-in" id="mcB3" value="1000" style="width:80px"></div><div class="t-row">é¢„è®¾: <span class="t-btn t-btn-o" style="font-size:12px;padding:4px 8px" id="mcPre3a">æ ‡å‡†æ­£æ€</span> <span class="t-btn t-btn-o" style="font-size:12px;padding:4px 8px" id="mcPre3b">åŒå³°</span></div><div class="t-row"><button class="t-btn" id="mcRun3">è¿è¡Œ</button></div><canvas class="t-cv" id="mcCv3a" style="width:100%;height:220px"></canvas><canvas class="t-cv" id="mcCv3b" style="width:100%;height:220px;margin-top:6px"></canvas><div class="t-res" id="mcR3"></div></div><div id="mcP4" style="display:none"><div class="t-res" style="font-size:.78em;margin-bottom:10px;padding:8px 12px;background:var(--bg-zebra)">2D ç®€å•éšæœºæ¸¸èµ°: æ¯æ­¥ç­‰æ¦‚ç‡é€‰æ‹© â†‘â†“â†â†’ ç§»åŠ¨ä¸€æ ¼ã€‚å‡æ–¹ä½ç§» âŸ¨RÂ²âŸ© âˆ Nï¼ˆæ‰©æ•£å¾‹ï¼‰ï¼Œä¸Šå›¾: è½¨è¿¹ï¼›ä¸‹å›¾: |R| éšæ­¥æ•°å˜åŒ–ã€‚</div><div class="t-row"><label class="t-lbl">æ­¥æ•° N</label><input class="t-in" id="mcN4" value="500" style="width:90px"><label class="t-lbl" style="margin-left:8px">è½¨è¿¹æ•° M</label><input class="t-in" id="mcM4" value="5" style="width:70px"></div><div class="t-row">é¢„è®¾: <span class="t-btn t-btn-o" style="font-size:12px;padding:4px 8px" id="mcPre4a">çŸ­ç¨‹ (N=100,M=20)</span> <span class="t-btn t-btn-o" style="font-size:12px;padding:4px 8px" id="mcPre4b">é•¿ç¨‹ (N=2000,M=5)</span></div><div class="t-row"><button class="t-btn" id="mcRun4">è¿è¡Œ</button></div><canvas class="t-cv" id="mcCv4a" style="width:100%;height:300px"></canvas><canvas class="t-cv" id="mcCv4b" style="width:100%;height:220px;margin-top:6px"></canvas><div class="t-res" id="mcR4"></div></div><div id="mcP5" style="display:none"><div id="mcDesc5" class="t-res" style="font-size:.78em;margin-bottom:10px;padding:8px 12px;background:var(--bg-zebra)">2D æ­£æ–¹æ ¼å­ Ising æ¨¡å‹ï¼ˆMetropolis ç®—æ³•ï¼‰ã€‚æ¯ä¸ªæ ¼ç‚¹è‡ªæ—‹ Ïƒ=Â±1ï¼Œå“ˆå¯†é¡¿é‡ H = âˆ’J Î£ Ïƒáµ¢Ïƒâ±¼ã€‚æ¸©åº¦ T ä»¥ J/k<sub>B</sub> ä¸ºå•ä½ (J=k<sub>B</sub>=1)ï¼Œä¸´ç•Œæ¸©åº¦ T<sub>c</sub> = 2/ln(1+âˆš2) â‰ˆ 2.269ï¼šä½æ¸©é“ç£æœ‰åºï¼Œé«˜æ¸©é¡ºç£æ— åºã€‚</div><div class="t-row" style="flex-wrap:wrap"><label class="t-lbl">æ ¼å­ L</label><input type="range" id="mcL5" min="8" max="80" value="16" style="width:120px"><span id="mcL5v">16</span><label class="t-lbl" style="margin-left:12px">æ¸©åº¦ T</label><input type="range" id="mcT5" min="0.5" max="5.0" step="0.1" value="2.3" style="width:140px"><span id="mcT5v">2.30</span></div><div class="t-row" style="flex-wrap:wrap">é¢„è®¾: <span class="t-btn t-btn-o" style="font-size:12px;padding:4px 8px" id="mcPre5a">ä½æ¸©æœ‰åº T=1.5</span> <span class="t-btn t-btn-o" style="font-size:12px;padding:4px 8px" id="mcPre5b">ä¸´ç•Œç‚¹ T=2.27</span> <span class="t-btn t-btn-o" style="font-size:12px;padding:4px 8px" id="mcPre5c">é«˜æ¸©æ— åº T=4.0</span></div><div class="t-row"><button class="t-btn" id="mcPlay5">â–¶ Play</button><button class="t-btn t-btn-o" id="mcPause5">â¸ Pause</button><button class="t-btn t-btn-o" id="mcReset5">â†º Reset</button></div><canvas class="t-cv" id="mcCv5a" style="width:100%;height:320px"></canvas><canvas class="t-cv" id="mcCv5b" style="width:100%;height:200px;margin-top:6px"></canvas><div class="t-res" id="mcR5"></div></div>',async init(t){var e=await n(),a=function(e){return t.querySelector(e)},l=getComputedStyle(document.documentElement),i=l.getPropertyValue("--accent").trim()||"#5B8BA4",o=l.getPropertyValue("--font-color-1").trim()||"#333",r=window.devicePixelRatio||1,s=null,c=45,d=15,p=15,u=30,f=a("#mcTabs");function v(){s&&(cancelAnimationFrame(s),s=null)}function h(t){var e=t.getBoundingClientRect(),n=e.width,a=e.height;t.width=n*r,t.height=a*r;var l=t.getContext("2d");return l.scale(r,r),{ctx:l,w:n,h:a,pw:n-c-d,ph:a-p-u}}function m(t,e,n,a,l,i,r,s){var f=e-c-d,v=n-p-u;t.clearRect(0,0,e,n),t.strokeStyle="#eee",t.lineWidth=1;for(var h=0;h<=5;h++){var m=c+f*h/5;t.beginPath(),t.moveTo(m,p),t.lineTo(m,p+v),t.stroke()}for(h=0;h<=4;h++){var b=p+v*h/4;t.beginPath(),t.moveTo(c,b),t.lineTo(c+f,b),t.stroke()}t.strokeStyle="#333",t.lineWidth=1.2,t.beginPath(),t.moveTo(c,p+v),t.lineTo(c+f,p+v),t.stroke(),t.beginPath(),t.moveTo(c,p),t.lineTo(c,p+v),t.stroke(),t.fillStyle="#888",t.font="10px sans-serif",t.textAlign="center";for(h=0;h<=5;h++){var x=a+(l-a)*h/5;t.fillText(x.toFixed(2),c+f*h/5,p+v+14)}t.textAlign="right";for(h=0;h<=4;h++){x=r-(r-i)*h/4;t.fillText(x.toFixed(s&&void 0!==s.yDig?s.yDig:2),c-4,p+v*h/4+4)}s&&s.title&&(t.fillStyle=o,t.font="11px sans-serif",t.textAlign="left",t.fillText(s.title,c+4,p+12))}function b(t,e,n,a){return c+a*(t-e)/(n-e)}function x(t,e,n,a){return p+a*(1-(t-e)/(n-e))}function y(t){var n=e.parse(t).compile();return function(t){try{return n.evaluate({x:t,pi:Math.PI,e:Math.E})}catch(t){return NaN}}}function g(){var t=Math.random(),e=Math.random();return Math.sqrt(-2*Math.log(t))*Math.cos(2*Math.PI*e)}["MC ç§¯åˆ†","ä¼°ç®— Ï€","èˆé€‰æ³•","MCMC","éšæœºæ¸¸èµ°","Ising æ¨¡å‹"].forEach(function(t,e){var n=document.createElement("span");n.textContent=t,n.className=0===e?"t-btn":"t-btn t-btn-o",0===e&&(n.style.fontWeight="700"),n.style.cursor="pointer",n.onclick=function(){!function(t){v(),w=!1,k=!1;for(var e=f.children,n=0;n<e.length;n++)e[n].className=n===t?"t-btn":"t-btn t-btn-o",e[n].style.fontWeight=n===t?"700":"";for(n=0;n<6;n++){var l=a("#mcP"+n);l&&(l.style.display=n===t?"":"none")}}(e)},f.appendChild(n)}),a("#mcRun0").onclick=function(){v();try{var t=y(a("#mcF0").value),e=parseFloat(a("#mcA0").value),n=parseFloat(a("#mcB0").value),l=parseInt(a("#mcN0").value)||5e3;if(isNaN(e)||isNaN(n)||e>=n)return void(a("#mcR0").innerHTML='<span style="color:#f56c6c">åŒºé—´æ— æ•ˆ</span>');for(var o=0,r=0;r<=200;r++){var s=t(e+(n-e)*r/200);s>o&&(o=s)}(o*=1.1)<=0&&(o=1);var d=h(a("#mcCv0a"));m(d.ctx,d.w,d.h,e,n,0,o,{title:"æ•£ç‚¹å›¾"}),d.ctx.strokeStyle="#409eff",d.ctx.lineWidth=2,d.ctx.beginPath();for(r=0;r<=200;r++){var p=t(T=e+(n-e)*r/200),u=b(T,e,n,d.pw),f=x(p,0,o,d.ph);0===r?d.ctx.moveTo(u,f):d.ctx.lineTo(u,f)}d.ctx.stroke();var g=0,w=0,S=[],k=[],M=[];for(r=0;r<l;r++){var T=e+Math.random()*(n-e),C=(p=Math.random()*o,t(T));S.push(T),k.push(p),M.push(p<=C),g+=C,w+=C*C}for(r=0;r<l;r++)d.ctx.fillStyle=M[r]?"rgba(103,194,58,0.4)":"rgba(180,180,180,0.3)",d.ctx.fillRect(b(S[r],e,n,d.pw)-1,x(k[r],0,o,d.ph)-1,2,2);var q=h(a("#mcCv0b")),P=(n-e)*g/l,E=Math.sqrt((n-e)*(n-e)*(w/l-g/l*(g/l))/l),L=function(t,e,n,a){a%2!=0&&a++;for(var l=(n-e)/a,i=t(e)+t(n),o=1;o<a;o++)i+=t(e+o*l)*(o%2==0?2:4);return i*l/3}(t,e,n,1e3),F=[],A=0;for(r=0;r<l;r++)A+=t(S[r]),F.push((n-e)*A/(r+1));var R=F[0],N=F[0];for(r=0;r<F.length;r++)F[r]<R&&(R=F[r]),F[r]>N&&(N=F[r]);var H=.15*(N-R)||1;R-=H,N+=H,m(q.ctx,q.w,q.h,0,l,R,N,{title:"æ”¶æ•›æ›²çº¿"}),q.ctx.strokeStyle="#f56c6c",q.ctx.lineWidth=1.2,q.ctx.setLineDash([6,4]),q.ctx.beginPath();var z=x(L,R,N,q.ph);q.ctx.moveTo(c,z),q.ctx.lineTo(c+q.pw,z),q.ctx.stroke(),q.ctx.setLineDash([]),q.ctx.strokeStyle=i,q.ctx.lineWidth=1.5,q.ctx.beginPath();var j=Math.max(1,Math.floor(l/500));for(r=0;r<l;r+=j){u=b(r,0,l,q.pw),f=x(F[r],R,N,q.ph);0===r?q.ctx.moveTo(u,f):q.ctx.lineTo(u,f)}q.ctx.stroke();var D=0!==L?Math.abs(P-L)/Math.abs(L)*100:0;a("#mcR0").innerHTML="MC ä¼°è®¡å€¼: <b>"+P.toFixed(6)+"</b> Â± "+E.toFixed(6)+"<br>Simpson å‚è€ƒ: <b>"+L.toFixed(6)+"</b><br>ç›¸å¯¹è¯¯å·®: <b>"+D.toFixed(3)+"%</b>"}catch(t){a("#mcR0").innerHTML='<span style="color:#f56c6c">'+t.message+"</span>"}};var w=!1;a("#mcRun1").onclick=function(){v(),w=!0;var t=parseInt(a("#mcN1").value)||1e4,e=h(a("#mcCv1"));m(e.ctx,e.w,e.h,-1,1,-1,1,{title:"ä¼°ç®— Ï€"});var n=b(0,-1,1,e.pw),l=x(0,-1,1,e.ph),i=e.pw/2,o=e.ph/2;e.ctx.strokeStyle="#409eff",e.ctx.lineWidth=1.5,e.ctx.beginPath(),e.ctx.ellipse(n,l,i,o,0,0,2*Math.PI),e.ctx.stroke();var r=0,c=0;s=requestAnimationFrame(function n(){if(w&&!(c>=t)){for(var l=0;l<50&&c<t;l++){var i=2*Math.random()-1,o=2*Math.random()-1,d=i*i+o*o<=1;d&&r++,c++,e.ctx.fillStyle=d?"rgba(103,194,58,0.5)":"rgba(180,180,180,0.35)",e.ctx.fillRect(b(i,-1,1,e.pw)-1,x(o,-1,1,e.ph)-1,2.5,2.5)}var p=4*r/c;a("#mcR1").innerHTML="é‡‡æ ·: <b>"+c+"/"+t+"</b> | Ï€ â‰ˆ <b>"+p.toFixed(6)+"</b> | è¯¯å·®: <b>"+(Math.abs(p-Math.PI)/Math.PI*100).toFixed(3)+"%</b>",c<t?s=requestAnimationFrame(n):w=!1}})},a("#mcStop1").onclick=function(){w=!1,v()},a("#mcPre2a").onclick=function(){a("#mcF2").value="exp(-x^2/2)",a("#mcA2").value="-4",a("#mcB2").value="4",a("#mcM2").value=""},a("#mcPre2b").onclick=function(){a("#mcF2").value="sin(x)^2",a("#mcA2").value="0",a("#mcB2").value="3.14159265",a("#mcM2").value=""},a("#mcRun2").onclick=function(){v();try{var t=y(a("#mcF2").value),e=parseFloat(a("#mcA2").value),n=parseFloat(a("#mcB2").value),l=parseInt(a("#mcN2").value)||8e3;if(isNaN(e)||isNaN(n)||e>=n)return void(a("#mcR2").innerHTML='<span style="color:#f56c6c">åŒºé—´æ— æ•ˆ</span>');var i=parseFloat(a("#mcM2").value);if(isNaN(i)||i<=0){i=0;for(var o=0;o<=200;o++){(P=t(e+(n-e)*o/200))>i&&(i=P)}(i*=1.05)<=0&&(i=1)}var r=[],s=[];for(o=0;o<l;o++){var c=e+Math.random()*(n-e),d=Math.random()*i;d<t(c)?r.push({x:c,y:d}):s.push({x:c,y:d})}var p=h(a("#mcCv2a"));m(p.ctx,p.w,p.h,e,n,0,i,{title:"èˆé€‰æ³•æ•£ç‚¹"}),p.ctx.strokeStyle="#409eff",p.ctx.lineWidth=2,p.ctx.beginPath();for(o=0;o<=200;o++){var u=t(N=e+(n-e)*o/200),f=b(N,e,n,p.pw),g=x(u,0,i,p.ph);0===o?p.ctx.moveTo(f,g):p.ctx.lineTo(f,g)}p.ctx.stroke();for(o=0;o<s.length;o++)p.ctx.fillStyle="rgba(180,180,180,0.3)",p.ctx.fillRect(b(s[o].x,e,n,p.pw)-1,x(s[o].y,0,i,p.ph)-1,2,2);for(o=0;o<r.length;o++)p.ctx.fillStyle="rgba(103,194,58,0.45)",p.ctx.fillRect(b(r[o].x,e,n,p.pw)-1,x(r[o].y,0,i,p.ph)-1,2,2);var w=h(a("#mcCv2b")),S=30,k=(n-e)/S,M=[];for(o=0;o<S;o++)M.push(0);for(o=0;o<r.length;o++){var T=Math.floor((r[o].x-e)/k);T>=S&&(T=29),T<0&&(T=0),M[T]++}var C=0;for(o=0;o<S;o++)M[o]>C&&(C=M[o]);var q=0;for(o=0;o<=200;o++){var P;(P=t(e+(n-e)*o/200))>q&&(q=P)}var E=q>0?C/q:1;m(w.ctx,w.w,w.h,e,n,0,1.1*C,{title:"æ¥å—æ ·æœ¬ç›´æ–¹å›¾",yDig:0}),w.ctx.fillStyle="rgba(103,194,58,0.5)";for(o=0;o<S;o++){var L=b(e+o*k,e,n,w.pw),F=b(e+(o+1)*k,e,n,w.pw),A=x(M[o],0,1.1*C,w.ph),R=x(0,0,1.1*C,w.ph);w.ctx.fillRect(L,A,F-L-1,R-A)}w.ctx.strokeStyle="#f56c6c",w.ctx.lineWidth=2,w.ctx.beginPath();for(o=0;o<=200;o++){var N;u=t(N=e+(n-e)*o/200)*E,f=b(N,e,n,w.pw),g=x(u,0,1.1*C,w.ph);0===o?w.ctx.moveTo(f,g):w.ctx.lineTo(f,g)}w.ctx.stroke();var H=(r.length/l*100).toFixed(1);a("#mcR2").innerHTML="æ¥å—ç‡: <b>"+H+"%</b> ("+r.length+"/"+l+")<br>æœ‰æ•ˆæ ·æœ¬æ•°: <b>"+r.length+"</b> | åŒ…ç»œä¸Šç•Œ M: "+i.toFixed(4)}catch(t){a("#mcR2").innerHTML='<span style="color:#f56c6c">'+t.message+"</span>"}},a("#mcPre3a").onclick=function(){a("#mcF3").value="exp(-x^2/2)",a("#mcX3").value="0",a("#mcS3").value="1"},a("#mcPre3b").onclick=function(){a("#mcF3").value="exp(-(x-3)^2/2)+0.5*exp(-(x+2)^2/(2*0.5^2))",a("#mcX3").value="0",a("#mcS3").value="1.5"},a("#mcRun3").onclick=function(){v();try{var t=y(a("#mcF3").value),e=parseFloat(a("#mcX3").value)||0,n=parseFloat(a("#mcS3").value)||1,l=parseInt(a("#mcN3").value)||1e4,o=parseInt(a("#mcB3").value)||1e3;if(o>=l)return void(a("#mcR3").innerHTML='<span style="color:#f56c6c">Burn-in é¡»å°äº N</span>');for(var r=[e],s=0,d=e,u=t(d),f=1;f<l;f++){var w=d+n*g(),S=t(w),k=u>0?Math.min(1,S/u):1;Math.random()<k&&(d=w,u=S,s++),r.push(d)}var M=h(a("#mcCv3a")),T=r[0],C=r[0];for(f=0;f<r.length;f++)r[f]<T&&(T=r[f]),r[f]>C&&(C=r[f]);var q=.08*(C-T)||1;T-=q,C+=q,m(M.ctx,M.w,M.h,0,l,T,C,{title:"é“¾è½¨è¿¹ (Trace Plot)"});var P=b(o,0,l,M.pw);M.ctx.fillStyle="rgba(180,180,180,0.15)",M.ctx.fillRect(c,p,P-c,M.ph),M.ctx.fillStyle="#888",M.ctx.font="10px sans-serif",M.ctx.textAlign="center",M.ctx.fillText("burn-in",(c+P)/2,p+M.ph/2),M.ctx.strokeStyle=i,M.ctx.lineWidth=.8,M.ctx.beginPath();var E=Math.max(1,Math.floor(l/800));for(f=0;f<l;f+=E){var L=b(f,0,l,M.pw),F=x(r[f],T,C,M.ph);0===f?M.ctx.moveTo(L,F):M.ctx.lineTo(L,F)}M.ctx.stroke();var A=h(a("#mcCv3b")),R=r.slice(o),N=R[0],H=R[0];for(f=0;f<R.length;f++)R[f]<N&&(N=R[f]),R[f]>H&&(H=R[f]);var z=.08*(H-N)||1,j=40,D=((H+=z)-(N-=z))/j,B=[];for(f=0;f<j;f++)B.push(0);for(f=0;f<R.length;f++){var I=Math.floor((R[f]-N)/D);I>=j&&(I=39),I<0&&(I=0),B[I]++}var O=0;for(f=0;f<j;f++)B[f]>O&&(O=B[f]);m(A.ctx,A.w,A.h,N,H,0,1.15*O,{title:"åéªŒç›´æ–¹å›¾",yDig:0}),A.ctx.fillStyle="rgba(64,158,255,0.45)";for(f=0;f<j;f++){var W=b(N+f*D,N,H,A.pw),U=b(N+(f+1)*D,N,H,A.pw),_=x(B[f],0,1.15*O,A.ph),V=x(0,0,1.15*O,A.ph);A.ctx.fillRect(W,_,U-W-1,V-_)}var X=0;for(f=0;f<=200;f++){var G=t(N+(H-N)*f/200);G>X&&(X=G)}var K=X>0?O/X:1;A.ctx.strokeStyle="#f56c6c",A.ctx.lineWidth=2,A.ctx.beginPath();for(f=0;f<=200;f++){var Y=N+(H-N)*f/200,$=t(Y)*K;L=b(Y,N,H,A.pw),F=x($,0,1.15*O,A.ph);0===f?A.ctx.moveTo(L,F):A.ctx.lineTo(L,F)}A.ctx.stroke();var J=0;for(f=0;f<R.length;f++)J+=R[f];J/=R.length;var Q=0;for(f=0;f<R.length;f++)Q+=(R[f]-J)*(R[f]-J);Q/=R.length-1;var Z=Math.sqrt(Q),tt=(s/(l-1)*100).toFixed(1);a("#mcR3").innerHTML="æ€»æ¥å—ç‡: <b>"+tt+"%</b><br>æ ·æœ¬å‡å€¼: <b>"+J.toFixed(4)+"</b> | æ ·æœ¬æ ‡å‡†å·®: <b>"+Z.toFixed(4)+"</b><br>æœ‰æ•ˆæ ·æœ¬æ•°: <b>"+R.length+"</b> (å»é™¤ "+o+" burn-in)"}catch(t){a("#mcR3").innerHTML='<span style="color:#f56c6c">'+t.message+"</span>"}};var S=["#e63946","#457b9d","#2a9d8f","#e9c46a","#f4a261","#264653","#6a4c93","#1982c4","#8ac926","#ff595e","#ff924c","#ffca3a","#c77dff","#72efdd","#480ca8","#3a86ff","#8338ec","#fb5607","#06d6a0","#118ab2"];a("#mcPre4a").onclick=function(){a("#mcN4").value="100",a("#mcM4").value="20"},a("#mcPre4b").onclick=function(){a("#mcN4").value="2000",a("#mcM4").value="5"},a("#mcRun4").onclick=function(){v();var t=parseInt(a("#mcN4").value)||500,e=parseInt(a("#mcM4").value)||5;t<1&&(t=1),e<1&&(e=1),e>50&&(e=50);for(var n=[[1,0],[-1,0],[0,1],[0,-1]],l=[],i=[],o=[],r=0,d=0,u=0,f=0,y=0;y<e;y++){for(var g=[0],w=[0],k=0,M=0,T=0;T<t;T++){var C=n[Math.floor(4*Math.random())];k+=C[0],M+=C[1],g.push(k),w.push(M),k<r&&(r=k),k>d&&(d=k),M<u&&(u=M),M>f&&(f=M)}l.push({x:g,y:w}),i.push(k),o.push(M)}var q,P=Math.max(5,Math.ceil(.1*(d-r))),E=Math.max(5,Math.ceil(.1*(f-u))),L=(d+=P)-(r-=P),F=(f+=E)-(u-=E);L>F?(u-=q=(L-F)/2,f+=q):(r-=q=(F-L)/2,d+=q);var A=h(a("#mcCv4a")),R=A.pw,N=A.ph;function H(t){return c+R*(t-r)/(d-r)}function z(t){return p+N*(1-(t-u)/(f-u))}var j=0,D=Math.max(1,Math.floor(t/120));m(A.ctx,A.w,A.h,r,d,u,f,{title:"2D æ ¼ç‚¹éšæœºæ¸¸èµ°",yDig:0}),A.ctx.fillStyle="#333",A.ctx.beginPath(),A.ctx.arc(H(0),z(0),4,0,2*Math.PI),A.ctx.fill(),s=requestAnimationFrame(function n(){for(var r=Math.min(t,j+D),d=0;d<e;d++){var u=S[d%S.length];A.ctx.strokeStyle=u,A.ctx.lineWidth=1.2,A.ctx.globalAlpha=.7,A.ctx.beginPath(),A.ctx.moveTo(H(l[d].x[j]),z(l[d].y[j]));for(var f=j+1;f<=r;f++)A.ctx.lineTo(H(l[d].x[f]),z(l[d].y[f]));A.ctx.stroke(),A.ctx.globalAlpha=1,r<t&&(A.ctx.fillStyle=u,A.ctx.beginPath(),A.ctx.arc(H(l[d].x[r]),z(l[d].y[r]),2.5,0,2*Math.PI),A.ctx.fill())}if((j=r)<t)s=requestAnimationFrame(n);else{for(d=0;d<e;d++){u=S[d%S.length];A.ctx.fillStyle=u,A.ctx.beginPath(),A.ctx.arc(H(i[d]),z(o[d]),4,0,2*Math.PI),A.ctx.fill(),A.ctx.strokeStyle="#fff",A.ctx.lineWidth=1,A.ctx.beginPath(),A.ctx.arc(H(i[d]),z(o[d]),4,0,2*Math.PI),A.ctx.stroke()}!function(){for(var t=h(a("#mcCv4b")),n=i[0],l=i[0],r=o[0],s=o[0],d=0;d<e;d++)i[d]<n&&(n=i[d]),i[d]>l&&(l=i[d]),o[d]<r&&(r=o[d]),o[d]>s&&(s=o[d]);var u=Math.max(5,Math.ceil(.2*Math.max(l-n,s-r))),f=(l+=u)-(n-=u),v=(s+=u)-(r-=u);if(f>v){r-=y=(f-v)/2,s+=y}else{var y;n-=y=(v-f)/2,l+=y}m(t.ctx,t.w,t.h,n,l,r,s,{title:"ç»ˆç‚¹åˆ†å¸ƒ",yDig:0});var g=b(0,n,l,t.pw),w=x(0,r,s,t.ph);t.ctx.strokeStyle="#ccc",t.ctx.lineWidth=1,t.ctx.setLineDash([4,4]),t.ctx.beginPath(),t.ctx.moveTo(g,p),t.ctx.lineTo(g,p+t.ph),t.ctx.stroke(),t.ctx.beginPath(),t.ctx.moveTo(c,w),t.ctx.lineTo(c+t.pw,w),t.ctx.stroke(),t.ctx.setLineDash([]);for(d=0;d<e;d++){var k=S[d%S.length];t.ctx.fillStyle=k,t.ctx.beginPath(),t.ctx.arc(b(i[d],n,l,t.pw),x(o[d],r,s,t.ph),5,0,2*Math.PI),t.ctx.fill(),t.ctx.strokeStyle="#fff",t.ctx.lineWidth=1,t.ctx.beginPath(),t.ctx.arc(b(i[d],n,l,t.pw),x(o[d],r,s,t.ph),5,0,2*Math.PI),t.ctx.stroke()}}(),function(){for(var n=0,l=0,r=0;r<e;r++){var s=Math.sqrt(i[r]*i[r]+o[r]*o[r]);n+=s,l+=s*s}var c=n/e,d=Math.sqrt(l/e),p=Math.sqrt(t);a("#mcR4").innerHTML="è½¨è¿¹æ•°: <b>"+e+"</b> | æ­¥æ•°: <b>"+t+"</b><br>å¹³å‡ä½ç§» âŸ¨râŸ©: <b>"+c.toFixed(2)+"</b><br>å‡æ–¹æ ¹ä½ç§» âˆšâŸ¨rÂ²âŸ©: <b>"+d.toFixed(2)+"</b><br>ç†è®ºå€¼ âˆšN: <b>"+p.toFixed(2)+"</b>"}()}})};var k=!1,M=null,T=0,C=[];function q(){var t=parseInt(a("#mcL5").value)||16;M=[];for(var e=0;e<t;e++){M[e]=[];for(var n=0;n<t;n++)M[e][n]=Math.random()<.5?1:-1}T=0,C=[]}function P(){var t=M.length,e=a("#mcCv5a"),n=e.getBoundingClientRect(),l=n.width,s=n.height;e.width=l*r,e.height=s*r;var c=e.getContext("2d");c.scale(r,r);var d=10,p=l-20,u=s-20-20,f=Math.floor(Math.min(p/t,u/t));f<2&&(f=2);var v=d+Math.floor((p-f*t)/2),h=30+Math.floor((u-f*t)/2);c.clearRect(0,0,l,s),c.fillStyle=o,c.font="11px sans-serif",c.textAlign="left",c.fillText("è‡ªæ—‹æ„å‹ (L="+t+", sweep="+T+")",d,22);for(var m=0;m<t;m++)for(var b=0;b<t;b++)c.fillStyle=1===M[m][b]?i:"#eee",c.fillRect(v+b*f,h+m*f,f-1,f-1)}function E(){var t=h(a("#mcCv5b"));if(C.length<2)m(t.ctx,t.w,t.h,0,1,0,1,{title:"|M|/NÂ² vs æ‰«ææ¬¡æ•°"});else{var e=C.length-1;m(t.ctx,t.w,t.h,0,e,0,1.05,{title:"|M|/NÂ² vs æ‰«ææ¬¡æ•°",yDig:2}),t.ctx.strokeStyle=i,t.ctx.lineWidth=1.5,t.ctx.beginPath();for(var n=Math.max(1,Math.floor(C.length/500)),l=0;l<C.length;l+=n){var o=b(l,0,e,t.pw),r=x(C[l],0,1.05,t.ph);0===l?t.ctx.moveTo(o,r):t.ctx.lineTo(o,r)}t.ctx.stroke();var s=parseFloat(a("#mcT5").value);t.ctx.fillStyle="#888",t.ctx.font="10px sans-serif",t.ctx.textAlign="right",t.ctx.fillText("T="+s.toFixed(2),c+t.pw-4,p+14)}}function L(){for(var t=M.length,e=0,n=0;n<t;n++)for(var a=0;a<t;a++)e+=M[n][a];return Math.abs(e)/(t*t)}function F(){var t=M.length,e=parseFloat(a("#mcT5").value)||2.27,n=L(),l=function(){for(var t=M.length,e=0,n=0;n<t;n++)for(var a=0;a<t;a++)e+=-M[n][a]*(M[n][(a+1)%t]+M[(n+1)%t][a]);return e}();a("#mcR5").innerHTML="æ‰«ææ¬¡æ•°: <b>"+T+"</b> | æ¸©åº¦ T: <b>"+e.toFixed(2)+"</b><br>ç£åŒ–å¼ºåº¦ |M|/NÂ²: <b>"+n.toFixed(4)+"</b><br>èƒ½é‡ E: <b>"+l+"</b> | æ ¼å­: <b>"+t+"Ã—"+t+"</b>"}function A(){k&&(!function(){for(var t=M.length,e=parseFloat(a("#mcT5").value)||2.27,n=t*t,l=0;l<n;l++){var i=Math.floor(Math.random()*t),o=Math.floor(Math.random()*t),r=M[i][o],s=2*r*(M[(i-1+t)%t][o]+M[(i+1)%t][o]+M[i][(o-1+t)%t]+M[i][(o+1)%t]);(s<=0||Math.random()<Math.exp(-s/e))&&(M[i][o]=-r)}T++,C.push(L())}(),P(),T%3==0&&E(),F(),s=requestAnimationFrame(A))}a("#mcL5").oninput=function(){a("#mcL5v").textContent=this.value},a("#mcT5").oninput=function(){a("#mcT5v").textContent=parseFloat(this.value).toFixed(2)},a("#mcPre5a").onclick=function(){a("#mcT5").value="1.5",a("#mcT5v").textContent="1.50"},a("#mcPre5b").onclick=function(){a("#mcT5").value="2.27",a("#mcT5v").textContent="2.27"},a("#mcPre5c").onclick=function(){a("#mcT5").value="4.0",a("#mcT5v").textContent="4.00"},a("#mcPlay5").onclick=function(){v(),M||q(),k=!0,A()},a("#mcPause5").onclick=function(){k=!1,v()},a("#mcReset5").onclick=function(){k=!1,v(),q(),P(),E(),F()},t._cleanup=function(){v(),w=!1,k=!1}}},{id:"morse",name:"æ‘©å°”æ–¯ç”µç ",icon:"ğŸ“¡",cat:"fun",desc:"åŒå‘å®æ—¶äº’è½¬ Â· éŸ³é¢‘æ’­æ”¾",html:()=>'<div class="t-split"><div><div class="t-lbl">ğŸ“ æ–‡å­—ï¼ˆè¾“å…¥å³è½¬æ¢ï¼‰</div><textarea class="t-ta" id="morText" rows="3" placeholder="è¾“å…¥æ–‡å­—ï¼Œå¦‚ HELLO"></textarea></div><div><div class="t-lbl">ğŸ“¡ æ‘©å°”æ–¯ç”µç ï¼ˆè¾“å…¥å³è½¬æ¢ï¼‰</div><textarea class="t-ta" id="morCode" rows="3" placeholder="è¾“å…¥ç”µç ï¼Œç©ºæ ¼åˆ†éš”å­—æ¯ï¼Œ/ åˆ†éš”å•è¯"></textarea></div></div><div class="t-row" style="justify-content:center;margin-top:8px"><button class="t-btn t-btn-s" id="morPlay">ğŸ”Š æ’­æ”¾ç”µç éŸ³</button></div>',init(t){const e=t.querySelector("#morText"),n=t.querySelector("#morCode");let a=!1;e.oninput=()=>{a||(a=!0,n.value=e.value.toUpperCase().split("").map(t=>" "===t?"/":b[t]||t).join(" "),a=!1)},n.oninput=()=>{a||(a=!0,e.value=n.value.split(" / ").map(t=>t.split(" ").map(t=>x[t]||t).join("")).join(" "),a=!1)},e.value="HELLO WORLD",e.oninput(),t.querySelector("#morPlay").onclick=()=>{const t=n.value;if(!t)return;const e=new(window.AudioContext||window.webkitAudioContext);let a=e.currentTime;for(const n of t)if("."===n){const t=e.createOscillator();t.frequency.value=700;const n=e.createGain();n.gain.value=.3,t.connect(n).connect(e.destination),t.start(a),t.stop(a+.08),a+=.16}else if("-"===n){const t=e.createOscillator();t.frequency.value=700;const n=e.createGain();n.gain.value=.3,t.connect(n).connect(e.destination),t.start(a),t.stop(a+.24),a+=.32}else" "===n?a+=.16:"/"===n&&(a+=.4)}}},{id:"ode",name:"ODE æ±‚è§£",icon:"ğŸ“",cat:"academic",desc:"Euler Â· RK4 Â· éšå¼ Â· è‡ªé€‚åº” Â· æ–¹ç¨‹ç»„ Â· ç›¸ç©ºé—´",html:()=>'\n<div class="t-row" style="gap:6px;margin-bottom:12px">\n  <button id="odeTabSingle" class="t-btn">å•æ–¹ç¨‹</button>\n  <button id="odeTabSystem" class="t-btn t-btn-o">æ–¹ç¨‹ç»„</button>\n  <button id="odeTabNumerov" class="t-btn t-btn-o">äºŒé˜¶ODE</button>\n</div>\n<div id="odePanelSingle">\n  <label class="t-lbl">dy/dx = f(x, y)</label>\n  <input class="t-in" id="odeExpr" placeholder="-0.5*y + sin(2*x)">\n  <div class="t-row" style="gap:8px;margin-top:6px">\n    <div style="flex:1"><label class="t-lbl">åˆå§‹ x</label><input class="t-in" id="odeX0" value="0"></div>\n    <div style="flex:1"><label class="t-lbl">åˆå§‹ y</label><input class="t-in" id="odeY0" value="0"></div>\n    <div style="flex:1"><label class="t-lbl">ç»ˆç‚¹ x</label><input class="t-in" id="odeXend" value="15"></div>\n    <div style="flex:1"><label class="t-lbl">æ­¥é•¿ h</label><input class="t-in" id="odeH" value="0.05"></div>\n  </div>\n  <label class="t-lbl" style="margin-top:8px">æ±‚è§£æ–¹æ³•</label>\n  <div style="display:flex;flex-wrap:wrap;gap:6px 16px;margin:4px 0 8px">\n    <label><input type="checkbox" id="odeMEuler" checked> Euler</label>\n    <label><input type="checkbox" id="odeMHeun" checked> æ”¹è¿›Euler(Heun)</label>\n    <label><input type="checkbox" id="odeMRK4" checked> RK4</label>\n    <label><input type="checkbox" id="odeMImpl"> éšå¼Euler</label>\n    <label><input type="checkbox" id="odeMRK45"> è‡ªé€‚åº”RK45</label>\n  </div>\n  <div id="odeTolRow" style="display:none;margin-bottom:8px">\n    <label class="t-lbl">å®¹å·® (è‡ªé€‚åº”RK45)</label>\n    <input class="t-in" id="odeTol" value="1e-6" style="width:120px">\n  </div>\n  <div class="t-row" style="flex-wrap:wrap;gap:6px;margin-bottom:8px">\n    <span class="t-lbl" style="margin-right:4px">é¢„è®¾:</span>\n    <button class="t-btn t-btn-o" data-preset="decay">è¡°å‡æŒ¯è¡</button>\n    <button class="t-btn t-btn-o" data-preset="exp">æŒ‡æ•°å¢é•¿</button>\n    <button class="t-btn t-btn-o" data-preset="logistic">Logistic</button>\n    <button class="t-btn t-btn-o" data-preset="stiff">åˆšæ€§æ–¹ç¨‹</button>\n  </div>\n  <button class="t-btn" id="odeSolve">æ±‚è§£</button>\n</div>\n<div id="odePanelSystem" style="display:none">\n  <div id="odeSysEqs"></div>\n  <button class="t-btn t-btn-o" id="odeSysAdd" style="margin-top:6px">+ æ·»åŠ æ–¹ç¨‹</button>\n  <div class="t-row" style="gap:8px;margin-top:8px">\n    <div style="flex:1"><label class="t-lbl">åˆå§‹ t</label><input class="t-in" id="odeSysT0" value="0"></div>\n    <div style="flex:1"><label class="t-lbl">ç»ˆç‚¹ t</label><input class="t-in" id="odeSysTend" value="15"></div>\n    <div style="flex:1"><label class="t-lbl">æ­¥é•¿ h</label><input class="t-in" id="odeSysH" value="0.05"></div>\n  </div>\n  <label class="t-lbl" style="margin-top:8px">æ±‚è§£æ–¹æ³•</label>\n  <div style="display:flex;flex-wrap:wrap;gap:6px 16px;margin:4px 0 8px">\n    <label><input type="checkbox" id="odeSysMEuler" checked> Euler</label>\n    <label><input type="checkbox" id="odeSysMHeun" checked> Heun</label>\n    <label><input type="checkbox" id="odeSysMRK4" checked> RK4</label>\n  </div>\n  <label class="t-lbl">ç»˜å›¾æ¨¡å¼</label>\n  <div style="display:flex;gap:16px;margin:4px 0 4px">\n    <label><input type="radio" name="odePlotMode" value="time" checked> æ—¶é—´æ¼”åŒ–</label>\n    <label><input type="radio" name="odePlotMode" value="phase"> ç›¸ç©ºé—´</label>\n  </div>\n  <div id="odePhaseAxes" style="display:none;margin:4px 0 8px">\n    <div class="t-row" style="gap:8px;align-items:center">\n      <span class="t-lbl">X è½´:</span>\n      <select class="t-sel" id="odePhaseX" style="width:80px"></select>\n      <span class="t-lbl">Y è½´:</span>\n      <select class="t-sel" id="odePhaseY" style="width:80px"></select>\n    </div>\n  </div>\n  <div class="t-row" style="flex-wrap:wrap;gap:6px;margin-bottom:8px">\n    <span class="t-lbl" style="margin-right:4px">é¢„è®¾:</span>\n    <button class="t-btn t-btn-o" data-syspreset="osc">é˜»å°¼æŒ¯å­</button>\n    <button class="t-btn t-btn-o" data-syspreset="lv">Lotka-Volterra</button>\n    <button class="t-btn t-btn-o" data-syspreset="chaos">æ··æ²Œæ‘†</button>\n  </div>\n  <button class="t-btn" id="odeSysSolve">æ±‚è§£</button>\n</div>\n<div id="odePanelNumerov" style="display:none">\n  <div class="t-res" style="font-size:.78em;margin-bottom:10px;padding:8px 12px;background:var(--bg-zebra)">\n    æ±‚è§£ <b>y\'\' + kÂ²(x)Â·y = s(x)</b> â€” Numerov ç®—æ³• (O(hâ¶)å±€éƒ¨ç²¾åº¦)\n  </div>\n  <label class="t-lbl">kÂ²(x) è¡¨è¾¾å¼</label>\n  <input class="t-in" id="odeNK2" placeholder="ä¾‹: 4*pi^2" value="4*pi^2">\n  <label class="t-lbl" style="margin-top:6px">s(x) æºé¡¹</label>\n  <input class="t-in" id="odeNS" placeholder="0 (é½æ¬¡)" value="0">\n  <div class="t-row" style="gap:8px;margin-top:6px">\n    <div style="flex:1"><label class="t-lbl">xâ‚€</label><input class="t-in" id="odeNX0" value="0"></div>\n    <div style="flex:1"><label class="t-lbl">x_end</label><input class="t-in" id="odeNXend" value="1"></div>\n    <div style="flex:1"><label class="t-lbl">y(xâ‚€)</label><input class="t-in" id="odeNY0" value="1"></div>\n    <div style="flex:1"><label class="t-lbl">y\'(xâ‚€)</label><input class="t-in" id="odeNDY0" value="0"></div>\n  </div>\n  <div class="t-row" style="margin-top:6px">\n    <label class="t-lbl">ç½‘æ ¼ç‚¹æ•° N</label>\n    <input type="range" id="odeNN" min="50" max="2000" step="50" value="500" style="flex:1">\n    <span id="odeNNVal" style="min-width:40px;text-align:right">500</span>\n  </div>\n  <div class="t-row" style="flex-wrap:wrap;gap:6px;margin:8px 0">\n    <span class="t-lbl" style="margin-right:4px">é¢„è®¾:</span>\n    <button class="t-btn t-btn-o" data-numpreset="harmonic">ç®€è°æŒ¯åŠ¨ kÂ²=4Ï€Â²</button>\n    <button class="t-btn t-btn-o" data-numpreset="airy">Airy å‹ kÂ²=x</button>\n    <button class="t-btn t-btn-o" data-numpreset="bessel">ç±» Bessel kÂ²=1-1/(4xÂ²)</button>\n  </div>\n  <button class="t-btn" id="odeNSolve">Numerov æ±‚è§£</button>\n</div>\n<canvas id="odeCanvas" class="t-cv" style="width:100%;margin-top:10px;display:none"></canvas>\n<div style="margin-top:8px">\n  <button class="t-btn t-btn-o" id="odeToggleTable" style="display:none">æ˜¾ç¤ºæ•°æ®è¡¨</button>\n</div>\n<div id="odeTableWrap" style="display:none;margin-top:8px;max-height:400px;overflow:auto"></div>\n<div id="odeResult" class="t-res"></div>',async init(t){var e=await n(),a=function(e){return t.querySelector(e)},l=function(e){return t.querySelectorAll(e)},i=[getComputedStyle(document.documentElement).getPropertyValue("--accent").trim()||"#5B8BA4","#67c23a","#f56c6c","#e6a23c","#9b59b6","#00bcd4","#ff7043","#8d6e63","#78909c","#26a69a"],o=a("#odeCanvas"),r=o.getContext("2d"),s=a("#odeResult"),c=a("#odeTableWrap"),d=a("#odeToggleTable"),p=a("#odePanelSingle"),u=a("#odePanelSystem"),f=a("#odePanelNumerov"),v=null,h=["â‚€","â‚","â‚‚","â‚ƒ","â‚„","â‚…","â‚†","â‚‡","â‚ˆ","â‚‰"];function m(t){return String(t).split("").map(function(t){return h[+t]}).join("")}var b=a("#odeSysEqs"),x=0;function y(t,e,n){x++;var a=document.createElement("div");a.className="t-row ode-eq-row",a.dataset.idx=t,a.style.cssText="gap:6px;margin-bottom:4px;align-items:center",a.innerHTML='<span class="t-lbl" style="white-space:nowrap">dy'+m(t)+'/dt =</span><input class="t-in ode-sys-f" data-idx="'+t+'" value="'+(e||"")+'" style="flex:1"><span class="t-lbl" style="white-space:nowrap">y'+m(t)+'(0) =</span><input class="t-in ode-sys-y0" data-idx="'+t+'" value="'+(n||"0")+'" style="width:60px"><button class="t-btn t-btn-d ode-sys-del" data-idx="'+t+'" style="padding:2px 8px">âœ•</button>',b.appendChild(a),w(),S()}function g(t){var e=b.querySelector('.ode-eq-row[data-idx="'+t+'"]');e&&(e.remove(),x--,function(){for(var t=b.querySelectorAll(".ode-eq-row"),e=0;e<t.length;e++){var n=e+1;t[e].dataset.idx=n,t[e].querySelector(".ode-sys-f").dataset.idx=n,t[e].querySelector(".ode-sys-y0").dataset.idx=n,t[e].querySelector(".ode-sys-del").dataset.idx=n,t[e].querySelectorAll("span")[0].textContent="dy"+m(n)+"/dt =",t[e].querySelectorAll("span")[1].textContent="y"+m(n)+"(0) ="}}(),w(),S())}function w(){for(var t=b.querySelectorAll(".ode-sys-del"),e=0;e<t.length;e++)t[e].style.display=x<=2?"none":""}function S(){var t=a("#odePhaseX"),e=a("#odePhaseY"),n=t.value,l=e.value;t.innerHTML="",e.innerHTML="";for(var i=b.querySelectorAll(".ode-eq-row"),o=0;o<i.length;o++){var r=o+1,s=document.createElement("option");s.value="y"+r,s.textContent="y"+m(r);var c=document.createElement("option");c.value="y"+r,c.textContent="y"+m(r),t.appendChild(s),e.appendChild(c)}n&&t.querySelector('option[value="'+n+'"]')?t.value=n:t.value="y1",l&&e.querySelector('option[value="'+l+'"]')?e.value=l:i.length>=2?e.value="y2":e.value="y1"}function k(){return b.querySelectorAll(".ode-eq-row").length}function M(t){b.innerHTML="",x=0;for(var e=0;e<t.length;e++)y(e+1,t[e].f,t[e].y0)}y(1,"y2","2"),y(2,"-4*y1 - 0.5*y2","0"),a("#odeSysAdd").onclick=function(){k()>=10||y(k()+1,"","0")},b.addEventListener("click",function(t){var e=t.target.closest(".ode-sys-del");e&&(k()<=2||g(+e.dataset.idx))});var T=a("#odeTabSingle"),C=a("#odeTabSystem"),q=a("#odeTabNumerov");function P(t){T.className="single"===t?"t-btn":"t-btn t-btn-o",T.style.fontWeight="single"===t?"700":"",C.className="system"===t?"t-btn":"t-btn t-btn-o",C.style.fontWeight="system"===t?"700":"",q.className="numerov"===t?"t-btn":"t-btn t-btn-o",q.style.fontWeight="numerov"===t?"700":"",p.style.display="single"===t?"":"none",u.style.display="system"===t?"":"none",f.style.display="numerov"===t?"":"none",s.innerHTML="",o.style.display="none",d.style.display="none",c.style.display="none"}T.onclick=function(){P("single")},C.onclick=function(){P("system")},q.onclick=function(){P("numerov")};var E=a("#odePhaseAxes");l('input[name="odePlotMode"]').forEach(function(t){t.onchange=function(){E.style.display="phase"===this.value?"":"none"}}),a("#odeMRK45").onchange=function(){a("#odeTolRow").style.display=this.checked?"":"none"};var L={decay:{e:"-0.5*y + sin(2*x)",x0:"0",y0:"0",xe:"15",h:"0.05"},exp:{e:"0.5*y",x0:"0",y0:"1",xe:"5",h:"0.05"},logistic:{e:"y*(1-y)",x0:"0",y0:"0.1",xe:"10",h:"0.05"},stiff:{e:"-1000*(y - sin(x)) + cos(x)",x0:"0",y0:"0",xe:"5",h:"0.001"}};l("[data-preset]").forEach(function(t){t.onclick=function(){var t=L[this.dataset.preset];a("#odeExpr").value=t.e,a("#odeX0").value=t.x0,a("#odeY0").value=t.y0,a("#odeXend").value=t.xe,a("#odeH").value=t.h,"stiff"===this.dataset.preset&&(s.innerHTML='<span style="color:#e6a23c">æç¤ºï¼šåˆšæ€§æ–¹ç¨‹é€‚åˆä½¿ç”¨éšå¼Euleræ³•</span>')}});var F,A={osc:{eqs:[{f:"y2",y0:"2"},{f:"-4*y1 - 0.5*y2",y0:"0"}],t0:"0",te:"15",h:"0.05"},lv:{eqs:[{f:"1.5*y1 - y1*y2",y0:"1"},{f:"-3*y2 + y1*y2",y0:"1"}],t0:"0",te:"20",h:"0.01"},chaos:{eqs:[{f:"y2",y0:"0.5"},{f:"-0.5*y2 - sin(y1) + 1.15*cos(0.667*t)",y0:"0"}],t0:"0",te:"100",h:"0.02"}};function R(t,e){if(t<=0)return 1;var n=t/e,a=Math.pow(10,Math.floor(Math.log10(n))),l=n/a;return(l<1.5?1:l<3?2:l<7?5:10)*a}function N(t,e,n,a){o.style.display="";var l=window.devicePixelRatio||1,s=o.clientWidth,c=Math.min(.55*s,400);o.width=s*l,o.height=c*l,o.style.height=c+"px",r.setTransform(l,0,0,l,0,0);var d=50,p=10,u=s-d-20,f=c-p-30,v=1/0,h=-1/0,m=1/0,b=-1/0;t.forEach(function(t){t.forEach(function(t){isFinite(t[0])&&isFinite(t[1])&&(t[0]<v&&(v=t[0]),t[0]>h&&(h=t[0]),t[1]<m&&(m=t[1]),t[1]>b&&(b=t[1]))})}),v===h&&(v-=1,h+=1),m===b&&(m-=1,b+=1);var x=.05*(h-v)||1,y=.05*(b-m)||1;function g(t){return d+(t-v)/(h-v)*u}function w(t){return p+(1-(t-m)/(b-m))*f}v-=x,h+=x,m-=y,b+=y,r.clearRect(0,0,s,c);var S=R(h-v,8),k=R(b-m,6);r.strokeStyle="#eee",r.lineWidth=1,r.beginPath();for(var M=Math.ceil(v/S)*S;M<=h;M+=S){var T=g(M);r.moveTo(T,p),r.lineTo(T,p+f)}for(var C=Math.ceil(m/k)*k;C<=b;C+=k){var q=w(C);r.moveTo(d,q),r.lineTo(d+u,q)}if(r.stroke(),r.strokeStyle="#333",r.lineWidth=1.5,r.beginPath(),r.moveTo(d,p+f),r.lineTo(d+u,p+f),r.moveTo(d,p),r.lineTo(d,p+f),r.stroke(),m<0&&b>0){r.save(),r.strokeStyle="#ccc",r.lineWidth=1,r.setLineDash([4,3]),r.beginPath();var P=w(0);r.moveTo(d,P),r.lineTo(d+u,P),r.stroke(),r.restore()}r.fillStyle="#888",r.font="10px sans-serif",r.textAlign="center",r.textBaseline="top";for(M=Math.ceil(v/S)*S;M<=h;M+=S)r.fillText(+M.toPrecision(4),g(M),p+f+4);r.textAlign="right",r.textBaseline="middle";for(C=Math.ceil(m/k)*k;C<=b;C+=k)r.fillText(+C.toPrecision(4),d-6,w(C));if(t.forEach(function(t,e){r.strokeStyle=i[e%i.length],r.lineWidth=1.8,r.beginPath();var n=!1;t.forEach(function(t){if(isFinite(t[0])&&isFinite(t[1])){var e=g(t[0]),a=w(t[1]);n?r.lineTo(e,a):(r.moveTo(e,a),n=!0)}}),r.stroke()}),e&&e.length){r.font="11px sans-serif";var E=0;e.forEach(function(t){var e=r.measureText(t).width;e>E&&(E=e)});var L=d+u-E-24;e.forEach(function(t,e){var n=p+14+16*e;r.fillStyle=i[e%i.length],r.fillRect(L,n-4,14,3),r.fillStyle="#555",r.textAlign="left",r.fillText(t,L+18,n)})}r.fillStyle="#888",r.font="11px sans-serif",r.textAlign="center",r.textBaseline="top",r.fillText(n||"x",d+u/2,c-2),r.save(),r.translate(12,p+f/2),r.rotate(-Math.PI/2),r.textBaseline="middle",r.fillText(a||"y",0,0),r.restore()}function H(t){try{var n=e.compile(t);return{fn:function(t){return n.evaluate(t)},err:null}}catch(t){return{fn:null,err:t.message}}}function z(){var t=a("#odeExpr").value.trim();if(t){var e=H(t);if(e.err)s.innerHTML='<span style="color:#f56c6c">è¡¨è¾¾å¼é”™è¯¯: '+e.err+"</span>";else{var n=e.fn,l=parseFloat(a("#odeX0").value),i=parseFloat(a("#odeY0").value),o=parseFloat(a("#odeXend").value),r=parseFloat(a("#odeH").value),c=parseFloat(a("#odeTol").value)||1e-6;if([l,i,o,r].some(isNaN))s.innerHTML='<span style="color:#f56c6c">å‚æ•°æ— æ•ˆ</span>';else if(r<=0)s.innerHTML='<span style="color:#f56c6c">æ­¥é•¿å¿…é¡»ä¸ºæ­£</span>';else{var p=[];if(a("#odeMEuler").checked&&p.push("euler"),a("#odeMHeun").checked&&p.push("heun"),a("#odeMRK4").checked&&p.push("rk4"),a("#odeMImpl").checked&&p.push("implicit"),a("#odeMRK45").checked&&p.push("rk45"),p.length){var u=1e5,f=[],h=[],m=[],b=[];p.forEach(function(t){var e=[[l,i]],n=l,a=i;if("rk45"===t){for(var s=r,d=0,p=1e-10;n<o-p&&d<u;){n+s>o&&(s=o-n);var v=y(n,a),x=y(n+s/5,a+s*v/5),g=y(n+3*s/10,a+s*(3*v/40+9*x/40)),w=y(n+4*s/5,a+s*(44*v/45-56*x/15+32*g/9)),S=y(n+8*s/9,a+s*(19372*v/6561-25360*x/2187+64448*g/6561-212*w/729)),k=y(n+s,a+s*(9017*v/3168-355*x/33+46732*g/5247+49*w/176-5103*S/18656)),M=a+s*(35*v/384+500*g/1113+125*w/192-2187*S/6784+11*k/84),T=a+s*(5179*v/57600+7571*g/16695+393*w/640-92097*S/339200+187*k/2100+y(n+s,M)/40),C=Math.abs(M-T);if(!isFinite(M)){b.push("RK45: æ•°å€¼æº¢å‡ºäº x="+n.toFixed(6));break}(C<=c||s<=p)&&(n+=s,a=M,e.push([n,a]));var q=C>0?.84*s*Math.pow(c/C,.25):4*s;s=Math.max(p,Math.min(4*s,Math.max(.1*s,q))),d++}d>=u&&b.push("RK45: è¾¾åˆ°æœ€å¤§æ­¥æ•°")}else{var P=Math.ceil(Math.abs(o-l)/r);P>u&&(P=u);for(var E=0;E<P;E++){var L,F=n,A=a;if("euler"===t)L=A+r*y(F,A);else if("heun"===t){v=y(F,A),x=y(F+r,A+r*v);L=A+r*(v+x)/2}else if("rk4"===t){v=y(F,A),x=y(F+r/2,A+r*v/2),g=y(F+r/2,A+r*x/2),w=y(F+r,A+r*g);L=A+r*(v+2*x+2*g+w)/6}else if("implicit"===t){for(var R=F+r,N=A+r*y(F,A),H=!1,z=0;z<50;z++){var j=A+r*y(R,N);if(Math.abs(j-N)<1e-12){H=!0,N=j;break}N=j}H||b.push("éšå¼Euler: è¿­ä»£æœªæ”¶æ•›äº x="+(F+r).toFixed(6)),L=N}if(!isFinite(L)){b.push(t+": æ•°å€¼æº¢å‡ºäº x="+(F+r).toFixed(6));break}n=F+r,a=L,e.push([n,a])}}var D={euler:"Euler",heun:"Heun",rk4:"RK4",implicit:"éšå¼Euler",rk45:"RK45"}[t];f.push(e),h.push(D),m.push({name:D,pts:e})}),(v=function(){N(f,h,"x","y")})();var x=m.map(function(t){var e=t.pts[t.pts.length-1];return t.name+": "+t.pts.length+" ç‚¹, y("+e[0].toPrecision(5)+") = "+e[1].toPrecision(8)}).join("<br>");b.length&&(x+='<br><span style="color:#e6a23c">âš  '+b.join("<br>âš  ")+"</span>"),s.innerHTML=x,W(m,!1,0),d.style.display=""}else s.innerHTML='<span style="color:#f56c6c">è¯·è‡³å°‘é€‰æ‹©ä¸€ç§æ–¹æ³•</span>'}}}else s.innerHTML='<span style="color:#f56c6c">è¯·è¾“å…¥è¡¨è¾¾å¼</span>';function y(t,e){try{return n({x:t,y:e})}catch(t){return NaN}}}function j(t,e){for(var n={t:t},a=0;a<e.length;a++)n["y"+(a+1)]=e[a];return n}function D(t,e,n,a){for(var l=n.length,i=j(e,n),o=[],r=0;r<l;r++)o.push(n[r]+a*t[r](i));return o}function B(t,e,n,a){for(var l=n.length,i=j(e,n),o=[],r=0;r<l;r++)o.push(t[r](i));var s=[];for(r=0;r<l;r++)s.push(n[r]+a*o[r]);var c=j(e+a,s),d=[];for(r=0;r<l;r++)d.push(t[r](c));var p=[];for(r=0;r<l;r++)p.push(n[r]+a*(o[r]+d[r])/2);return p}function I(t,e,n,a){for(var l=n.length,i=[],o=[],r=[],s=[],c=j(e,n),d=0;d<l;d++)i.push(t[d](c));var p=[];for(d=0;d<l;d++)p.push(n[d]+a*i[d]/2);var u=j(e+a/2,p);for(d=0;d<l;d++)o.push(t[d](u));var f=[];for(d=0;d<l;d++)f.push(n[d]+a*o[d]/2);var v=j(e+a/2,f);for(d=0;d<l;d++)r.push(t[d](v));var h=[];for(d=0;d<l;d++)h.push(n[d]+a*r[d]);var m=j(e+a,h);for(d=0;d<l;d++)s.push(t[d](m));var b=[];for(d=0;d<l;d++)b.push(n[d]+a*(i[d]+2*o[d]+2*r[d]+s[d])/6);return b}function O(){var t=b.querySelectorAll(".ode-eq-row"),e=t.length;if(e<2)s.innerHTML='<span style="color:#f56c6c">è‡³å°‘éœ€è¦ 2 ä¸ªæ–¹ç¨‹</span>';else{for(var n=[],l=[],i=!0,o=0;o<e;o++){var r=t[o].querySelector(".ode-sys-f"),c=t[o].querySelector(".ode-sys-y0"),p=r.value.trim(),u=c.value.trim();if(!p){s.innerHTML='<span style="color:#f56c6c">æ–¹ç¨‹ '+(o+1)+" è¡¨è¾¾å¼ä¸ºç©º</span>",i=!1;break}var f=H(p);if(f.err){s.innerHTML='<span style="color:#f56c6c">f'+m(o+1)+" é”™è¯¯: "+f.err+"</span>",i=!1;break}var h=parseFloat(u);if(isNaN(h)){s.innerHTML='<span style="color:#f56c6c">y'+m(o+1)+"(0) æ— æ•ˆ</span>",i=!1;break}n.push(function(t){return function(e){try{return t(e)}catch(t){return NaN}}}(f.fn)),l.push(h)}if(i){var x=parseFloat(a("#odeSysT0").value),y=parseFloat(a("#odeSysTend").value),g=parseFloat(a("#odeSysH").value);if([x,y,g].some(isNaN))s.innerHTML='<span style="color:#f56c6c">å‚æ•°æ— æ•ˆ</span>';else if(g<=0)s.innerHTML='<span style="color:#f56c6c">æ­¥é•¿å¿…é¡»ä¸ºæ­£</span>';else{var w=[];if(a("#odeSysMEuler").checked&&w.push("euler"),a("#odeSysMHeun").checked&&w.push("heun"),a("#odeSysMRK4").checked&&w.push("rk4"),w.length){var S,k,M=a('input[name="odePlotMode"]:checked').value,T=a("#odePhaseX").value,C=a("#odePhaseY").value,q=parseInt(T.replace("y",""))-1,P=parseInt(C.replace("y",""))-1,E=2e5,L=[],F=[],A=[],R={euler:D,heun:B,rk4:I};w.forEach(function(t){for(var a=R[t],i=[],o=x,r=l.slice(),s={t:o},c=0;c<e;c++)s["y"+(c+1)]=r[c];i.push(s);var d=Math.ceil(Math.abs(y-x)/g);d>E&&(d=E);for(var p=!0,u=0;u<d&&p;u++){var f=a(n,o,r,g);for(c=0;c<e;c++)if(!isFinite(f[c])){p=!1;break}if(!p)break;r=f;var v={t:o+=g};for(c=0;c<e;c++)v["y"+(c+1)]=r[c];i.push(v)}var h={euler:"Euler",heun:"Heun",rk4:"RK4"}[t];if("time"===M)for(c=0;c<e;c++)L.push(i.map(function(t){return[t.t,t["y"+(c+1)]]})),F.push(h+" y"+m(c+1));else L.push(i.map(function(t){return[t["y"+(q+1)],t["y"+(P+1)]]})),F.push(h);A.push({name:h,pts:i,N:e})}),"time"===M?(S="t",k="y"):(S="y"+m(q+1),k="y"+m(P+1)),(v=function(){N(L,F,S,k)})();var z=A.map(function(t){for(var e=t.pts[t.pts.length-1],n=[],a=0;a<t.N;a++)n.push("y"+m(a+1)+"="+e["y"+(a+1)].toPrecision(6));return t.name+": "+t.pts.length+" ç‚¹, "+n.join(", ")}).join("<br>");s.innerHTML=z,W(A,!0,e),d.style.display=""}else s.innerHTML='<span style="color:#f56c6c">è¯·è‡³å°‘é€‰æ‹©ä¸€ç§æ–¹æ³•</span>'}}}}function W(t,e,n){var a="";t.forEach(function(t){var l,i=t.pts,o=i.length;if(l=o>50?i.slice(0,20).concat([null]).concat(i.slice(o-20)):i.slice(),a+='<div style="font-weight:700;margin:8px 0 4px">'+t.name+" ("+o+" ç‚¹)</div>",a+='<table style="width:100%;border-collapse:collapse;font-size:12px">',a+='<thead><tr style="position:sticky;top:0;background:var(--bg-zebra,#f9f9f9)">',e){a+='<th style="padding:4px 8px;border-bottom:2px solid #ddd;text-align:left">t</th>';for(var r=1;r<=n;r++)a+='<th style="padding:4px 8px;border-bottom:2px solid #ddd;text-align:left">y'+m(r)+"</th>"}else a+='<th style="padding:4px 8px;border-bottom:2px solid #ddd;text-align:left">x</th><th style="padding:4px 8px;border-bottom:2px solid #ddd;text-align:left">y</th>';a+="</tr></thead><tbody>";var s=e?n+1:2;l.forEach(function(t,l){if(t){var i=l%2?"background:var(--bg-zebra,#f9f9f9)":"";if(e){a+='<tr style="'+i+'"><td style="padding:3px 8px">'+t.t.toPrecision(6)+"</td>";for(var r=1;r<=n;r++)a+='<td style="padding:3px 8px">'+t["y"+r].toPrecision(8)+"</td>";a+="</tr>"}else a+='<tr style="'+i+'"><td style="padding:3px 8px">'+t[0].toPrecision(6)+"</td>",a+='<td style="padding:3px 8px">'+t[1].toPrecision(8)+"</td></tr>"}else a+='<tr><td colspan="'+s+'" style="text-align:center;padding:6px;color:#999">â€¦ çœç•¥ '+(o-40)+" è¡Œ â€¦</td></tr>"}),a+="</tbody></table>"}),c.innerHTML=a}l("[data-syspreset]").forEach(function(t){t.onclick=function(){var t=A[this.dataset.syspreset];M(t.eqs),a("#odeSysT0").value=t.t0,a("#odeSysTend").value=t.te,a("#odeSysH").value=t.h,"chaos"===this.dataset.syspreset&&(s.innerHTML='<span style="color:#e6a23c">æç¤ºï¼šæ··æ²Œæ‘†ç³»ç»Ÿï¼Œå°è¯•ç›¸ç©ºé—´ç»˜å›¾æŸ¥çœ‹å¸å¼•å­</span>'),O()}}),window.addEventListener("resize",function(){clearTimeout(F),F=setTimeout(function(){v&&v()},200)}),d.onclick=function(){var t="none"===c.style.display;c.style.display=t?"":"none",this.textContent=t?"éšè—æ•°æ®è¡¨":"æ˜¾ç¤ºæ•°æ®è¡¨"};var U={harmonic:{k2:"4*pi^2",s:"0",x0:"0",xe:"1",y0:"1",dy0:"0"},airy:{k2:"x",s:"0",x0:"0",xe:"10",y0:"0.355028",dy0:"-0.258819"},bessel:{k2:"1-1/(4*x^2)",s:"0",x0:"0.5",xe:"20",y0:"0.9385",dy0:"-0.2423"}};function _(){var t=a("#odeNK2").value.trim(),e=a("#odeNS").value.trim()||"0",n=parseFloat(a("#odeNX0").value),l=parseFloat(a("#odeNXend").value),i=parseFloat(a("#odeNY0").value),o=parseFloat(a("#odeNDY0").value),r=parseInt(a("#odeNN").value);if([n,l,i,o].some(isNaN))s.innerHTML='<span style="color:#f56c6c">å‚æ•°æ— æ•ˆ</span>';else{var c=H(t),p=H(e);if(c.err)s.innerHTML='<span style="color:#f56c6c">kÂ²è¡¨è¾¾å¼é”™è¯¯: '+c.err+"</span>";else if(p.err)s.innerHTML='<span style="color:#f56c6c">s(x)è¡¨è¾¾å¼é”™è¯¯: '+p.err+"</span>";else{for(var u=function(t,e,n,a,l,i,o){for(var r=(a-n)/l,s=new Array(l+1),c=new Array(l+1),d=0;d<=l;d++)s[d]=n+d*r;for(c[0]=i,c[1]=i+r*o+r*r/2*(e(s[0])-t(s[0])*i),d=2;d<=l;d++){var p=t(s[d-1]),u=t(s[d-2]),f=t(s[d]),v=e(s[d-1]),h=e(s[d-2]),m=e(s[d]);c[d]=(2*(1-5*r*r/12*p)*c[d-1]-(1+r*r/12*u)*c[d-2]+r*r/12*(m+10*v+h))/(1+r*r/12*f)}return{x:s,y:c}}(function(t){return c.fn({x:t})},function(t){return p.fn({x:t})},n,l,r,i,o),f=[],h=0;h<=r;h++)f.push([u.x[h],u.y[h]]);N([f],["Numerov"],"x","y(x)"),v=function(){N([f],["Numerov"],"x","y(x)")},s.innerHTML="Numerov æ±‚è§£å®Œæˆ | N="+r+" | h="+((l-n)/r).toExponential(3)+" | y("+l.toFixed(2)+")="+u.y[r].toFixed(8),W([{name:"Numerov",pts:f}],!1,0),d.style.display=""}}}l("[data-numpreset]").forEach(function(t){t.onclick=function(){var t=U[this.dataset.numpreset];a("#odeNK2").value=t.k2,a("#odeNS").value=t.s,a("#odeNX0").value=t.x0,a("#odeNXend").value=t.xe,a("#odeNY0").value=t.y0,a("#odeNDY0").value=t.dy0,_()}}),a("#odeNN").oninput=function(){a("#odeNNVal").textContent=this.value},a("#odeSolve").onclick=z,a("#odeSysSolve").onclick=O,a("#odeNSolve").onclick=_,t.addEventListener("keydown",function(t){"Enter"===t.key&&(t.preventDefault(),"none"!==p.style.display?z():"none"!==u.style.display?O():_())})}},{id:"password",name:"å¯†ç ç”Ÿæˆ",icon:"ğŸ”",cat:"productivity",desc:"CSPRNG çœŸéšæœº Â· å¯é€‰å­—ç¬¦é›†",html:()=>'<div style="font-size:.75em;color:#888;margin-bottom:10px">ğŸ”’ ä½¿ç”¨ <code>crypto.getRandomValues()</code>ï¼ŒåŸºäºæ“ä½œç³»ç»Ÿç†µæºçš„å¯†ç å­¦å®‰å…¨éšæœºï¼ˆCSPRNGï¼‰</div><div class="t-row"><span class="t-lbl">é•¿åº¦</span><input type="range" id="pwLen" min="4" max="64" value="16" style="width:150px"><span id="pwLenVal" style="font-size:.78em;color:#888">16</span></div><div style="display:flex;flex-wrap:wrap;gap:6px 14px;margin:8px 0"><label><input type="checkbox" id="pwUp" checked> A-Z</label><label><input type="checkbox" id="pwLo" checked> a-z</label><label><input type="checkbox" id="pwDig" checked> 0-9</label><label><input type="checkbox" id="pwSym" checked> !@#$...</label></div><div class="t-row" style="justify-content:center"><button class="t-btn t-btn-s" id="pwGen">ğŸ² ç”Ÿæˆå¯†ç </button></div><div style="margin-top:8px;font-family:monospace;font-size:1.1em;word-break:break-all;background:#252b3b;color:#7fefb0;padding:10px;border-radius:6px;min-height:30px;text-align:center;letter-spacing:1px" id="pwOut"></div><div style="margin-top:6px;display:flex;justify-content:space-between;align-items:center"><div id="pwStr" style="font-size:.78em;color:#888"></div><button class="t-btn t-btn-d" id="pwCopy" style="font-size:.75em">ğŸ“‹ å¤åˆ¶</button></div>',init(t){var e=t.querySelector("#pwLen"),n=t.querySelector("#pwLenVal");function a(){var n=[];if(t.querySelector("#pwUp").checked&&n.push("ABCDEFGHIJKLMNOPQRSTUVWXYZ"),t.querySelector("#pwLo").checked&&n.push("abcdefghijklmnopqrstuvwxyz"),t.querySelector("#pwDig").checked&&n.push("0123456789"),t.querySelector("#pwSym").checked&&n.push("!@#$%^&*()_+-=[]{}|;:,.<>?"),n.length){var a=n.join(""),l=+e.value;l<n.length&&(l=n.length);var i=new Uint32Array(l+l);crypto.getRandomValues(i);for(var o=[],r=0;r<n.length;r++)o.push(n[r][i[r]%n[r].length]);for(r=n.length;r<l;r++)o.push(a[i[r]%a.length]);for(r=o.length-1;r>0;r--){var s=i[l+r]%(r+1),c=o[r];o[r]=o[s],o[s]=c}t.querySelector("#pwOut").textContent=o.join("");var d=Math.log2(Math.pow(a.length,l)),p="";p=d<40?"âš ï¸ å¼± ("+d.toFixed(0)+" bit)":d<60?"ğŸ”¶ ä¸­ç­‰ ("+d.toFixed(0)+" bit)":d<80?"âœ… å¼º ("+d.toFixed(0)+" bit)":"ğŸ›¡ï¸ æå¼º ("+d.toFixed(0)+" bit)",t.querySelector("#pwStr").innerHTML=p}else t.querySelector("#pwOut").textContent="è¯·è‡³å°‘é€‰æ‹©ä¸€ç§å­—ç¬¦"}e.oninput=function(){n.textContent=e.value},t.querySelector("#pwGen").onclick=a,t.querySelector("#pwCopy").onclick=function(){var e=t.querySelector("#pwOut").textContent;e&&navigator.clipboard.writeText(e).then(function(){t.querySelector("#pwCopy").textContent="âœ“ å·²å¤åˆ¶",setTimeout(function(){t.querySelector("#pwCopy").textContent="ğŸ“‹ å¤åˆ¶"},1500)})},a()}},{id:"pde",name:"PDE æ±‚è§£",icon:"âˆ‡Â²",cat:"academic",desc:"æ¤­åœ† Â· æŠ›ç‰© Â· åŒæ›² Â· SOR Â· çƒ­åŠ›å›¾åŠ¨ç”»",html:()=>'<div class="t-row" id="pdeTabs" style="margin-bottom:8px"><button class="t-btn" data-tab="elliptic" style="font-weight:700">æ¤­åœ†å‹</button><button class="t-btn t-btn-o" data-tab="parabolic">æŠ›ç‰©å‹</button><button class="t-btn t-btn-o" data-tab="hyperbolic">åŒæ›²å‹</button></div><div id="pdeElliptic"><div class="t-row"><label class="t-lbl">æºé¡¹ f(x,y)</label><input class="t-in" id="pdeFExpr" value="0" placeholder="0 = Laplace"></div><div class="t-row"><label class="t-lbl">åŸŸ LxÃ—Ly</label><input class="t-in" id="pdeLx" value="1" style="width:60px"> Ã— <input class="t-in" id="pdeLy" value="1" style="width:60px"></div><div class="t-row"><label class="t-lbl">ç½‘æ ¼ N=<span id="pdeNVal">40</span></label><input type="range" id="pdeN" min="10" max="200" value="40" style="flex:1"></div><div class="t-row"><label class="t-lbl">è¾¹ç•Œ(Dirichlet)</label>ä¸Š<input class="t-in" id="pdeBT" value="100" style="width:50px"> ä¸‹<input class="t-in" id="pdeBB" value="0" style="width:50px"> å·¦<input class="t-in" id="pdeBL" value="0" style="width:50px"> å³<input class="t-in" id="pdeBR" value="0" style="width:50px"></div><div class="t-row"><label class="t-lbl">æ–¹æ³•</label><label><input type="radio" name="pdeMethod" value="jacobi" checked> Jacobi</label> <label><input type="radio" name="pdeMethod" value="gs"> Gauss-Seidel</label> <label><input type="radio" name="pdeMethod" value="sor"> SOR</label></div><div class="t-row" id="pdeSorRow" style="display:none"><label class="t-lbl">Ï‰=<span id="pdeOmVal">1.50</span></label><input type="range" id="pdeOmega" min="100" max="200" value="150" style="flex:1"></div><div class="t-row"><label class="t-lbl">æœ€å¤§è¿­ä»£</label><input class="t-in" id="pdeMaxIt" value="10000" style="width:80px"> <label class="t-lbl">å®¹å·®</label><input class="t-in" id="pdeTol" value="1e-6" style="width:80px"></div><div class="t-row"><button class="t-btn" id="pdeSolveE">æ±‚è§£</button><button class="t-btn t-btn-o" id="pdePreE1">çƒ­æ¿</button><button class="t-btn t-btn-o" id="pdePreE2">å¯¹è§’åŠ çƒ­</button></div><div id="pdeEInfo" class="t-res" style="display:none"></div><canvas class="t-cv" id="pdeHeat" style="width:100%;max-width:450px;height:300px;display:none"></canvas><canvas class="t-cv" id="pdeConv" style="width:100%;max-width:450px;height:150px;display:none"></canvas></div><div id="pdeParabolic" style="display:none"><div class="t-row"><label class="t-lbl">æ‰©æ•£ç³»æ•° Î±</label><input class="t-in" id="pdeAlpha" value="0.01" style="width:80px"> <label class="t-lbl">åŸŸ</label><input class="t-in" id="pdePLx" value="1" style="width:50px">Ã—<input class="t-in" id="pdePLy" value="1" style="width:50px"></div><div class="t-row"><label class="t-lbl">ç½‘æ ¼ N=<span id="pdePNVal">30</span></label><input type="range" id="pdePNN" min="10" max="150" value="30" style="flex:1"></div><div class="t-row"><label class="t-lbl">åˆå§‹æ¡ä»¶</label><select class="t-sel" id="pdeIC"><option value="gauss">ä¸­å¿ƒçƒ­æ–‘</option><option value="step">å·¦çƒ­å³å†·</option></select></div><div class="t-row"><label class="t-lbl">è¾¹ç•Œ</label>ä¸Š<input class="t-in" id="pdePBT" value="0" style="width:45px"> ä¸‹<input class="t-in" id="pdePBB" value="0" style="width:45px"> å·¦<input class="t-in" id="pdePBL" value="0" style="width:45px"> å³<input class="t-in" id="pdePBR" value="0" style="width:45px"></div><div class="t-row"><label class="t-lbl">æ–¹æ³•</label><label><input type="radio" name="pdePMethod" value="ftcs" checked> FTCS</label> <label><input type="radio" name="pdePMethod" value="cn"> Crank-Nicolson</label></div><div class="t-row"><label class="t-lbl">dt</label><input class="t-in" id="pdeDt" value="0.0001" style="width:80px"> <label class="t-lbl">æ€»æ—¶é—´ T</label><input class="t-in" id="pdeTT" value="0.5" style="width:80px"></div><div id="pdeCFL" style="display:none;color:#e6a23c;font-size:12px;margin:4px 0"></div><div class="t-row" style="flex-wrap:wrap"><button class="t-btn" id="pdePPlay">â–¶ Play</button><button class="t-btn t-btn-o" id="pdePPause" disabled>â¸</button><button class="t-btn t-btn-o" id="pdePReset">Reset</button></div><div id="pdePInfo" class="t-res" style="display:none"></div><canvas class="t-cv" id="pdePHeat" style="width:100%;max-width:450px;height:300px;display:none"></canvas></div><div id="pdeHyperbolic" style="display:none"><div class="t-row"><label class="t-lbl">æ³¢é€Ÿ c</label><input class="t-in" id="pdeC" value="1.0" style="width:80px"> <label class="t-lbl">åŸŸ</label><input class="t-in" id="pdeHLx" value="1" style="width:50px">Ã—<input class="t-in" id="pdeHLy" value="1" style="width:50px"></div><div class="t-row"><label class="t-lbl">ç½‘æ ¼ N=<span id="pdeHNVal">30</span></label><input type="range" id="pdeHNN" min="10" max="150" value="30" style="flex:1"></div><div class="t-row"><label class="t-lbl">åˆå§‹ä½ç§»</label><select class="t-sel" id="pdeHIC"><option value="center">ä¸­å¿ƒè„‰å†²</option><option value="corner">è§’è„‰å†²</option></select></div><div class="t-row"><label class="t-lbl">dt</label><input class="t-in" id="pdeHDt" value="0.001" style="width:80px"> <label class="t-lbl">æ€»æ—¶é—´ T</label><input class="t-in" id="pdeHT" value="2.0" style="width:80px"></div><div id="pdeHCFL" style="display:none;color:#e6a23c;font-size:12px;margin:4px 0"></div><div class="t-row" style="flex-wrap:wrap"><button class="t-btn" id="pdeHPlay">â–¶ Play</button><button class="t-btn t-btn-o" id="pdeHPause" disabled>â¸</button><button class="t-btn t-btn-o" id="pdeHReset">Reset</button></div><div id="pdeHInfo" class="t-res" style="display:none"></div><canvas class="t-cv" id="pdeHHeat" style="width:100%;max-width:450px;height:300px;display:none"></canvas></div>',async init(t){var e=function(e){return t.querySelector(e)},a=function(e){return t.querySelectorAll(e)},l=getComputedStyle(document.documentElement),i=l.getPropertyValue("--accent").trim()||"#5B8BA4",o=l.getPropertyValue("--font-color-1").trim()||"#333",r=l.getPropertyValue("--font-color-3").trim()||"#999",s=l.getPropertyValue("--border-warm").trim()||"#ccc",c=null,d=null,p=!1;function u(){p=!1,c&&(cancelAnimationFrame(c),c=null),d&&(clearTimeout(d),d=null)}function f(t){var e,n,a;return t<.25?(e=0,n=Math.round(255*t*4),a=255):t<.5?(e=0,n=255,a=Math.round(255*(1-4*(t-.25)))):t<.75?(e=Math.round(255*(t-.5)*4),n=255,a=0):(e=255,n=Math.round(255*(1-4*(t-.75))),a=0),[e,n,a]}function v(t,e,n){var a=window.devicePixelRatio||1;return t.width=e*a,t.height=n*a,t.style.width=e+"px",t.style.height=n+"px",a}function h(t,e,n,a,l){var i=window.devicePixelRatio||1,r=t.getContext("2d"),s=t.width,c=t.height,d=s/i-60,p=c/i,u=document.createElement("canvas");u.width=n,u.height=n;for(var v=u.getContext("2d"),h=v.createImageData(n,n),m=l-a||1,b=0;b<n;b++)for(var x=0;x<n;x++){var y=(e[b][x]-a)/m,g=f(y=Math.max(0,Math.min(1,y))),w=4*(b*n+x);h.data[w]=g[0],h.data[w+1]=g[1],h.data[w+2]=g[2],h.data[w+3]=255}v.putImageData(h,0,0),r.setTransform(i,0,0,i,0,0),r.clearRect(0,0,s/i,c/i),r.imageSmoothingEnabled=!1,r.drawImage(u,0,0,d,p),function(t,e,n,a,l,i,r){for(var s=0;s<l;s++){var c=f(1-s/l);t.fillStyle="rgb("+c[0]+","+c[1]+","+c[2]+")",t.fillRect(e,n+s,a-15,1)}t.fillStyle=o,t.font="11px sans-serif",t.textAlign="left",t.fillText(r.toPrecision(3),e+a-14,n+10),t.fillText(i.toPrecision(3),e+a-14,n+l-2),t.fillText(((i+r)/2).toPrecision(3),e+a-14,n+l/2+4)}(r,d+5,0,55,p,a,l)}function m(t,e){for(var n=[],a=0;a<t;a++){for(var l=[],i=0;i<t;i++)l.push(e);n.push(l)}return n}function b(t){for(var e=[],n=0;n<t.length;n++)e.push(t[n].slice());return e}function x(t,e){for(var n=1/0,a=-1/0,l=0;l<e;l++)for(var i=0;i<e;i++)t[l][i]<n&&(n=t[l][i]),t[l][i]>a&&(a=t[l][i]);return[n,a]}t._cleanup=function(){u()};var y=a("#pdeTabs button"),g={elliptic:e("#pdeElliptic"),parabolic:e("#pdeParabolic"),hyperbolic:e("#pdeHyperbolic")};function w(t){u();for(var e=0;e<y.length;e++){var n=y[e];n.dataset.tab===t?(n.style.fontWeight="700",n.className="t-btn"):(n.style.fontWeight="",n.className="t-btn t-btn-o")}for(var a in g)g[a].style.display=a===t?"":"none"}for(var S=0;S<y.length;S++)y[S].addEventListener("click",function(){w(this.dataset.tab)});var k=e("#pdeN"),M=e("#pdeNVal");k.addEventListener("input",function(){M.textContent=this.value});var T=e("#pdeOmega"),C=e("#pdeOmVal"),q=e("#pdeSorRow");T.addEventListener("input",function(){C.textContent=(this.value/100).toFixed(2)});var P=a('input[name="pdeMethod"]');for(S=0;S<P.length;S++)P[S].addEventListener("change",function(){q.style.display="sor"===this.value?"flex":"none"});e("#pdePreE1").addEventListener("click",function(){e("#pdeBT").value="100",e("#pdeBB").value="0",e("#pdeBL").value="0",e("#pdeBR").value="0",e("#pdeFExpr").value="0"}),e("#pdePreE2").addEventListener("click",function(){e("#pdeBT").value="100",e("#pdeBB").value="0",e("#pdeBL").value="0",e("#pdeBR").value="50",e("#pdeFExpr").value="0"}),e("#pdeSolveE").addEventListener("click",async function(){u();for(var a=parseInt(k.value),l=parseFloat(e("#pdeLx").value)||1,o=parseFloat(e("#pdeLy").value)||1,c=parseFloat(e("#pdeBT").value)||0,p=parseFloat(e("#pdeBB").value)||0,f=parseFloat(e("#pdeBL").value)||0,y=parseFloat(e("#pdeBR").value)||0,g=l/(a-1),w=o/(a-1),S=g*g,M=w*w,C=2/S+2/M,q=parseInt(e("#pdeMaxIt").value)||1e4,E=parseFloat(e("#pdeTol").value)||1e-6,L="jacobi",F=0;F<P.length;F++)P[F].checked&&(L=P[F].value);var A=parseFloat(T.value)/100,R=e("#pdeFExpr").value.trim(),N=null;if(R&&"0"!==R)try{var H=(await n()).parse(R).compile();N=function(t,e){return H.evaluate({x:t,y:e})}}catch(t){return e("#pdeEInfo").style.display="block",void(e("#pdeEInfo").innerHTML='<span style="color:#f56c6c">è¡¨è¾¾å¼é”™è¯¯: '+t.message+"</span>")}var z=m(a,0);for(F=0;F<a;F++)z[0][F]=c,z[a-1][F]=p,z[F][0]=f,z[F][a-1]=y;var j=e("#pdeHeat"),D=e("#pdeConv");j.style.display="block",D.style.display="block";v(j,Math.min(450,t.clientWidth-20),300);v(D,Math.min(450,t.clientWidth-20),150);var B=e("#pdeEInfo");B.style.display="block",B.textContent="æ±‚è§£ä¸­...";var I=performance.now(),O=[],W=a<=50?q:500,U=0,_=!1;!function t(){for(var e=Math.min(U+W,q);U<e;U++){var n=0;if("jacobi"===L){for(var l=b(z),o=1;o<a-1;o++)for(var c=1;c<a-1;c++){var p=N?N(c*g,o*w):0;l[o][c]=((z[o][c-1]+z[o][c+1])/S+(z[o-1][c]+z[o+1][c])/M-p)/C,(u=Math.abs(l[o][c]-z[o][c]))>n&&(n=u)}z=l}else for(o=1;o<a-1;o++)for(c=1;c<a-1;c++){p=N?N(c*g,o*w):0;var u,f=((z[o][c-1]+z[o][c+1])/S+(z[o-1][c]+z[o+1][c])/M-p)/C,v="sor"===L?(1-A)*z[o][c]+A*f:f;(u=Math.abs(v-z[o][c]))>n&&(n=u),z[o][c]=v}if(U%50==0&&O.push(n),n<E){_=!0,O.push(n);break}}var m=x(z,a);h(j,z,a,m[0],m[1]),function(t,e){var n=window.devicePixelRatio||1,a=t.getContext("2d"),l=t.width/n,o=t.height/n;if(a.setTransform(n,0,0,n,0,0),a.clearRect(0,0,l,o),!(e.length<2)){for(var c=40,d=l-c-10,p=o-c-10,u=[],f=0;f<e.length;f++){var v=e[f]>0?Math.log10(e[f]):-16;u.push(v)}var h=u[u.length-1],m=u[0];h>=m&&(m=h+1),a.strokeStyle=s,a.lineWidth=.5,a.beginPath(),a.moveTo(c,5),a.lineTo(c,o-c),a.lineTo(l-5,o-c),a.stroke(),a.fillStyle=r,a.font="10px sans-serif",a.textAlign="right";for(var b=0;b<=4;b++){var x=m+(h-m)*b/4,y=5+p*b/4;a.fillText(x.toFixed(1),37,y+3),a.beginPath(),a.moveTo(c,y),a.lineTo(l-5,y),a.stroke()}a.textAlign="center",a.fillText("0",c,o-c+12),a.fillText(""+(e.length-1),l-5,o-c+12),a.strokeStyle=i,a.lineWidth=1.5,a.beginPath();var g=Math.max(1,Math.floor(u.length/d));for(f=0;f<u.length;f+=g){var w=c+d*f/(u.length-1);y=5+p*(u[f]-m)/(h-m),0===f?a.moveTo(w,y):a.lineTo(w,y)}a.stroke()}}(D,O);var y=(performance.now()-I).toFixed(1);if(_||U>=q){var k=O[O.length-1];B.innerHTML=(_?'<span style="color:#67c23a">æ”¶æ•›</span>':'<span style="color:#e6a23c">æœªæ”¶æ•›</span>')+" | è¿­ä»£: "+U+" | æ®‹å·®: "+k.toExponential(2)+" | è€—æ—¶: "+y+"ms"}else B.textContent="è¿­ä»£: "+U+"/"+q+" ...",d=setTimeout(t,0)}()});var E=e("#pdePNN"),L=e("#pdePNVal");function F(t,e,n,a,l,i){for(var o=0;o<e;o++)t[0][o]=n,t[e-1][o]=a;for(var r=0;r<e;r++)t[r][0]=l,t[r][e-1]=i}function A(){var t=parseFloat(e("#pdeAlpha").value)||.01,n=parseInt(E.value),a=(parseFloat(e("#pdePLx").value)||1)/(n-1),l=t*(parseFloat(e("#pdeDt").value)||1e-4)/(a*a),i=e("#pdeCFL");l>.25?(i.style.display="block",i.style.color="#e6a23c",i.textContent="âš  CFL: r=Î±Â·dt/hÂ²="+l.toFixed(4)+" > 0.25ï¼ŒFTCS å¯èƒ½ä¸ç¨³å®š"):(i.style.display="block",i.style.color="#67c23a",i.textContent="CFL: r="+l.toFixed(4)+" â‰¤ 0.25 âœ“")}E.addEventListener("input",function(){L.textContent=this.value}),e("#pdeAlpha").addEventListener("input",A),e("#pdeDt").addEventListener("input",A),E.addEventListener("input",function(){L.textContent=this.value,A()});var R={u:null,t:0,cMin:0,cMax:100};function N(){u();var n=parseInt(E.value),a=parseFloat(e("#pdePLx").value)||1,l=parseFloat(e("#pdePLy").value)||1,i=e("#pdeIC").value;R.u=function(t,e,n,a){for(var l=m(t,0),i=e/(t-1),o=n/(t-1),r=1;r<t-1;r++)for(var s=1;s<t-1;s++){var c=s*i,d=r*o;"gauss"===a?l[r][s]=100*Math.exp(-((c-e/2)*(c-e/2)+(d-n/2)*(d-n/2))/.04):"step"===a&&(l[r][s]=c<.3*e?100:0)}return l}(n,a,l,i);var o=parseFloat(e("#pdePBT").value)||0,r=parseFloat(e("#pdePBB").value)||0,s=parseFloat(e("#pdePBL").value)||0,c=parseFloat(e("#pdePBR").value)||0;F(R.u,n,o,r,s,c),R.t=0;var d=x(R.u,n);R.cMin=d[0],R.cMax=d[1];var p=e("#pdePHeat");p.style.display="block",v(p,Math.min(450,t.clientWidth-20),300),h(p,R.u,n,R.cMin,R.cMax);var f=e("#pdePInfo");f.style.display="block",f.textContent="t=0.000",e("#pdePPlay").disabled=!1,e("#pdePPause").disabled=!0,A()}function H(t,e,n,a,l){for(var i=n*a/(l*l),o=b(t),r=1;r<e-1;r++)for(var s=1;s<e-1;s++)o[r][s]=t[r][s]+i*(t[r-1][s]+t[r+1][s]+t[r][s-1]+t[r][s+1]-4*t[r][s]);return o}function z(t,e,n,a,l){for(var i=n*a/(2*l*l),o=b(t),r=1+4*i,s=0;s<200;s++){for(var c=b(o),d=0,p=1;p<e-1;p++)for(var u=1;u<e-1;u++){var f=t[p-1][u]+t[p+1][u]+t[p][u-1]+t[p][u+1]-4*t[p][u],v=c[p-1][u]+c[p+1][u]+c[p][u-1]+c[p][u+1],h=(t[p][u]+i*f+i*v)/r,m=Math.abs(h-o[p][u]);m>d&&(d=m),o[p][u]=h}if(d<1e-8)break}return o}e("#pdePPlay").addEventListener("click",function(){(!R.u||R.t>=parseFloat(e("#pdeTT").value))&&N(),e("#pdePPlay").textContent="â–¶ Play",function(){for(var t=parseInt(E.value),n=parseFloat(e("#pdeAlpha").value)||.01,l=(parseFloat(e("#pdePLx").value)||1)/(t-1),i=parseFloat(e("#pdeDt").value)||1e-4,o=parseFloat(e("#pdeTT").value)||.5,r="ftcs",s=a('input[name="pdePMethod"]'),d=0;d<s.length;d++)s[d].checked&&(r=s[d].value);var u=parseFloat(e("#pdePBT").value)||0,f=parseFloat(e("#pdePBB").value)||0,v=parseFloat(e("#pdePBL").value)||0,m=parseFloat(e("#pdePBR").value)||0,b=Math.max(1,Math.min(20,Math.round(.005/i))),y=e("#pdePHeat"),g=e("#pdePInfo");p=!0,e("#pdePPlay").disabled=!0,e("#pdePPause").disabled=!1,function a(){if(p){for(var s=0;s<b&&R.t<o;s++)R.u="ftcs"===r?H(R.u,t,n,i,l):z(R.u,t,n,i,l),F(R.u,t,u,f,v,m),R.t+=i;if(x(R.u,t),h(y,R.u,t,R.cMin,R.cMax),g.textContent="t="+R.t.toFixed(4)+" / "+o,R.t>=o)return p=!1,e("#pdePPlay").disabled=!1,e("#pdePPause").disabled=!0,e("#pdePPlay").textContent="â–¶ Replay",void(g.textContent="å®Œæˆ t="+o);c=requestAnimationFrame(a)}}()}()}),e("#pdePPause").addEventListener("click",function(){u(),e("#pdePPlay").disabled=!1,e("#pdePPause").disabled=!0}),e("#pdePReset").addEventListener("click",N);var j=e("#pdeHNN"),D=e("#pdeHNVal");function B(){var t=parseFloat(e("#pdeC").value)||1,n=parseInt(j.value),a=(parseFloat(e("#pdeHLx").value)||1)/(n-1),l=t*(parseFloat(e("#pdeHDt").value)||.001)/a,i=1/Math.sqrt(2),o=e("#pdeHCFL");l>i?(o.style.display="block",o.style.color="#e6a23c",o.textContent="âš  CFL: cÂ·dt/h="+l.toFixed(4)+" > 1/âˆš2â‰ˆ"+i.toFixed(4)+"ï¼Œä¸ç¨³å®š"):(o.style.display="block",o.style.color="#67c23a",o.textContent="CFL: cÂ·dt/h="+l.toFixed(4)+" â‰¤ 1/âˆš2 âœ“")}j.addEventListener("input",function(){D.textContent=this.value}),e("#pdeC").addEventListener("input",B),e("#pdeHDt").addEventListener("input",B),j.addEventListener("input",function(){D.textContent=this.value,B()});var I={u:null,uPrev:null,t:0};function O(){u();var n=parseInt(j.value),a=parseFloat(e("#pdeHLx").value)||1,l=parseFloat(e("#pdeHLy").value)||1,i=e("#pdeHIC").value,o=parseFloat(e("#pdeC").value)||1,r=parseFloat(e("#pdeHDt").value)||.001,s=a/(n-1),c=o*r/s*(o*r/s);I.u=function(t,e,n,a){for(var l=m(t,0),i=e/(t-1),o=n/(t-1),r=1;r<t-1;r++)for(var s=1;s<t-1;s++){var c=s*i,d=r*o;l[r][s]="center"===a?Math.exp(-((c-e/2)*(c-e/2)+(d-n/2)*(d-n/2))/.005):Math.exp(-((c-.1*e)*(c-.1*e)+(d-.1*n)*(d-.1*n))/.005)}return l}(n,a,l,i);for(var d=m(n,0),p=1;p<n-1;p++)for(var f=1;f<n-1;f++){var b=I.u[p-1][f]+I.u[p+1][f]+I.u[p][f-1]+I.u[p][f+1]-4*I.u[p][f];d[p][f]=I.u[p][f]+.5*c*b}I.uPrev=I.u,I.u=d,I.t=r;var y=e("#pdeHHeat");y.style.display="block",v(y,Math.min(450,t.clientWidth-20),300);var g=x(I.u,n);h(y,I.u,n,g[0],g[1]);var w=e("#pdeHInfo");w.style.display="block",w.textContent="t=0.000",e("#pdeHPlay").disabled=!1,e("#pdeHPause").disabled=!0,B()}e("#pdeHPlay").addEventListener("click",function(){(!I.u||I.t>=parseFloat(e("#pdeHT").value))&&O(),e("#pdeHPlay").textContent="â–¶ Play",function(){var t=parseInt(j.value),n=parseFloat(e("#pdeC").value)||1,a=(parseFloat(e("#pdeHLx").value)||1)/(t-1),l=parseFloat(e("#pdeHDt").value)||.001,i=parseFloat(e("#pdeHT").value)||2,o=n*l/a*(n*l/a),r=Math.max(1,Math.min(20,Math.round(.01/l))),s=e("#pdeHHeat"),d=e("#pdeHInfo");p=!0,e("#pdeHPlay").disabled=!0,e("#pdeHPause").disabled=!1;var u=1/0,f=-1/0,v=x(I.u,t);u=v[0],f=v[1],function n(){if(p){for(var a=0;a<r&&I.t<i;a++){for(var v=m(t,0),b=1;b<t-1;b++)for(var y=1;y<t-1;y++){var g=I.u[b-1][y]+I.u[b+1][y]+I.u[b][y-1]+I.u[b][y+1]-4*I.u[b][y];v[b][y]=2*I.u[b][y]-I.uPrev[b][y]+o*g}I.uPrev=I.u,I.u=v,I.t+=l}var w=x(I.u,t);if(w[0]<u&&(u=w[0]),w[1]>f&&(f=w[1]),h(s,I.u,t,u,f),d.textContent="t="+I.t.toFixed(4)+" / "+i,I.t>=i)return p=!1,e("#pdeHPlay").disabled=!1,e("#pdeHPause").disabled=!0,e("#pdeHPlay").textContent="â–¶ Replay",void(d.textContent="å®Œæˆ t="+i.toFixed(3));c=requestAnimationFrame(n)}}()}()}),e("#pdeHPause").addEventListener("click",function(){u(),e("#pdeHPlay").disabled=!1,e("#pdeHPause").disabled=!0}),e("#pdeHReset").addEventListener("click",O),A(),B()}},{id:"periodic",name:"å…ƒç´ å‘¨æœŸè¡¨",icon:"âš›ï¸",cat:"academic",desc:"äº¤äº’å¼ Â· è¯¦å°½å…ƒç´ ä¿¡æ¯",html(){let t='<div style="overflow-x:auto"><div class="pt-grid">';return h.forEach(e=>{e.forEach(e=>{if(0===e)t+='<div class="pt-empty"></div>';else if(e<0)t+='<div class="pt-marker">'+(-1===e?"La-Lu":-2===e?"Ac-Lr":-3===e?"é•§ç³»â–¶":"é”•ç³»â–¶")+"</div>";else{const n=m(e);t+='<div class="pt-cell" data-z="'+e+'" style="background:'+n+"22;border-color:"+n+'"><span class="n">'+e+'</span><span class="s">'+r[e-1]+"</span></div>"}})}),t+'</div></div><div id="ptInfo" class="t-res" style="margin-top:8px;min-height:80px;line-height:1.8">ğŸ‘† ç‚¹å‡»ä»»æ„å…ƒç´ æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯</div>'},init(t){t.querySelectorAll(".pt-cell[data-z]").forEach(e=>{e.onclick=()=>{const n=+e.dataset.z,a=n-1,l=p[a],i=u[a],o=f[a],h=v[a];let b='<div style="display:flex;align-items:center;gap:12px;margin-bottom:8px"><span style="font-size:2.2em;font-weight:700;color:'+m(n)+'">'+r[a]+'</span><div><b style="font-size:1.1em">'+s[a]+"</b> ("+r[a]+')<br><span style="color:#888;font-size:.82em">åŸå­åºæ•° '+n+" Â· "+function(t){return[3,11,19,37,55,87].includes(t)?"ç¢±é‡‘å±":[4,12,20,38,56,88].includes(t)?"ç¢±åœŸé‡‘å±":[9,17,35,53,85,117].includes(t)?"å¤ç´ ":[2,10,18,36,54,86,118].includes(t)?"ç¨€æœ‰æ°”ä½“":[5,14,32,33,51,52].includes(t)?"ç±»é‡‘å±":[1,6,7,8,15,16,34].includes(t)?"éé‡‘å±":t>=57&&t<=71?"é•§ç³»å…ƒç´ ":t>=89&&t<=103?"é”•ç³»å…ƒç´ ":t>=21&&t<=30||t>=39&&t<=48||t>=72&&t<=80||t>=104&&t<=112?"è¿‡æ¸¡é‡‘å±":"ä¸»æ—é‡‘å±"}(n)+"</span></div></div>";b+='<table style="width:100%;font-size:.82em;border-collapse:collapse">',b+='<tr><td style="padding:4px 8px;color:#888">ç›¸å¯¹åŸå­è´¨é‡</td><td><b>'+c[a]+"</b></td>",b+='<td style="padding:4px 8px;color:#888">ç”µå­æ„å‹</td><td><b>'+d[a]+"</b></td></tr>",b+='<tr><td style="padding:4px 8px;color:#888">ç†”ç‚¹</td><td>'+(-9999===l?"æœªçŸ¥":l+" Â°C")+"</td>",b+='<td style="padding:4px 8px;color:#888">æ²¸ç‚¹</td><td>'+(-9999===i?"æœªçŸ¥":i+" Â°C")+"</td></tr>",b+='<tr><td style="padding:4px 8px;color:#888">å¯†åº¦</td><td>'+(h?h+" g/cmÂ³":"æœªçŸ¥")+"</td>",b+='<td style="padding:4px 8px;color:#888">ç”µè´Ÿæ€§</td><td>'+(o?o+" (Pauling)":"N/A")+"</td></tr>",b+="</table>",t.querySelector("#ptInfo").innerHTML=b}})}},{id:"plotter",name:"å‡½æ•°ç»˜å›¾",icon:"ğŸ“ˆ",cat:"academic",desc:"é«˜æ¸… Â· ä¸‰ç§åæ ‡ Â· å¤šå‚æ•° Â· åˆ†æ®µå‡½æ•° Â· æè¿¹åŠ¨ç”»",html:()=>'<style>.pk{display:flex;flex-wrap:wrap;gap:3px;margin:4px 0;justify-content:center}.pk button{background:#f5f7fa;border:1px solid #e4e7ed;border-radius:4px;padding:2px 7px;cursor:pointer;font-size:.72em;font-family:inherit;transition:.15s;color:#606266}.pk button:hover{border-color:#409eff;color:#409eff;background:#ecf5ff}.psl-row{display:flex;gap:4px;align-items:center;margin-bottom:4px;background:#f8f9fa;border-radius:6px;padding:4px 8px}.psl-row select{border:1px solid #ddd;border-radius:4px;padding:2px 4px;font-size:.78em;background:#fff;font-family:inherit}.psl-row input[type=range]{flex:1;min-width:50px}@media (max-width:640px){.psl-row{flex-wrap:wrap;gap:6px}.psl-row select{width:60px}.psl-row input[type=range]{order:10;width:100%;min-width:100%}.psl-row .pvl{order:11}.psl-row .pani{order:12}.psl-row .pdel{order:13}}</style><div class="t-row" style="gap:6px;flex-wrap:wrap;justify-content:center"><button class="t-btn t-btn-o plot-mode active" data-m="cart" style="font-weight:700">ç›´è§’åæ ‡</button><button class="t-btn t-btn-o plot-mode" data-m="polar">æåæ ‡ r(Î¸)</button><button class="t-btn t-btn-o plot-mode" data-m="param">å‚æ•°æ–¹ç¨‹</button></div><div class="pk" id="plotKb"></div><div id="plotCartIn"><div class="t-row"><input class="t-in plot-fin" id="plotExpr" placeholder="y = f(x)ï¼Œåˆ†å·åˆ†éš”" value="sin(a*x); x^2; x>0 ? exp(-x) : 0" style="flex:1"><button class="t-btn" id="plotDraw">ç»˜åˆ¶</button></div></div><div id="plotPolarIn" style="display:none"><div class="t-row"><input class="t-in plot-fin" id="plotPolar" placeholder="r = f(Î¸)ï¼ŒÎ¸ç”¨tï¼Œåˆ†å·åˆ†éš”" value="2+cos(a*5*t); a+sin(2*t)" style="flex:1"><button class="t-btn" id="plotDrawP">ç»˜åˆ¶</button></div></div><div id="plotParamIn" style="display:none"><div class="t-row"><input class="t-in plot-fin" id="plotParam" placeholder="x(t), y(t) é€—å·åˆ†éš”ï¼Œåˆ†å·å¤šç»„" value="a*cos(t), a*sin(t); 2*cos(t)+cos(a*t), 2*sin(t)-sin(a*t)" style="flex:1"><button class="t-btn" id="plotDrawPm">ç»˜åˆ¶</button></div><div class="t-row" style="gap:6px"><span class="t-lbl" style="white-space:nowrap">t èŒƒå›´</span><input class="t-in" id="plotTmin" value="-6.28" style="width:55px"><span>~</span><input class="t-in" id="plotTmax" value="6.28" style="width:55px"><label style="font-size:.78em;white-space:nowrap"><input type="checkbox" id="plotTrace"> ğŸ–Šï¸ æè¿¹</label></div></div><fieldset style="border:1px solid #e8e8e8;border-radius:8px;padding:6px 10px;margin:4px 0"><legend style="font-size:.72em;color:#888;padding:0 4px">å‚æ•°</legend><div id="plotSliders"></div><button class="t-btn t-btn-d" id="plotAddParam" style="font-size:.68em;padding:3px 10px;margin-top:2px">+ æ·»åŠ </button></fieldset><div style="position:relative;margin-top:4px"><canvas id="plotCv" style="width:100%;height:340px;background:#fafafa;border-radius:8px;display:block;cursor:crosshair;border:1px solid #eee"></canvas><div id="plotCoord" style="position:absolute;top:6px;right:8px;font-size:.72em;color:#888;pointer-events:none"></div></div><div class="t-row" style="gap:8px;margin-top:4px;justify-content:center"><button class="t-btn t-btn-d" id="plotReset" style="font-size:.72em">â†º å¤ä½</button><button class="t-btn t-btn-d" id="plotExport" style="font-size:.72em">ğŸ“¥ PNG</button></div><div style="font-size:.65em;color:#bbb;margin-top:2px;text-align:center">^ = å¹‚ Â· åˆ†æ®µ: x>0?f(x):g(x) Â· æ»šè½®ç¼©æ”¾ Â· æ‹–æ‹½å¹³ç§» Â· åŠ¨ç”»æˆ–å¤§é‡æ›²çº¿å¯èƒ½å¡é¡¿</div>',init(t){var e=t.querySelector("#plotCv"),n=e.getContext("2d"),a=window.devicePixelRatio||1,l=50,i=0,o=0,r=0,s=0,c=["#409eff","#f56c6c","#67c23a","#e6a23c","#9b59b6","#00bcd4","#ff5722","#795548"],d={sin:Math.sin,cos:Math.cos,tan:Math.tan,asin:Math.asin,acos:Math.acos,atan:Math.atan,atan2:Math.atan2,sinh:Math.sinh,cosh:Math.cosh,tanh:Math.tanh,exp:Math.exp,log:Math.log,ln:Math.log,log2:Math.log2,log10:Math.log10,sqrt:Math.sqrt,abs:Math.abs,pow:Math.pow,ceil:Math.ceil,floor:Math.floor,sign:Math.sign,max:Math.max,min:Math.min,PI:Math.PI,E:Math.E,step:function(t){return t>=0?1:0},rect:function(t){return Math.abs(t)<=.5?1:0},clamp:function(t,e,n){return Math.max(e,Math.min(n,t))}},p="cart",u=null,f=null,v="a,b,c,d,f,g,h,k,m,n,p,q,r,s,u,v,w".split(","),h=t.querySelector("#plotExpr"),m=t.querySelector("#plotKb");["sin(","cos(","tan(","exp(","log(","sqrt(","abs(","PI","x","t","^","(",")","?",":","+","-","*","/","asin(","acos(","atan(","sinh(","cosh(","ln(","log10(","sign(","step(","clamp(","max(","min(","floor(","ceil("].forEach(function(t){var e=document.createElement("button");e.textContent=t,e.onclick=function(){var e=h;if(e){var n=e.selectionStart||0,a=e.selectionEnd||0;e.value=e.value.substring(0,n)+t+e.value.substring(a),e.focus();var l=n+t.length;e.setSelectionRange(l,l)}},m.appendChild(e)}),t.querySelectorAll(".plot-fin").forEach(function(t){t.onfocus=function(){h=t}});var b=[{name:"a",min:-5,max:5,step:.05,val:1}],x=t.querySelector("#plotSliders");function y(){k={};for(var t="",e=0;e<b.length;e++){var n=b[e],a="";v.forEach(function(t){a+='<option value="'+t+'"'+(t===n.name?" selected":"")+">"+t+"</option>"}),t+='<div class="psl-row" data-pi="'+e+'"><select class="pn" title="å‚æ•°å">'+a+'</select><input class="t-in pmn" value="'+n.min+'" style="width:36px;padding:2px 4px;font-size:.75em" title="min"><input type="range" class="psl" min="'+n.min+'" max="'+n.max+'" step="'+n.step+'" value="'+n.val+'"><input class="t-in pmx" value="'+n.max+'" style="width:36px;padding:2px 4px;font-size:.75em" title="max"><span class="pvl" style="font-size:.75em;color:#555;min-width:36px;text-align:center;font-family:monospace">'+n.val+'</span><label style="font-size:.68em;white-space:nowrap"><input type="checkbox" class="pani"> â–¶</label>'+(b.length>1?'<button class="pdel" style="background:none;border:none;color:#f56c6c;cursor:pointer;font-size:.9em;padding:0 2px">Ã—</button>':"")+"</div>"}x.innerHTML=t,x.querySelectorAll("[data-pi]").forEach(function(t){var e=+t.dataset.pi;t.querySelector(".psl").oninput=function(){b[e].val=+this.value,t.querySelector(".pvl").textContent=(+this.value).toFixed(2),P()},t.querySelector(".pn").onchange=function(){b[e].name=this.value,P()},t.querySelector(".pmn").onchange=function(){var n=+this.value;b[e].min=n,t.querySelector(".psl").min=n,P()},t.querySelector(".pmx").onchange=function(){var n=+this.value;b[e].max=n,t.querySelector(".psl").max=n,P()},t.querySelector(".pani").onchange=function(){this.checked?function(){if(f)return;function t(){var e=!1;x.querySelectorAll("[data-pi]").forEach(function(t){var n=+t.dataset.pi,a=t.querySelector(".pani");if(a&&a.checked){e=!0;var l=b[n];l.val+=2*l.step,l.val>l.max&&(l.val=l.min),t.querySelector(".psl").value=l.val,t.querySelector(".pvl").textContent=l.val.toFixed(2)}}),e?(P(),f=requestAnimationFrame(t)):f=null}f=requestAnimationFrame(t)}():g()};var n=t.querySelector(".pdel");n&&(n.onclick=function(){b.splice(e,1),y(),P()})})}function g(){f&&(cancelAnimationFrame(f),f=null)}function w(){r=e.offsetWidth,s=e.offsetHeight,e.width=r*a,e.height=s*a,n.setTransform(a,0,0,a,0,0),i||o||(i=r/2,o=s/2)}function S(t){return t.replace(/\^/g,"**")}y(),t.querySelector("#plotAddParam").onclick=function(){for(var t=function(){var t={};return b.forEach(function(e){t[e.name]=1}),t}(),e="b",n=0;n<v.length;n++)if(!t[v[n]]){e=v[n];break}b.push({name:e,min:-5,max:5,step:.05,val:1}),y()},w();var k={};function M(t,e){try{var n=k[t];if(!n){var a=Object.keys(d).concat(Object.keys(e));n=k[t]=Function.apply(null,a.concat(["return "+S(t)]))}return n.apply(null,Object.values(d).concat(Object.values(e)))}catch(t){return NaN}}function T(){var t={};return b.forEach(function(e){t[e.name]=e.val}),t}function C(){var t=function(t){for(var e=[.1,.2,.5,1,2,5,10,20,50,100,200,500,1e3],n=0;n<e.length;n++)if(e[n]*t>35)return e[n];return 1e3}(l);n.strokeStyle="#f0f0f0",n.lineWidth=.6;for(var e=Math.floor(-i/(t*l)),a=Math.ceil((r-i)/(t*l)),c=Math.floor(-(s-o)/(t*l)),d=Math.ceil(o/(t*l)),p=e;p<=a;p++){var u=i+p*t*l;n.beginPath(),n.moveTo(u,0),n.lineTo(u,s),n.stroke()}for(p=c;p<=d;p++){var f=o-p*t*l;n.beginPath(),n.moveTo(0,f),n.lineTo(r,f),n.stroke()}n.strokeStyle="#bbb",n.lineWidth=1.2,n.beginPath(),n.moveTo(0,o),n.lineTo(r,o),n.stroke(),n.beginPath(),n.moveTo(i,0),n.lineTo(i,s),n.stroke(),n.fillStyle="#aaa",n.font="10px sans-serif",n.textAlign="center";for(p=e;p<=a;p++)if(0!==p){var v=p*t,h=t<1?v.toFixed(Math.max(0,-Math.floor(Math.log10(t)))):String(v);n.fillText(h,i+v*l,o+13)}n.textAlign="right";for(p=c;p<=d;p++)if(0!==p){v=p*t,h=t<1?v.toFixed(Math.max(0,-Math.floor(Math.log10(t)))):String(v);n.fillText(h,i-4,o-v*l+4)}}function q(e){var a=T(),d=parseFloat(t.querySelector("#plotTmin").value)||-2*Math.PI,p=parseFloat(t.querySelector("#plotTmax").value)||2*Math.PI,u=t.querySelector("#plotParam").value.split(";").map(function(t){return t.trim()}).filter(Boolean);n.clearRect(0,0,r,s),C();var f=2e3,v="number"==typeof e?Math.floor(e*f):f;u.forEach(function(t,r){var s=t.split(",");if(!(s.length<2)){var u=s[0].trim(),h=s.slice(1).join(",").trim();n.strokeStyle=c[r%c.length],n.lineWidth=2,n.beginPath();for(var m=!0,b=0;b<=v;b++){var x=d+b/f*(p-d),y=Object.assign({t:x,x:x},a),g=M(u,y),w=M(h,y);if(!isNaN(g)&&!isNaN(w)&&isFinite(g)&&isFinite(w)){var S=i+g*l,k=o-w*l;m?(n.moveTo(S,k),m=!1):n.lineTo(S,k)}}if(n.stroke(),"number"==typeof e&&v>0){var T=d+v/f*(p-d),C=Object.assign({t:T,x:T},a),q=M(u,C),P=M(h,C);isFinite(q)&&isFinite(P)&&(n.beginPath(),n.arc(i+q*l,o-P*l,5,0,2*Math.PI),n.fillStyle=c[r%c.length],n.fill())}n.fillStyle=c[r%c.length],n.font="11px sans-serif",n.textAlign="left",n.fillText(u+", "+h,8,16+16*r)}})}function P(){var e,a;"cart"===p?(e=T(),a=t.querySelector("#plotExpr").value.split(";").map(function(t){return t.trim()}).filter(Boolean),n.clearRect(0,0,r,s),C(),a.forEach(function(t,a){n.strokeStyle=c[a%c.length],n.lineWidth=2,n.beginPath();for(var d=!0,p=0,u=0;u<r;u+=.5){var f=(u-i)/l,v=M(t,Object.assign({x:f,t:f},e));if(isNaN(v)||!isFinite(v)||Math.abs(v)>1e6)d=!0;else{var h=o-v*l;!d&&Math.abs(h-p)>2*s&&(d=!0),d?(n.moveTo(u,h),d=!1):n.lineTo(u,h),p=h}}n.stroke(),n.fillStyle=c[a%c.length],n.font="11px sans-serif",n.textAlign="left",n.fillText("y="+t,8,16+16*a)})):"polar"===p?function(){var e=T(),a=t.querySelector("#plotPolar").value.split(";").map(function(t){return t.trim()}).filter(Boolean);n.clearRect(0,0,r,s),C(),a.forEach(function(t,a){n.strokeStyle=c[a%c.length],n.lineWidth=2,n.beginPath();for(var r=!0,s=0;s<=2e3;s++){var d=s/2e3*4*Math.PI,p=M(t,Object.assign({t:d,x:d},e));if(!isNaN(p)&&isFinite(p)){var u=i+p*Math.cos(d)*l,f=o-p*Math.sin(d)*l;r?(n.moveTo(u,f),r=!1):n.lineTo(u,f)}}n.stroke(),n.fillStyle=c[a%c.length],n.font="11px sans-serif",n.textAlign="left",n.fillText("r="+t,8,16+16*a)})}():q()}var E=t.querySelector("#plotTrace");function L(){F();var t=0;u=requestAnimationFrame(function e(){(t+=.003)>1&&(t=0),q(t),u=requestAnimationFrame(e)})}function F(){u&&(cancelAnimationFrame(u),u=null)}E.onchange=function(){this.checked&&"param"===p?L():(F(),P())},t.querySelectorAll(".plot-mode").forEach(function(e){e.onclick=function(){t.querySelectorAll(".plot-mode").forEach(function(t){t.classList.remove("active"),t.style.fontWeight=""}),this.classList.add("active"),this.style.fontWeight="700",p=this.dataset.m,t.querySelector("#plotCartIn").style.display="cart"===p?"":"none",t.querySelector("#plotPolarIn").style.display="polar"===p?"":"none",t.querySelector("#plotParamIn").style.display="param"===p?"":"none",h="cart"===p?t.querySelector("#plotExpr"):"polar"===p?t.querySelector("#plotPolar"):t.querySelector("#plotParam"),F(),"param"===p&&E.checked?L():P()}}),t.querySelector("#plotDraw").onclick=P,t.querySelector("#plotDrawP").onclick=P,t.querySelector("#plotDrawPm").onclick=function(){E.checked?L():P()},t.querySelector("#plotExpr").onkeydown=function(t){"Enter"===t.key&&P()},t.querySelector("#plotPolar").onkeydown=function(t){"Enter"===t.key&&P()},t.querySelector("#plotParam").onkeydown=function(t){"Enter"===t.key&&(E.checked?L():P())},e.onmousemove=function(n){var a=e.getBoundingClientRect(),r=n.clientX-a.left,s=n.clientY-a.top;t.querySelector("#plotCoord").textContent="("+((r-i)/l).toFixed(3)+", "+(-(s-o)/l).toFixed(3)+")"},e.onmouseleave=function(){t.querySelector("#plotCoord").textContent=""},e.addEventListener("wheel",function(t){t.preventDefault();var n=e.getBoundingClientRect(),a=t.clientX-n.left,r=t.clientY-n.top,s=t.deltaY>0?.9:1.1;i=a-(a-i)*s,o=r-(r-o)*s,l*=s,P()},{passive:!1});var A=!1,R=0,N=0;e.onmousedown=function(t){A=!0,R=t.clientX-i,N=t.clientY-o,e.style.cursor="grabbing"},e.addEventListener("mousemove",function(t){A&&(i=t.clientX-R,o=t.clientY-N,P())}),e.onmouseup=function(){A=!1,e.style.cursor="crosshair"},e.onmouseleave=function(){A=!1,e.style.cursor="crosshair",t.querySelector("#plotCoord").textContent=""},e.addEventListener("touchstart",function(t){if(1===t.touches.length){var e=t.touches[0];A=!0,R=e.clientX-i,N=e.clientY-o}},{passive:!0}),e.addEventListener("touchmove",function(t){if(A&&1===t.touches.length){t.preventDefault();var e=t.touches[0];i=e.clientX-R,o=e.clientY-N,P()}},{passive:!1}),e.addEventListener("touchend",function(){A=!1},{passive:!0}),t.querySelector("#plotReset").onclick=function(){l=50,i=r/2,o=s/2,b=[{name:"a",min:-5,max:5,step:.05,val:1}],y(),P()},t.querySelector("#plotExport").onclick=function(){var t=document.createElement("a");t.download="plot.png",t.href=e.toDataURL("image/png"),t.click()};var H=new ResizeObserver(function(){w(),P()});H.observe(e),P(),t._cleanup=function(){g(),F(),H.disconnect()}}},{id:"qrcode",name:"QR ç”Ÿæˆå™¨",icon:"ğŸ“±",cat:"productivity",desc:"æ ·å¼ Â· é¢œè‰² Â· ä¸­å¿ƒå›¾æ ‡",html:()=>'<div class="t-lbl">è¾“å…¥æ–‡æœ¬æˆ–é“¾æ¥</div><input class="t-in" id="qrIn" value="https://example.com"><div class="t-row" style="margin-top:8px"><label class="t-lbl">å‰æ™¯</label><input type="color" id="qrFg" value="#000000"><label class="t-lbl">èƒŒæ™¯</label><input type="color" id="qrBg" value="#ffffff"><label class="t-lbl">Emoji</label><input class="t-in" id="qrEmoji" placeholder="å¦‚ ğŸ˜€" style="width:60px"></div><div class="t-row"><span class="t-lbl">æ ·å¼:</span><span class="qr-shape active" data-s="square">â–  æ–¹å—</span><span class="qr-shape" data-s="round">â— åœ†ç‚¹</span><span class="qr-shape" data-s="diamond">â—† è±å½¢</span></div><div class="t-row"><span class="t-lbl">å®¹é”™:</span><select class="t-sel" id="qrLevel"><option value="H" selected>é«˜ (H 30%)</option><option value="M">ä¸­ (M 15%)</option><option value="L">ä½ (L 7%)</option></select></div><div style="text-align:center;margin-top:12px"><canvas id="qrCv"></canvas></div>',async init(t){await e("https://cdn.jsdelivr.net/npm/qrcode-generator@1.4.4/qrcode.js");let n="square";function a(){const e=t.querySelector("#qrIn").value;if(!e){var a=t.querySelector("#qrCv");return void a.getContext("2d").clearRect(0,0,a.width,a.height)}const l=t.querySelector("#qrFg").value,i=t.querySelector("#qrBg").value,o=t.querySelector("#qrEmoji").value.trim(),r=t.querySelector("#qrLevel").value,s=qrcode(0,r);s.addData(e),s.make();const c=s.getModuleCount(),d=6*(c+8),p=t.querySelector("#qrCv"),u=p.getContext("2d");p.width=p.height=d,u.fillStyle=i,u.fillRect(0,0,d,d);for(let t=0;t<c;t++)for(let e=0;e<c;e++){if(!s.isDark(t,e))continue;const a=6*(e+4),i=6*(t+4);u.fillStyle=l,"round"===n?(u.beginPath(),u.arc(a+3,i+3,2.5,0,2*Math.PI),u.fill()):"diamond"===n?(u.beginPath(),u.moveTo(a+3,i),u.lineTo(a+6,i+3),u.lineTo(a+3,i+6),u.lineTo(a,i+3),u.closePath(),u.fill()):u.fillRect(a,i,6,6)}if(o){const t=30;u.font=t+"px serif",u.textAlign="center",u.textBaseline="middle";const e=d/2,n=d/2;u.fillStyle=i,u.beginPath(),u.arc(e,n,.6*t,0,2*Math.PI),u.fill(),u.fillText(o,e,n)}}t.querySelectorAll(".qr-shape").forEach(e=>{e.onclick=()=>{t.querySelectorAll(".qr-shape").forEach(t=>t.classList.remove("active")),e.classList.add("active"),n=e.dataset.s,a()}}),["qrIn","qrFg","qrBg","qrEmoji","qrLevel"].forEach(e=>t.querySelector("#"+e).addEventListener("input",a)),a()}},{id:"radix",name:"è¿›åˆ¶è½¬æ¢",icon:"ğŸ”¢",cat:"dev",desc:"äºŒ/å…«/å/åå…­è¿›åˆ¶å®æ—¶è”åŠ¨",html:()=>'<div style="display:grid;grid-template-columns:1fr 1fr;gap:10px"><div><div class="t-lbl">äºŒè¿›åˆ¶ BIN</div><input class="t-in rx" id="rxBin" data-base="2" placeholder="å¦‚ 11111111" style="font-family:monospace"></div><div><div class="t-lbl">å…«è¿›åˆ¶ OCT</div><input class="t-in rx" id="rxOct" data-base="8" placeholder="å¦‚ 377" style="font-family:monospace"></div><div><div class="t-lbl">åè¿›åˆ¶ DEC</div><input class="t-in rx" id="rxDec" data-base="10" value="255" placeholder="å¦‚ 255" style="font-family:monospace"></div><div><div class="t-lbl">åå…­è¿›åˆ¶ HEX</div><input class="t-in rx" id="rxHex" data-base="16" placeholder="å¦‚ FF" style="font-family:monospace"></div></div><div style="font-size:.72em;color:#999;margin-top:6px;text-align:center">åœ¨ä»»æ„æ¡†å†…è¾“å…¥ï¼Œå…¶ä½™ä¸‰ä¸ªè‡ªåŠ¨è”åŠ¨è½¬æ¢</div>',init(t){const e=t.querySelectorAll(".rx");function n(t){const n=+t.dataset.base,a=t.value.trim();if(!a)return void e.forEach(e=>{e!==t&&(e.value="")});const l=parseInt(a,n);isNaN(l)||e.forEach(e=>{e!==t&&(e.value=l.toString(+e.dataset.base).toUpperCase())})}e.forEach(t=>t.addEventListener("input",()=>n(t))),n(t.querySelector("#rxDec"))}},{id:"rain",name:"ä»£ç é›¨",icon:"ğŸŒ§ï¸",cat:"fun",desc:"10 ç§ä¸»é¢˜ Â· é€Ÿåº¦/å­—å·å¯è°ƒ Â· å…¨å±",html:()=>'<div class="t-row" style="flex-wrap:wrap;gap:6px;justify-content:center"><span class="t-lbl">ä¸»é¢˜</span><select class="t-in" id="rainTheme" style="width:auto"><option value="matrix">ğŸŸ¢ ç»å…¸ Matrix</option><option value="cyber">ğŸ”µ èµ›åšæœ‹å…‹</option><option value="fire">ğŸ”´ æ•°å­—çƒˆç„°</option><option value="gold">ğŸŸ¡ é»„é‡‘çŸ©é˜µ</option><option value="sakura">ğŸŒ¸ æ¨±èŠ±é£˜è½</option><option value="panda">ğŸ¼ ç†ŠçŒ«çƒ§é¦™</option><option value="ai">ğŸ¤– AI ç¥ç»</option><option value="virus">â˜£ï¸ é«˜çº§ç—…æ¯’</option><option value="binary">ğŸ’¾ çº¯äºŒè¿›åˆ¶</option><option value="rainbow">ğŸŒˆ RGB å½©è™¹</option></select></div><div class="t-row" style="flex-wrap:wrap;gap:6px;justify-content:center"><span class="t-lbl">é€Ÿåº¦</span><input type="range" id="rainSpd" min="10" max="120" value="60" style="width:80px"><span class="t-lbl">å­—å·</span><input type="range" id="rainFS" min="10" max="24" value="14" style="width:60px"></div><div class="t-row" style="justify-content:center;gap:8px"><button class="t-btn t-btn-s" id="rainToggle">â–¶ å¼€å§‹</button><button class="t-btn t-btn-d" id="rainFull">â›¶ å…¨å±</button></div><canvas id="rainCvs" style="width:100%;height:260px;background:#0a0a0a;border-radius:6px;display:block"></canvas>',init(t){const e=t.querySelector("#rainCvs"),n=e.getContext("2d");let a,l,i=null,o=!1,r=0;const s={matrix:{bg:"rgba(0,0,0,0.05)",chars:"ï½±ï½²ï½³ï½´ï½µï½¶ï½·ï½¸ï½¹ï½ºï½»ï½¼ï½½ï½¾ï½¿ï¾€ï¾ï¾‚ï¾ƒï¾…ï¾†ï¾‡ï¾ˆï¾‰ï¾Šï¾‹ï¾Œï¾ï¾ï¾ï¾ï¾‘ï¾’ï¾“ï¾”ï¾•ï¾–ï¾—ï¾˜ï¾™ï¾šï¾›ï¾œï¾0123456789",fg:(t,e)=>"#0f0"},cyber:{bg:"rgba(0,0,20,0.06)",chars:"01<>{}[]|/\\+=_-*&^%Î»Î”Î©Ïˆâ—Šâ—†â–¡â– ",fg:(t,e)=>`hsl(${190+20*Math.sin(.1*t)},100%,60%)`},fire:{bg:"rgba(0,0,0,0.04)",chars:["â™¨ï¸","ğŸ”¥","â¤ï¸â€ğŸ”¥","ğŸ’¥","ç«","ç„°","ç‚","ç¼","çƒ§","0","1"],fg:(t,e)=>`hsl(${Math.max(0,30-.5*t)},100%,55%)`},gold:{bg:"rgba(0,0,0,0.05)",chars:"$Â¥â‚¬Â£â‚¿â‚¹â‚©â‚½01234é‡‘é“¶è´¢å¯Œ",fg:(t,e)=>`hsl(${45+10*Math.sin(.08*t)},100%,55%)`},sakura:{bg:"rgba(0,0,0,0.03)",chars:"ğŸŒ¸ğŸŒºğŸŒ·ğŸ’®âœ¿â€èŠ±æ˜¥æ¡œæ¢…é¢¨é›ª",fg:(t,e)=>`hsl(${330+15*Math.sin(.1*t)},80%,72%)`},panda:{bg:"rgba(0,0,0,0.05)",chars:"TROJAN.EXE WORM.DLL INFECT COPY DELETE CORRUPT FORMAT",fg:(t,e)=>t%7==0?"#f00":"#aaa"},ai:{bg:"rgba(0,0,10,0.05)",chars:"â¬¡â—‡â—ˆâ¬¢â–³â–½â—‹â—â—â—‘âŠ•âŠ—âˆâ‰ˆâˆ‡âˆ‚âˆ«âˆ‘âˆÎ»ÏƒÏ€",fg:(t,e)=>`hsl(${220+40*Math.sin(.02*e+.05*t)},90%,65%)`},virus:{bg:"rgba(10,0,0,0.04)",chars:"0xDEAD 0xBEEF KERNEL PANIC FATAL SYSTEM HALT BREACH ROOT",fg:(t,e)=>Math.random()>.92?"#fff":`hsl(${0+10*Math.random()},100%,${45+15*Math.random()}%)`},binary:{bg:"rgba(0,0,0,0.06)",chars:"01",fg:(t,e)=>"#0a0"},rainbow:{bg:"rgba(0,0,0,0.05)",chars:"01234567890ABCDEF<>{}[]|/*#",fg:(t,e)=>`hsl(${(2*e+8*t)%360},100%,55%)`}};function c(){e.width=e.offsetWidth,e.height=e.offsetHeight;const n=+t.querySelector("#rainFS").value;a=Math.floor(e.width/n),l=Array(a).fill(1)}function d(){!function(){const i=t.querySelector("#rainTheme").value,o=s[i]||s.matrix,c=+t.querySelector("#rainFS").value;n.fillStyle=o.bg,n.fillRect(0,0,e.width,e.height),n.font=c+"px monospace";const d=[...o.chars];r++;for(let t=0;t<a;t++){const a=d[Math.floor(Math.random()*d.length)];n.fillStyle=o.fg(t,r),l[t]>1&&l[t]<4?(n.shadowColor=o.fg(t,r),n.shadowBlur=12):n.shadowBlur=0,n.fillText(a,t*c,l[t]*c),n.shadowBlur=0,l[t]*c>e.height&&Math.random()>.975&&(l[t]=0),l[t]++}}(),i=setTimeout(d,130-+t.querySelector("#rainSpd").value)}t.querySelector("#rainToggle").onclick=function(){o?(o=!1,clearTimeout(i),this.textContent="â–¶ å¼€å§‹",this.className="t-btn t-btn-s"):(o=!0,c(),d(),this.textContent="â¸ æš‚åœ",this.className="t-btn t-btn-o")},t.querySelector("#rainFull").onclick=()=>{e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen()},t.querySelector("#rainTheme").onchange=()=>{o&&(clearTimeout(i),n.fillStyle="#000",n.fillRect(0,0,e.width,e.height),c(),d())},t.querySelector("#rainFS").oninput=()=>{o&&(clearTimeout(i),c(),d())};var p=new ResizeObserver(()=>{o&&(clearTimeout(i),c(),d())});p.observe(e),t._cleanup=()=>{o=!1,clearTimeout(i),p.disconnect()}}},{id:"regex",name:"æ­£åˆ™æµ‹è¯•",icon:"ğŸ”",cat:"dev",desc:"å®æ—¶åŒ¹é… Â· æ•è·ç»„é«˜äº®",html:()=>'<div class="t-row"><input class="t-in" id="regPat" placeholder="æ­£åˆ™è¡¨è¾¾å¼" value="(\\w+)@(\\w+\\.\\w+)" style="flex:1"><input class="t-in" id="regFlag" value="gi" style="width:60px"></div><div class="t-lbl">æµ‹è¯•æ–‡æœ¬</div><textarea class="t-ta" id="regText" rows="4">è”ç³» alice@test.com æˆ– bob@example.org è·å–ä¿¡æ¯</textarea><div class="t-lbl" style="margin-top:6px">åŒ¹é…ç»“æœ</div><div id="regOut" style="padding:12px;background:#f8f9fa;border-radius:8px;line-height:2;min-height:40px"></div><div id="regInfo" style="font-size:.78em;color:#888;margin-top:4px"></div>',init(t){function e(){try{const e=new RegExp(t.querySelector("#regPat").value,t.querySelector("#regFlag").value),n=t.querySelector("#regText").value;let a="",l=0,i=0,o=[];if(e.global){let t;for(;null!==(t=e.exec(n))&&(t.index>l&&(a+=n.slice(l,t.index).replace(/</g,"&lt;")),a+='<mark style="background:#ffd700;padding:1px 2px;border-radius:2px">'+t[0].replace(/</g,"&lt;")+"</mark>",t.length>1&&o.push("åŒ¹é…"+(i+1)+": ["+t.slice(1).map(function(t){return null==t?"undefined":String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}).join(", ")+"]"),l=t.index+t[0].length,i++,0===t[0].length&&e.lastIndex++,!(i>200)););}else{const t=e.exec(n);t?(a=n.slice(0,t.index).replace(/</g,"&lt;")+'<mark style="background:#ffd700;padding:1px 2px;border-radius:2px">'+t[0].replace(/</g,"&lt;")+"</mark>"+n.slice(t.index+t[0].length).replace(/</g,"&lt;"),i=1,t.length>1&&o.push("æ•è·: ["+t.slice(1).map(function(t){return null==t?"undefined":String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}).join(", ")+"]")):a=n.replace(/</g,"&lt;")}l<n.length&&e.global&&(a+=n.slice(l).replace(/</g,"&lt;")),t.querySelector("#regOut").innerHTML=a||'<span style="color:#999">æ— åŒ¹é…</span>',t.querySelector("#regInfo").innerHTML=i+" ä¸ªåŒ¹é…"+(o.length?"<br>"+o.join("<br>"):"")}catch(e){t.querySelector("#regOut").innerHTML='<span style="color:#f56c6c">'+e.message+"</span>"}}["regPat","regFlag","regText"].forEach(n=>t.querySelector("#"+n).oninput=e),e()}},{id:"rootfinding",name:"æ–¹ç¨‹æ±‚æ ¹",icon:"ğŸ¯",cat:"academic",desc:"äºŒåˆ†æ³• Â· ç‰›é¡¿æ³• Â· å¼¦å‰²æ³• Â· è¿­ä»£å¯è§†åŒ–",html:()=>'<div class="t-lbl">f(x) = 0</div><div class="t-row"><input class="t-in" id="rfExpr" value="x^3 - x - 2" style="flex:1" placeholder="å¦‚ x^3 - x - 2, sin(x) - 0.5"></div><div class="t-lbl" style="margin-top:8px">æ±‚è§£æ–¹æ³•</div><div class="t-row" style="gap:4px;flex-wrap:wrap"><button class="t-btn rf-method" data-m="bisect" style="font-weight:700">äºŒåˆ†æ³•</button><button class="t-btn t-btn-o rf-method" data-m="newton">ç‰›é¡¿æ³•</button><button class="t-btn t-btn-o rf-method" data-m="secant">å¼¦å‰²æ³•</button></div><div id="rfParams" style="margin-top:8px"><div id="rfBisect"><div class="t-row" style="gap:6px"><span class="t-lbl" style="margin:0">a =</span><input class="t-in" id="rfA" value="1" style="width:70px"><span class="t-lbl" style="margin:0">b =</span><input class="t-in" id="rfB" value="2" style="width:70px"></div></div><div id="rfNewton" style="display:none"><div class="t-row" style="gap:6px"><span class="t-lbl" style="margin:0">xâ‚€ =</span><input class="t-in" id="rfX0" value="1.5" style="width:70px"></div></div><div id="rfSecant" style="display:none"><div class="t-row" style="gap:6px"><span class="t-lbl" style="margin:0">xâ‚€ =</span><input class="t-in" id="rfS0" value="1" style="width:70px"><span class="t-lbl" style="margin:0">xâ‚ =</span><input class="t-in" id="rfS1" value="2" style="width:70px"></div></div></div><div class="t-row" style="gap:6px;margin-top:6px;flex-wrap:wrap"><span class="t-lbl" style="margin:0">Îµ =</span><input class="t-in" id="rfTol" value="1e-6" style="width:80px"><span class="t-lbl" style="margin:0">æœ€å¤§è¿­ä»£</span><input class="t-in" id="rfMax" value="100" style="width:60px"><button class="t-btn t-btn-s" id="rfSolve">æ±‚è§£</button></div><div id="rfResult" class="t-res" style="margin-top:8px;max-height:320px;overflow:auto"></div><canvas id="rfCv" style="width:100%;height:200px;margin-top:8px;border-radius:8px;display:none"></canvas>',async init(t){var e=await n(),a=function(e){return t.querySelector(e)},l="bisect";function i(t,e){var n=1e-8;return(t(e+n)-t(e-n))/(2*n)}function o(t){return null==t||isNaN(t)?"NaN":Math.abs(t)<1e-14?"0":Math.abs(t)>1e6||Math.abs(t)<1e-4?t.toExponential(8):t.toFixed(8)}t.querySelectorAll(".rf-method").forEach(function(e){e.onclick=function(){t.querySelectorAll(".rf-method").forEach(function(t){t.className="t-btn t-btn-o rf-method",t.style.fontWeight=""}),e.className="t-btn rf-method",e.style.fontWeight="700",l=e.dataset.m,a("#rfBisect").style.display="bisect"===l?"":"none",a("#rfNewton").style.display="newton"===l?"":"none",a("#rfSecant").style.display="secant"===l?"":"none"}}),a("#rfSolve").onclick=function(){var n,r=a("#rfExpr").value.trim(),s=parseFloat(a("#rfTol").value)||1e-6,c=parseInt(a("#rfMax").value)||100,d=a("#rfResult"),p=function(t){try{var n=e.compile(t);return function(t){return n.evaluate({x:t})}}catch(t){return null}}(r);if(!p)return d.innerHTML='<span style="color:var(--accent)">âš  æ— æ³•è§£æè¡¨è¾¾å¼ï¼Œè¯·æ£€æŸ¥è¯­æ³•</span>',void(a("#rfCv").style.display="none");try{p(1)}catch(t){return d.innerHTML='<span style="color:var(--accent)">âš  è¡¨è¾¾å¼æ±‚å€¼å‡ºé”™ï¼š'+t.message+"</span>",void(a("#rfCv").style.display="none")}var u="";if("bisect"===l){var f=parseFloat(a("#rfA").value),v=parseFloat(a("#rfB").value);if(isNaN(f)||isNaN(v))return void(d.innerHTML='<span style="color:var(--accent)">âš  è¯·è¾“å…¥æœ‰æ•ˆçš„åŒºé—´ç«¯ç‚¹</span>');n=function(t,e,n,a,l){var i=[];if(t(e)*t(n)>0)return{err:"ç«¯ç‚¹åŒå·ï¼šf(a) ä¸ f(b) ç¬¦å·ç›¸åŒï¼Œæ— æ³•ä¿è¯åŒºé—´å†…æœ‰æ ¹"};for(var o=0;o<l;o++){var r=(e+n)/2,s=t(r),c=0===o?Math.abs(n-e):Math.abs(n-e)/2;if(i.push({n:o,x:r,fx:s,dx:c}),Math.abs(s)<a||Math.abs(n-e)/2<a)return{root:r,fx:s,iter:o+1,hist:i};t(e)*s<0?n=r:e=r}return{root:(e+n)/2,fx:t((e+n)/2),iter:l,hist:i,warn:"è¾¾åˆ°æœ€å¤§è¿­ä»£æ¬¡æ•°ï¼Œå¯èƒ½æœªæ”¶æ•›"}}(p,f,v,s,c),u="äºŒåˆ†æ³•"}else if("newton"===l){var h=parseFloat(a("#rfX0").value);if(isNaN(h))return void(d.innerHTML='<span style="color:var(--accent)">âš  è¯·è¾“å…¥æœ‰æ•ˆçš„åˆå§‹çŒœæµ‹</span>');n=function(t,e,n,a){for(var l=[],o=e,r=0;r<a;r++){var s=t(o),c=i(t,o);if(Math.abs(c)<1e-14)return{err:"å¯¼æ•°ä¸ºé›¶ï¼šx = "+o.toFixed(8)+" å¤„ f'(x) â‰ˆ 0",hist:l};var d=o-s/c,p=Math.abs(d-o);if(l.push({n:r,x:o,fx:s,dx:p}),Math.abs(s)<n||p<n)return{root:d,fx:t(d),iter:r+1,hist:l};o=d}return{root:o,fx:t(o),iter:a,hist:l,warn:"è¾¾åˆ°æœ€å¤§è¿­ä»£æ¬¡æ•°ï¼Œå¯èƒ½æœªæ”¶æ•›"}}(p,h,s,c),u="ç‰›é¡¿æ³•"}else{var m=parseFloat(a("#rfS0").value),b=parseFloat(a("#rfS1").value);if(isNaN(m)||isNaN(b))return void(d.innerHTML='<span style="color:var(--accent)">âš  è¯·è¾“å…¥æœ‰æ•ˆçš„åˆå§‹ç‚¹</span>');n=function(t,e,n,a,l){for(var i=[],o=0;o<l;o++){var r=t(e),s=t(n);if(Math.abs(s-r)<1e-14)return{err:"f(xâ‚™) â‰ˆ f(xâ‚™â‚‹â‚)ï¼Œå¼¦å‰²æ³•åˆ†æ¯è¶‹è¿‘é›¶",hist:i};var c=n-s*(n-e)/(s-r),d=Math.abs(c-n);if(i.push({n:o,x:n,fx:s,dx:d}),Math.abs(s)<a||d<a)return{root:c,fx:t(c),iter:o+1,hist:i};e=n,n=c}return{root:n,fx:t(n),iter:l,hist:i,warn:"è¾¾åˆ°æœ€å¤§è¿­ä»£æ¬¡æ•°ï¼Œå¯èƒ½æœªæ”¶æ•›"}}(p,m,b,s,c),u="å¼¦å‰²æ³•"}if(n.err)return d.innerHTML='<span style="color:var(--accent)">âš  '+n.err+"</span>",void(a("#rfCv").style.display="none");var x='<div style="margin-bottom:8px">';x+="<b>"+u+"</b>",n.warn&&(x+=' <span style="color:#e6a23c;font-size:.85em">âš  '+n.warn+"</span>"),x+="</div>",x+='<div style="display:grid;grid-template-columns:auto 1fr;gap:2px 12px;font-size:.9em;margin-bottom:10px">',x+='<span style="color:var(--font-color-3)">x* =</span><span style="font-family:monospace">'+o(n.root)+"</span>",x+='<span style="color:var(--font-color-3)">f(x*) =</span><span style="font-family:monospace">'+o(n.fx)+"</span>",x+='<span style="color:var(--font-color-3)">è¿­ä»£æ¬¡æ•°</span><span>'+n.iter+"</span>",x+="</div>",n.hist&&n.hist.length>0&&(x+='<div style="overflow-x:auto"><table style="width:100%;border-collapse:collapse;font-size:.78em;font-family:monospace">',x+='<thead><tr style="background:var(--bg-zebra,#f5f5f5);border-bottom:2px solid var(--border-warm,#e8e8e8)"><th style="padding:4px 8px;text-align:center">n</th><th style="padding:4px 8px;text-align:right">xâ‚™</th><th style="padding:4px 8px;text-align:right">f(xâ‚™)</th><th style="padding:4px 8px;text-align:right">|xâ‚™ âˆ’ xâ‚™â‚‹â‚|</th></tr></thead><tbody>',n.hist.forEach(function(t,e){x+='<tr style="background:'+(e%2==0?"transparent":"var(--bg-zebra,#fafafa)")+';border-bottom:1px solid var(--border-warm,#eee)"><td style="padding:3px 8px;text-align:center">'+t.n+'</td><td style="padding:3px 8px;text-align:right">'+o(t.x)+'</td><td style="padding:3px 8px;text-align:right">'+o(t.fx)+'</td><td style="padding:3px 8px;text-align:right">'+o(t.dx)+"</td></tr>"}),x+="</tbody></table></div>"),d.innerHTML=x,function(e){var n=a("#rfCv");if(!e||e.length<2)n.style.display="none";else{n.style.display="block";var l=window.devicePixelRatio||1,i=n.getBoundingClientRect(),o=i.width*l,r=200*l;n.width=o,n.height=r;var s=n.getContext("2d");s.scale(l,l);var c=i.width,d=200,p=getComputedStyle(t).getPropertyValue("--bg-zebra").trim()||"#f8f9fa";s.fillStyle=p,s.fillRect(0,0,c,d);var u=e.map(function(t){var e=Math.abs(t.fx);return e>0?Math.log10(e):-16}),f=u.length,v=Math.min.apply(null,u),h=Math.max.apply(null,u);h-v<1&&(v-=1,h+=1);var m=50,b=15,x=15,y=30,g=c-m-b,w=d-x-y;s.strokeStyle="#ccc",s.lineWidth=1,s.beginPath(),s.moveTo(m,x),s.lineTo(m,d-y),s.lineTo(c-b,d-y),s.stroke(),s.fillStyle=getComputedStyle(t).getPropertyValue("--font-color-3").trim()||"#999",s.font="10px sans-serif",s.textAlign="right",s.textBaseline="middle";for(var S=Math.max(1,Math.ceil((h-v)/5)),k=Math.ceil(v);k<=Math.floor(h);k+=S){var M=x+w*(1-(k-v)/(h-v));s.fillText("1e"+k,m-4,M),s.beginPath(),s.moveTo(m,M),s.lineTo(c-b,M),s.strokeStyle="#eee",s.stroke()}s.textAlign="center",s.textBaseline="top";for(var T=Math.max(1,Math.floor(f/8)),C=0;C<f;C+=T){var q=m+g*C/(f-1);s.fillText(e[C].n,q,d-y+4)}s.fillStyle=getComputedStyle(t).getPropertyValue("--font-color-3").trim()||"#999",s.font="10px sans-serif",s.textAlign="center",s.fillText("è¿­ä»£æ¬¡æ•° n",c/2,196),s.save(),s.translate(10,100),s.rotate(-Math.PI/2),s.fillText("|f(xâ‚™)|",0,0),s.restore();var P=getComputedStyle(t).getPropertyValue("--accent").trim()||"#5B8BA4";for(s.strokeStyle=P,s.lineWidth=2,s.lineJoin="round",s.beginPath(),C=0;C<f;C++)q=m+g*C/(f-1),M=x+w*(1-(u[C]-v)/(h-v)),0===C?s.moveTo(q,M):s.lineTo(q,M);for(s.stroke(),s.fillStyle=P,C=0;C<f;C++)q=m+g*C/(f-1),M=x+w*(1-(u[C]-v)/(h-v)),s.beginPath(),s.arc(q,M,3,0,2*Math.PI),s.fill()}}(n.hist)}}},{id:"stats",name:"ç»Ÿè®¡åˆ†æ",icon:"ğŸ“Š",cat:"academic",desc:"å¤šç»„æ•°æ® Â· å›å½’åˆ†æ Â· å¤šç§å›¾è¡¨ Â· å…¬å¼æ¸²æŸ“",html:()=>'<style>.stat-grp{display:flex;gap:4px;align-items:center;margin:3px 0}.sg-dot{width:8px;height:8px;border-radius:50%;flex-shrink:0}.sg-del{background:none;border:none;color:#f56c6c;cursor:pointer;font-size:.9em;padding:0 2px}.stat-ctrl{display:flex;flex-wrap:wrap;gap:6px;align-items:center;padding:10px 12px;background:#f8f9fa;border-radius:8px;margin:8px 0}.stat-ctrl .t-sel,.stat-ctrl .t-btn{font-size:.82em}.stat-sub{display:flex;flex-wrap:wrap;gap:6px;align-items:center;margin:4px 0;padding:6px 12px;background:#fafbfc;border-radius:6px;font-size:.8em}.stat-chk{display:inline-flex;align-items:center;gap:2px;cursor:pointer;font-size:.78em}.stat-chk input{margin:0}.stat-sep{width:1px;height:18px;background:#e0e0e0;margin:0 2px}.stat-ext-row{display:flex;flex-wrap:wrap;gap:4px;margin:6px 0}</style><div style="margin-bottom:6px"><div class="t-lbl">æ•°æ®ç»„ï¼ˆç©ºæ ¼æˆ–é€—å·åˆ†éš”æ•°å€¼ï¼‰</div><div id="statsGroups"></div><div style="margin-top:4px"><button class="t-btn t-btn-d" id="statsAddGroup" style="font-size:.72em;padding:3px 10px">+ æ·»åŠ æ•°æ®ç»„</button></div></div><div class="stat-ctrl"><button class="t-btn" id="statsCalc">ğŸ”¬ åˆ†æ</button><span class="stat-sep"></span><select class="t-sel" id="statsChart"><option value="hist">ç›´æ–¹å›¾</option><option value="scatter">æ•£ç‚¹å›¾+å›å½’</option><option value="box">ç®±çº¿å›¾</option><option value="line">æŠ˜çº¿å›¾</option></select><select class="t-sel" id="statsTheme"><option value="default">é»˜è®¤</option><option value="pastel">æŸ”å’Œ</option><option value="vivid">é²œè‰³</option><option value="warm">æš–è‰²</option><option value="cool">å†·è‰²</option><option value="mono">å•è‰²</option></select></div><div class="stat-sub" id="statsSubCtrl"><span id="statsXYSel" style="display:none;gap:4px;align-items:center"><select class="t-sel" id="statsXAxis"></select><span style="color:#888;font-size:.9em">vs</span><select class="t-sel" id="statsYAxis"></select></span><span id="statsBinsCtrl" style="display:inline-flex;gap:4px;align-items:center"><span class="t-lbl" style="margin:0">åˆ†ç»„</span><input type="range" id="statsBins" min="3" max="20" value="8" style="width:70px"><span id="statsBinVal">8</span></span><span id="statsDataSel" style="display:inline-flex;gap:6px;flex-wrap:wrap;align-items:center"></span></div><div class="stat-ext-row"><button class="t-btn t-btn-o stat-ext" data-op="cov">åæ–¹å·®çŸ©é˜µ</button><button class="t-btn t-btn-o stat-ext" data-op="zscore">Z-scores</button><button class="t-btn t-btn-o stat-ext" data-op="cosine">ä½™å¼¦ç›¸ä¼¼åº¦</button><button class="t-btn t-btn-o stat-ext" data-op="spearman">Spearman</button></div><div id="statsRes" style="max-height:280px;overflow:auto;padding:10px;background:#fafafa;border-radius:8px;border:1px solid #eee;font-size:.88em;line-height:1.7"></div><canvas id="statsCv" class="t-cv" width="700" height="280" style="margin-top:8px"></canvas>',async init(t){await a();var e=function(e){return t.querySelector(e)};function n(t){return(t||"").replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;")}var o={default:["#409eff","#f56c6c","#67c23a","#e6a23c","#9b59b6","#e91e63"],pastel:["#a8d8ea","#f3b4c4","#c6e5b3","#f9e4a7","#d5b8f2","#f7c5a0"],vivid:["#ff4757","#2ed573","#1e90ff","#ffa502","#a55eea","#ff6348"],warm:["#e74c3c","#e67e22","#f1c40f","#d35400","#c0392b","#f39c12"],cool:["#2980b9","#3498db","#1abc9c","#16a085","#2c3e50","#27ae60"],mono:["#1a1a2e","#3a3a5e","#5a5a8e","#7a7abe","#9a9aee","#babafe"]};function r(){return o[e("#statsTheme").value]||o.default}var s=[{name:"æ•°æ®1",data:"12 15 18 22 25 28 30 33 35 40 45 50"},{name:"æ•°æ®2",data:"10 14 20 24 22 30 28 35 32 42 44 48"}],c={};function d(){var t=r(),a="";s.forEach(function(e,l){a+='<div class="stat-grp" data-gi="'+l+'"><span class="sg-dot" style="background:'+t[l%t.length]+'"></span><input class="t-in sg-name" value="'+n(e.name)+'" style="width:60px;font-size:.8em" placeholder="åç§°"><input class="t-in sg-data" value="'+n(e.data)+'" style="flex:1;font-size:.8em" placeholder="ç©ºæ ¼æˆ–é€—å·åˆ†éš”æ•°å€¼">'+(s.length>1?'<button class="sg-del" title="åˆ é™¤">Ã—</button>':"")+"</div>"}),e("#statsGroups").innerHTML=a,e("#statsGroups").querySelectorAll(".stat-grp").forEach(function(t){var e=+t.dataset.gi;t.querySelector(".sg-name").onchange=function(){s[e].name=this.value,p()},t.querySelector(".sg-data").onchange=function(){s[e].data=this.value};var n=t.querySelector(".sg-del");n&&(n.onclick=function(){s.splice(e,1),d(),p()})}),p()}function p(){var t=v(),a=e("#statsXAxis"),l=e("#statsYAxis"),i=a.value,o=l.value;a.innerHTML="",l.innerHTML="",t.forEach(function(t,e){a.innerHTML+='<option value="'+e+'">'+n(t)+"</option>",l.innerHTML+='<option value="'+e+'">'+n(t)+"</option>"}),a.value=i&&+i<t.length?i:"0",l.value=o&&+o<t.length?o:t.length>1?"1":"0";var s=e("#statsDataSel"),d="",p=r();t.forEach(function(t,e){void 0===c[e]&&(c[e]=!0),d+='<label class="stat-chk"><input type="checkbox" data-di="'+e+'"'+(c[e]?" checked":"")+'/><span style="color:'+p[e%p.length]+'">'+n(t)+"</span></label>"}),s.innerHTML=d,s.querySelectorAll("input[type=checkbox]").forEach(function(t){t.onchange=function(){c[+this.dataset.di]=this.checked,x()}}),u()}function u(){var t=e("#statsChart").value,n="scatter"===t||"line"===t;e("#statsXYSel").style.display=n?"inline-flex":"none",e("#statsBinsCtrl").style.display="hist"===t?"inline-flex":"none",e("#statsDataSel").style.display=n?"none":"inline-flex"}function f(){return e("#statsGroups").querySelectorAll(".stat-grp").forEach(function(t){var e=+t.dataset.gi;s[e].name=t.querySelector(".sg-name").value,s[e].data=t.querySelector(".sg-data").value}),s.map(function(t){return t.data.trim().split(/[\s,]+/).map(Number).filter(function(t){return!isNaN(t)})}).filter(function(t){return t.length>0})}function v(){return s.map(function(t,e){return t.name||"æ•°æ®"+(e+1)})}function h(t){var e=t.length,n=t.reduce(function(t,e){return t+e}),a=n/e,l=t.slice().sort(function(t,e){return t-e}),i=e%2?l[Math.floor(e/2)]:(l[e/2-1]+l[e/2])/2,o=l[Math.floor(.25*e)],r=l[Math.floor(.75*e)],s=e>1?t.reduce(function(t,e){return t+Math.pow(e-a,2)},0)/(e-1):0,c={};t.forEach(function(t){c[t]=(c[t]||0)+1});var d=null,p=0;Object.keys(c).forEach(function(t){c[t]>p&&(p=c[t],d=+t)});var u=t.reduce(function(t,e){return t+Math.pow((e-a)/Math.sqrt(s),3)},0)/e,f=t.reduce(function(t,e){return t+Math.pow((e-a)/Math.sqrt(s),4)},0)/e-3;return{n:e,sum:n,mean:a,median:i,std:Math.sqrt(s),variance:s,min:l[0],max:l[e-1],q1:o,q3:r,iqr:r-o,sorted:l,mode:d,modeCnt:p,skew:isNaN(u)?0:u,kurtosis:isNaN(f)?0:f}}function m(t,e){var n=Math.min(t.length,e.length);function a(t){var e=t.slice(0,n).map(function(t,e){return{v:t,i:e}}).sort(function(t,e){return t.v-e.v}),a=new Array(n);return e.forEach(function(t,e){a[t.i]=e+1}),a}for(var l=a(t),i=a(e),o=0,r=0;r<n;r++)o+=Math.pow(l[r]-i[r],2);return 1-6*o/(n*(n*n-1))}function b(t,e){for(var n=Math.min(t.length,e.length),a=t.slice(0,n).reduce(function(t,e){return t+e},0)/n,l=e.slice(0,n).reduce(function(t,e){return t+e},0)/n,i=0,o=0,r=0;r<n;r++)i+=(t[r]-a)*(e[r]-l),o+=Math.pow(t[r]-a,2);var s=o?i/o:0,c=l-s*a,d=t.slice(0,n).map(function(t){return c+s*t}),p=0,u=0;for(r=0;r<n;r++)p+=Math.pow(e[r]-l,2),u+=Math.pow(e[r]-d[r],2);return{a:c,b:s,r2:p?1-u/p:0}}function x(){var t=f();if(t.length){var a=v(),o=r(),d="";if(t.forEach(function(t,e){var i=h(t);d+='<div style="margin-bottom:10px;padding:8px;background:#fff;border-radius:6px;border-left:3px solid '+o[e%o.length]+'">',d+="<strong>"+n(a[e])+"</strong> "+l("(n="+i.n+")")+"<br>",d+=l("\\bar{x}="+i.mean.toFixed(4))+" &nbsp; "+l("\\tilde{x}="+i.median)+" &nbsp; ä¼—æ•°: "+l(i.mode+"\\,(\\times"+i.modeCnt+")")+"<br>",d+=l("\\sigma="+i.std.toFixed(4))+" &nbsp; "+l("\\sigma^2="+i.variance.toFixed(4))+"<br>",d+=l("Q_1="+i.q1)+" &nbsp; "+l("Q_3="+i.q3)+" &nbsp; "+l("\\text{IQR}="+i.iqr)+" &nbsp; ["+i.min+", "+i.max+"]<br>",d+="ååº¦ "+l("\\gamma_1="+i.skew.toFixed(4))+" &nbsp; å³°åº¦ "+l("\\kappa="+i.kurtosis.toFixed(4)),d+="</div>"}),t.length>=2){var p=+e("#statsXAxis").value||0,u=+e("#statsYAxis").value||1;p>=t.length&&(p=0),u>=t.length&&(u=Math.min(1,t.length-1)),d+='<div style="padding:8px;background:#f0f7ff;border-radius:6px">',d+='<strong>ç›¸å…³æ€§ Â· å›å½’</strong> <span style="font-size:.78em;color:#999">'+n(a[p])+" â†” "+n(a[u])+"</span><br>";var x=b(t[p],t[u]),y=function(t,e){for(var n=Math.min(t.length,e.length),a=t.slice(0,n).reduce(function(t,e){return t+e},0)/n,l=e.slice(0,n).reduce(function(t,e){return t+e},0)/n,i=0,o=0,r=0,s=0;s<n;s++)i+=(t[s]-a)*(e[s]-l),o+=Math.pow(t[s]-a,2),r+=Math.pow(e[s]-l,2);return o&&r?i/Math.sqrt(o*r):0}(t[p],t[u]).toFixed(4),g=m(t[p],t[u]).toFixed(4);d+=l("r_{\\text{Pearson}}="+y)+" &nbsp; "+l("\\rho_{\\text{Spearman}}="+g)+"<br>";var w=x.b>=0?"":"-",S=Math.abs(x.b).toFixed(4),k=x.a>=0?"+":"-",M=Math.abs(x.a).toFixed(4);d+=i("y = "+w+S+"x "+k+" "+M+"\\quad (R^2="+x.r2.toFixed(4)+")"),d+="</div>"}e("#statsRes").innerHTML=d,function(t){var n=v(),a=r(),l=e("#statsCv"),i=l.getContext("2d"),o=e("#statsChart").value;i.clearRect(0,0,l.width,l.height);var d=40,p=l.width-2*d,u=l.height-2*d;i.strokeStyle="#f0f0f0",i.lineWidth=.6;for(var f=0;f<=4;f++){var m=d+f*(u/4);i.beginPath(),i.moveTo(d,m),i.lineTo(d+p,m),i.stroke()}function x(){i.strokeStyle="#bbb",i.lineWidth=1,i.beginPath(),i.moveTo(d,d+u),i.lineTo(d+p,d+u),i.stroke(),i.beginPath(),i.moveTo(d,d),i.lineTo(d,d+u),i.stroke()}var y=(g=[],s.forEach(function(t,e){!1!==c[e]&&g.push(e)}),g);var g;if("hist"===o){var w=+e("#statsBins").value,S=y.map(function(e){return t[e]}).filter(Boolean);if(!S.length)return;var k=0;S.forEach(function(t){var e=h(t),n=(e.max-e.min)/w||1,a=new Array(w).fill(0);t.forEach(function(t){var l=Math.min(Math.floor((t-e.min)/n),w-1);a[l]++});var l=Math.max.apply(null,a);l>k&&(k=l)}),x(),i.fillStyle="#888",i.font="10px sans-serif",i.textAlign="right";for(var M=0;M<=4;M++){var T=Math.round(k*(4-M)/4);i.fillText(T,d-4,d+M*(u/4)+4)}S.forEach(function(t,e){var n=y[e],l=h(t),o=(l.max-l.min)/w||1,r=new Array(w).fill(0);t.forEach(function(t){var e=Math.min(Math.floor((t-l.min)/o),w-1);r[e]++});var s=p/(w*S.length);if(r.forEach(function(t,l){var o=k?t/k*u:0;i.fillStyle=a[n%a.length]+"55",i.fillRect(d+l*S.length*s+e*s,d+u-o,s-1,o),i.strokeStyle=a[n%a.length],i.lineWidth=1.2,i.strokeRect(d+l*S.length*s+e*s,d+u-o,s-1,o)}),0===e){i.fillStyle="#888",i.font="9px sans-serif",i.textAlign="center";for(var c=0;c<=w;c+=Math.max(1,Math.floor(w/6))){var f=l.min+c*o;i.fillText(f.toFixed(1),d+c*S.length*s,d+u+13)}}}),i.textAlign="start",function(t,e,n,a,l){if(!n.length)return;e.save(),e.font="11px sans-serif",e.textAlign="left";var i=0;n.forEach(function(t){var n=e.measureText(t).width;n>i&&(i=n)});var o=i+24,r=16*n.length+8,s=t.width-l-o-4,c=l+4;e.fillStyle="rgba(255,255,255,.88)",e.fillRect(s,c,o,r),e.strokeStyle="#e0e0e0",e.lineWidth=.6,e.strokeRect(s,c,o,r),n.forEach(function(t,n){e.fillStyle=a[n]||"#333",e.fillRect(s+4,c+6+16*n,10,10),e.fillStyle="#333",e.fillText(t,s+18,c+14+16*n)}),e.restore()}(l,i,y.map(function(t){return n[t]}),y.map(function(t){return a[t%a.length]}),d)}else if("scatter"===o&&t.length>=2){var C=+e("#statsXAxis").value||0;M=+e("#statsYAxis").value||1;if(!t[C]||!t[M])return;var q=t[C],P=t[M],E=Math.min(q.length,P.length),L=Math.min.apply(null,q),F=Math.max.apply(null,q),A=Math.min.apply(null,P),R=Math.max.apply(null,P),N=function(t){return d+(t-L)/(F-L||1)*p},H=function(t){return d+u-(t-A)/(R-A||1)*u};x(),i.fillStyle="#888",i.font="10px sans-serif",i.textAlign="center";for(var z=0;z<=4;z++){var j=L+(F-L)*z/4;i.fillText(j.toFixed(1),N(j),d+u+13)}i.textAlign="right";for(z=0;z<=4;z++){T=A+(R-A)*z/4;i.fillText(T.toFixed(1),d-4,H(T)+4)}i.textAlign="start";for(var D=a[C%a.length],B=0;B<E;B++)i.beginPath(),i.arc(N(q[B]),H(P[B]),4,0,2*Math.PI),i.fillStyle=D,i.fill();var I=b(q,P),O=a[M%a.length];i.strokeStyle=O,i.lineWidth=2,i.setLineDash([6,3]),i.beginPath(),i.moveTo(N(L),H(I.a+I.b*L)),i.lineTo(N(F),H(I.a+I.b*F)),i.stroke(),i.setLineDash([]),i.fillStyle="#666",i.font="10px sans-serif",i.fillText(n[C]+" vs "+n[M]+" | RÂ²="+I.r2.toFixed(3),d+4,d+14)}else if("box"===o){var W=y.filter(function(e){return t[e]&&t[e].length>0});if(!W.length)return;S=W.map(function(e){return t[e]});var U=S.reduce(function(t,e){return t.concat(e)},[]),_=Math.min.apply(null,U),V=Math.max.apply(null,U),X=function(t){return d+u-(t-_)/(V-_||1)*u};x(),i.fillStyle="#888",i.font="10px sans-serif",i.textAlign="right";for(M=0;M<=4;M++){T=_+(V-_)*(4-M)/4;i.fillText(T.toFixed(1),d-4,d+M*(u/4)+4)}i.textAlign="start",S.forEach(function(t,e){var l=W[e],o=h(t),r=Math.min(40,p/S.length-10),s=d+e*(r+20)+20;i.fillStyle=a[l%a.length]+"33",i.fillRect(s,X(o.q3),r,X(o.q1)-X(o.q3)),i.strokeStyle=a[l%a.length],i.lineWidth=2,i.strokeRect(s,X(o.q3),r,X(o.q1)-X(o.q3)),i.beginPath(),i.moveTo(s,X(o.median)),i.lineTo(s+r,X(o.median)),i.lineWidth=3,i.stroke(),i.lineWidth=1,i.beginPath(),i.moveTo(s+r/2,X(o.q3)),i.lineTo(s+r/2,X(o.max)),i.moveTo(s+r/2,X(o.q1)),i.lineTo(s+r/2,X(o.min)),i.stroke(),i.fillStyle=a[l%a.length],i.font="10px sans-serif",i.fillText(n[l],s+2,d+u+14)})}else if("line"===o&&t.length>=2){var G=+e("#statsXAxis").value||0,K=+e("#statsYAxis").value||1;if(!t[G]||!t[K])return;var Y=t[G],$=t[K],J=Math.min(Y.length,$.length),Q=Math.min.apply(null,Y),Z=Math.max.apply(null,Y),tt=Math.min.apply(null,$),et=Math.max.apply(null,$),nt=function(t){return d+(t-Q)/(Z-Q||1)*p},at=function(t){return d+u-(t-tt)/(et-tt||1)*u};x(),i.fillStyle="#888",i.font="10px sans-serif",i.textAlign="center";for(z=0;z<=4;z++){j=Q+(Z-Q)*z/4;i.fillText(j.toFixed(1),nt(j),d+u+13)}i.textAlign="right";for(z=0;z<=4;z++){T=tt+(et-tt)*z/4;i.fillText(T.toFixed(1),d-4,at(T)+4)}i.textAlign="start";for(var lt=[],it=0;it<J;it++)lt.push({x:Y[it],y:$[it]});lt.sort(function(t,e){return t.x-e.x});var ot=a[K%a.length];i.strokeStyle=ot,i.lineWidth=2,i.beginPath(),lt.forEach(function(t,e){var n=nt(t.x),a=at(t.y);0===e?i.moveTo(n,a):i.lineTo(n,a)}),i.stroke(),lt.forEach(function(t){i.beginPath(),i.arc(nt(t.x),at(t.y),3.5,0,2*Math.PI),i.fillStyle=ot,i.fill()}),i.fillStyle="#666",i.font="10px sans-serif",i.fillText(n[G]+" â†’ "+n[K],d+4,d+14)}}(t)}}d(),e("#statsAddGroup").onclick=function(){var t=s.length+1;s.push({name:"æ•°æ®"+t,data:""}),c[s.length-1]=!0,d()},e("#statsTheme").onchange=function(){d()},e("#statsChart").onchange=function(){u(),x()},e("#statsXAxis").onchange=function(){x()},e("#statsYAxis").onchange=function(){x()},p(),t.querySelectorAll(".stat-ext").forEach(function(t){t.onclick=function(){var t=f();if(t.length){var a=v(),o="",r=+e("#statsXAxis").value||0,s=+e("#statsYAxis").value||1;if(r>=t.length&&(r=0),s>=t.length&&(s=Math.min(1,t.length-1)),"cov"===this.dataset.op&&t.length>=2){o+="<strong>åæ–¹å·®çŸ©é˜µ</strong><br>";var c="\\begin{pmatrix}";t.forEach(function(e,n){t.forEach(function(n,a){c+=function(t,e){for(var n=Math.min(t.length,e.length),a=t.slice(0,n).reduce(function(t,e){return t+e},0)/n,l=e.slice(0,n).reduce(function(t,e){return t+e},0)/n,i=0,o=0;o<n;o++)i+=(t[o]-a)*(e[o]-l);return i/n}(e,n).toFixed(4),a<t.length-1&&(c+=" & ")}),n<t.length-1&&(c+="\\\\")}),o+=i(c+="\\end{pmatrix}")}else if("zscore"===this.dataset.op)o+="<strong>Z-scores</strong><br>",t.forEach(function(t,e){var i=h(t);o+="<strong>"+n(a[e])+"</strong>: "+l("z_i = \\frac{x_i - \\bar{x}}{\\sigma}")+"<br>",o+='<span style="font-family:monospace;font-size:.85em">'+t.map(function(t){return((t-i.mean)/i.std).toFixed(3)}).join(", ")+"</span><br>"});else if("cosine"===this.dataset.op&&t.length>=2){o+="<strong>ä½™å¼¦ç›¸ä¼¼åº¦çŸ©é˜µ</strong><br>";c="\\begin{pmatrix}";t.forEach(function(e,n){t.forEach(function(n,a){for(var l=Math.min(e.length,n.length),i=0,o=0,r=0,s=0;s<l;s++)i+=e[s]*n[s],o+=e[s]*e[s],r+=n[s]*n[s];var d=o&&r?i/Math.sqrt(o*r):0;c+=d.toFixed(4),a<t.length-1&&(c+=" & ")}),n<t.length-1&&(c+="\\\\")}),o+=i(c+="\\end{pmatrix}")}else if("spearman"===this.dataset.op&&t.length>=2){o+="<strong>Spearman ç§©ç›¸å…³çŸ©é˜µ</strong><br>";c="\\begin{pmatrix}";t.forEach(function(e,n){t.forEach(function(n,a){c+=m(e,n).toFixed(4),a<t.length-1&&(c+=" & ")}),n<t.length-1&&(c+="\\\\")}),o+=i(c+="\\end{pmatrix}")}o&&(e("#statsRes").innerHTML=o)}}}),e("#statsCalc").onclick=function(){p(),x()},e("#statsBins").oninput=function(){e("#statsBinVal").textContent=this.value,x()}}},{id:"texttools",name:"æ–‡æœ¬å¤„ç†",icon:"ğŸ“",cat:"dev",desc:"è¡Œæ’åº Â· å»é‡ Â· æŸ¥æ‰¾æ›¿æ¢ Â· å‰åç¼€ Â· å‘½åé£æ ¼",html:()=>'<div class="t-row" style="justify-content:center;gap:8px;margin-bottom:4px"><label class="t-btn t-btn-s" style="cursor:pointer">ğŸ“‚ æ‰“å¼€æ–‡ä»¶<input type="file" id="ttFile" accept=".txt,.csv,.tsv,.md,.log,.json,.xml,.yaml,.yml,.ini,.cfg,.conf,.sh,.bat,.py,.js,.ts,.html,.css,.sql,.c,.cpp,.h,.java,.go,.rs,.rb,.php,.pl,.r,.m,.tex,.bib" style="display:none"></label></div><textarea class="t-ta" id="ttIn" rows="6" placeholder="åœ¨æ­¤ç²˜è´´æ–‡æœ¬ï¼ˆæŒ‰è¡Œå¤„ç†ï¼‰â€¦ æˆ–ç‚¹å‡»ä¸Šæ–¹æŒ‰é’®ä¸Šä¼ æ–‡ä»¶"></textarea><div style="font-size:.78em;color:#888;text-align:center;margin:4px 0" id="ttStats"></div><fieldset style="border:1px solid #e8e8e8;border-radius:8px;padding:6px 10px;margin:4px 0"><legend style="font-size:.72em;color:#888;padding:0 4px">ğŸ“„ è¡Œæ“ä½œ</legend><div style="display:flex;flex-wrap:wrap;gap:4px"><button class="t-btn t-btn-o tt-op" data-op="sort" style="font-size:.75em">â†‘ æ’åº</button><button class="t-btn t-btn-o tt-op" data-op="rsort" style="font-size:.75em">â†“ å€’åº</button><button class="t-btn t-btn-o tt-op" data-op="dedup" style="font-size:.75em">âœ– å»é‡</button><button class="t-btn t-btn-o tt-op" data-op="trim" style="font-size:.75em">âœ‚ å»ç©ºè¡Œ</button><button class="t-btn t-btn-o tt-op" data-op="reverse" style="font-size:.75em">â‡… åè½¬è¡Œåº</button><button class="t-btn t-btn-o tt-op" data-op="number" style="font-size:.75em"># åŠ è¡Œå·</button><button class="t-btn t-btn-o tt-op" data-op="shuffle" style="font-size:.75em">ğŸ² æ‰“ä¹±</button></div></fieldset><fieldset style="border:1px solid #e8e8e8;border-radius:8px;padding:6px 10px;margin:4px 0"><legend style="font-size:.72em;color:#888;padding:0 4px">ğŸ”¤ æ–‡æœ¬è½¬æ¢</legend><div style="display:flex;flex-wrap:wrap;gap:4px;margin-bottom:6px"><button class="t-btn t-btn-o tt-op" data-op="upper" style="font-size:.75em">ABC å¤§å†™</button><button class="t-btn t-btn-o tt-op" data-op="lower" style="font-size:.75em">abc å°å†™</button><button class="t-btn t-btn-o tt-op" data-op="snake" style="font-size:.75em">snake_case</button><button class="t-btn t-btn-o tt-op" data-op="camel" style="font-size:.75em">camelCase</button><button class="t-btn t-btn-o tt-op" data-op="kebab" style="font-size:.75em">kebab-case</button><button class="t-btn t-btn-o tt-op" data-op="title" style="font-size:.75em">Title Case</button></div><div class="t-row" style="gap:4px"><input class="t-in" id="ttPrefix" placeholder="å‰ç¼€" style="width:80px"><input class="t-in" id="ttSuffix" placeholder="åç¼€" style="width:80px"><button class="t-btn t-btn-o tt-op" data-op="wrap" style="font-size:.75em">â• åŠ å‰åç¼€</button></div></fieldset><fieldset style="border:1px solid #e8e8e8;border-radius:8px;padding:6px 10px;margin:4px 0"><legend style="font-size:.72em;color:#888;padding:0 4px">ğŸ” æŸ¥æ‰¾æ›¿æ¢</legend><div class="t-row" style="gap:4px"><input class="t-in" id="ttFind" placeholder="æŸ¥æ‰¾" style="flex:1"><input class="t-in" id="ttRepl" placeholder="æ›¿æ¢ä¸º" style="flex:1"><label style="font-size:.72em;white-space:nowrap"><input type="checkbox" id="ttRegex"> æ­£åˆ™</label><button class="t-btn t-btn-o tt-op" data-op="replace" style="font-size:.75em">å…¨éƒ¨æ›¿æ¢</button></div></fieldset><textarea class="t-ta" id="ttOut" rows="6" readonly style="background:#f8f9fa"></textarea><div class="t-row" style="justify-content:center;gap:8px;margin-top:4px"><button class="t-btn" id="ttCopy" style="font-size:.75em">ğŸ“‹ å¤åˆ¶ç»“æœ</button><button class="t-btn t-btn-d" id="ttApply" style="font-size:.75em">â†© åº”ç”¨åˆ°è¾“å…¥</button></div>',init(t){var e=function(e){return t.querySelector(e)};function n(){var t=e("#ttIn").value,n=t.length,a=t.trim()?t.trim().split(/\s+/).length:0,l=t?t.split("\n").length:0,i=(t.match(/[\u4e00-\u9fff]/g)||[]).length;e("#ttStats").textContent="å­—ç¬¦: "+n+" | è¯: "+a+" | è¡Œ: "+l+" | ä¸­æ–‡: "+i}e("#ttIn").oninput=n,n(),e("#ttFile").onchange=function(){var t=this.files[0];if(t){var a=new FileReader;a.onload=function(){e("#ttIn").value=a.result,n()},a.readAsText(t)}},t.querySelectorAll(".tt-op").forEach(function(t){t.onclick=function(){var t=e("#ttIn").value,n=t.split("\n"),a="";switch(this.dataset.op){case"sort":a=n.slice().sort(function(t,e){return t.localeCompare(e,"zh")}).join("\n");break;case"rsort":a=n.slice().sort(function(t,e){return e.localeCompare(t,"zh")}).join("\n");break;case"dedup":var l=[],i={};n.forEach(function(t){i[t]||(i[t]=1,l.push(t))}),a=l.join("\n");break;case"trim":a=n.filter(function(t){return t.trim()}).join("\n");break;case"upper":a=t.toUpperCase();break;case"lower":a=t.toLowerCase();break;case"reverse":a=n.slice().reverse().join("\n");break;case"number":a=n.map(function(t,e){return e+1+". "+t}).join("\n");break;case"shuffle":for(var o=n.slice(),r=o.length-1;r>0;r--){var s=Math.floor(Math.random()*(r+1)),c=o[r];o[r]=o[s],o[s]=c}a=o.join("\n");break;case"snake":a=n.map(function(t){return t.replace(/([a-z])([A-Z])/g,"$1_$2").replace(/[\s\-]+/g,"_").toLowerCase()}).join("\n");break;case"camel":a=n.map(function(t){return t.replace(/[-_\s]+(.)/g,function(t,e){return e.toUpperCase()})}).join("\n");break;case"kebab":a=n.map(function(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[\s_]+/g,"-").toLowerCase()}).join("\n");break;case"title":a=n.map(function(t){return t.replace(/\b\w/g,function(t){return t.toUpperCase()})}).join("\n");break;case"wrap":var d=e("#ttPrefix").value,p=e("#ttSuffix").value;a=n.map(function(t){return d+t+p}).join("\n");break;case"replace":var u=e("#ttFind").value,f=e("#ttRepl").value;if(!u){a=t;break}if(e("#ttRegex").checked)try{a=t.replace(new RegExp(u,"g"),f)}catch(t){a="æ­£åˆ™è¡¨è¾¾å¼é”™è¯¯: "+t.message}else a=t.split(u).join(f)}e("#ttOut").value=a}}),e("#ttCopy").onclick=function(){var t=e("#ttOut").value;t&&navigator.clipboard.writeText(t).then(function(){e("#ttCopy").textContent="âœ“",setTimeout(function(){e("#ttCopy").textContent="ğŸ“‹ å¤åˆ¶ç»“æœ"},1500)})},e("#ttApply").onclick=function(){var t=e("#ttOut").value;t&&(e("#ttIn").value=t,e("#ttOut").value="",n())}}},{id:"timestamp",name:"æ—¶é—´æˆ³è½¬æ¢",icon:"ğŸ•",cat:"dev",desc:"Unix æ—¶é—´æˆ³ Â· å®æ—¶äº’è½¬ Â· æ—¶åŒºæ”¯æŒ",html(){function t(t,e,n){let a="";for(let l=t;l<=e;l++)a+='<option value="'+l+'">'+(n&&l<10?"0"+l:l)+"</option>";return a}return'<div class="t-split"><div><div class="t-lbl">Unix æ—¶é—´æˆ³ (ç§’)</div><input class="t-in" id="tsUnix" style="font-family:monospace;font-size:1.1em"></div><div><div class="t-lbl">æ¯«ç§’æ—¶é—´æˆ³</div><input class="t-in" id="tsMs" style="font-family:monospace;font-size:1.1em"></div></div><div style="margin:12px 0"><div class="t-lbl" style="margin-bottom:6px">ğŸ“… æ—¥æœŸæ—¶é—´é€‰æ‹©</div><div style="display:flex;gap:3px;align-items:center;flex-wrap:wrap"><select class="t-sel ts-u" id="tsY" style="width:75px">'+t(1970,2100)+'</select><span style="color:#aaa;font-size:.78em">å¹´</span><select class="t-sel ts-u" id="tsM" style="width:52px">'+t(1,12,!0)+'</select><span style="color:#aaa;font-size:.78em">æœˆ</span><select class="t-sel ts-u" id="tsD" style="width:52px">'+t(1,31,!0)+'</select><span style="color:#aaa;font-size:.78em">æ—¥</span><span style="color:#ccc;margin:0 2px">|</span><select class="t-sel ts-u" id="tsHH" style="width:52px">'+t(0,23,!0)+'</select><span style="font-weight:700;color:#999">:</span><select class="t-sel ts-u" id="tsMM" style="width:52px">'+t(0,59,!0)+'</select><span style="font-weight:700;color:#999">:</span><select class="t-sel ts-u" id="tsSS" style="width:52px">'+t(0,59,!0)+'</select></div></div><div id="tsLive" style="text-align:center;margin:14px 0;padding:12px;background:linear-gradient(135deg,#f0f4ff,#f8f9fa);border-radius:10px"><div style="font-size:.72em;color:#999">å½“å‰æ—¶é—´</div><div id="tsNow" style="font-size:1.4em;font-weight:700;font-family:monospace;color:#409eff"></div><div id="tsNowUnix" style="font-size:.82em;color:#888;font-family:monospace"></div></div><div id="tsDetail" class="t-res" style="line-height:1.6"></div>'},init(t){const e=e=>t.querySelector(e),n=["æ—¥","ä¸€","äºŒ","ä¸‰","å››","äº”","å…­"];function a(){for(var t=function(t,e){return new Date(t,e,0).getDate()}(+e("#tsY").value,+e("#tsM").value),n=+e("#tsD").value,a=e("#tsD"),l="",i=1;i<=t;i++)l+='<option value="'+i+'">'+(i<10?"0"+i:i)+"</option>";a.innerHTML=l,a.value=Math.min(n,t)}function l(){const t=new Date;e("#tsNow").textContent=t.toLocaleString("zh-CN",{hour12:!1}),e("#tsNowUnix").textContent="Unix: "+Math.floor(t.getTime()/1e3)}function i(t){var a=t.getTimezoneOffset(),l=Math.floor(Math.abs(a)/60),i=Math.abs(a)%60,o="UTC"+(a<=0?"+":"-")+String(l).padStart(2,"0")+":"+String(i).padStart(2,"0");e("#tsDetail").textContent=o+": "+t.toLocaleString("zh-CN",{hour12:!1})+"\nUTC:  "+t.toUTCString()+"\nISO:  "+t.toISOString()+"\næ˜ŸæœŸ"+n[t.getDay()]+" Â· ç¬¬"+(Math.floor((t-new Date(t.getFullYear(),0,1))/864e5)+1)+"å¤© Â· "+t.getFullYear()+"å¹´"}function o(t){e("#tsY").value=t.getFullYear(),e("#tsM").value=t.getMonth()+1,a(),e("#tsD").value=t.getDate(),e("#tsHH").value=t.getHours(),e("#tsMM").value=t.getMinutes(),e("#tsSS").value=t.getSeconds()}let r=!1;function s(){if(r)return;r=!0;const t=new Date(+e("#tsY").value,+e("#tsM").value-1,+e("#tsD").value,+e("#tsHH").value,+e("#tsMM").value,+e("#tsSS").value),n=Math.floor(t.getTime()/1e3);e("#tsUnix").value=n,e("#tsMs").value=t.getTime(),i(t),r=!1}const c=new Date;e("#tsUnix").value=Math.floor(c.getTime()/1e3),e("#tsMs").value=c.getTime(),o(c),i(c),e("#tsUnix").addEventListener("input",function(){if(r)return;r=!0;const t=+e("#tsUnix").value;if(!isNaN(t)){const n=new Date(1e3*t);e("#tsMs").value=1e3*t,o(n),i(n)}r=!1}),e("#tsMs").addEventListener("input",function(){if(r)return;r=!0;const t=+e("#tsMs").value;if(!isNaN(t)){const n=new Date(t);e("#tsUnix").value=Math.floor(t/1e3),o(n),i(n)}r=!1}),e("#tsY").addEventListener("change",function(){a(),s()}),e("#tsM").addEventListener("change",function(){a(),s()}),t.querySelectorAll(".ts-u").forEach(t=>{"tsY"!==t.id&&"tsM"!==t.id&&t.addEventListener("change",s)}),l();const d=setInterval(l,1e3);t._cleanup=()=>clearInterval(d)}},{id:"unlockmusic",name:"UnlockMusic",icon:"ğŸ”“",cat:"music",desc:"è§£å¯† QMC/NCM åŠ å¯†éŸ³ä¹",html:()=>'<style>.um-frame{width:100%;height:70vh;border:none;border-radius:8px;background:#fafafa}</style><iframe class="um-frame" id="umFrame" src="/unlockmusic/" sandbox="allow-scripts allow-same-origin allow-downloads allow-forms allow-popups"></iframe>',init(t){}},{id:"webvpn",name:"WebVPN è½¬æ¢",icon:"ğŸ”—",cat:"campus",desc:"å†…ç½‘åœ°å€ â†” WebVPN åœ°å€",html:()=>'<div style="font-size:.75em;color:#888;margin-bottom:10px">ğŸ”’ AES-128-CFB åŠ å¯† Â· çº¯å®¢æˆ·ç«¯ Â· å¯†é’¥ <code>wrdvpnisthebest!</code></div><div class="t-lbl">ğŸŒ åŸå§‹ URLï¼ˆæ ¡å†…ç½‘å€ï¼‰</div><textarea class="t-ta" id="vpnIn" rows="2" placeholder="https://ehall.xjtu.edu.cn/xxx æˆ– http://dean.xjtu.edu.cn/xxx" style="min-height:50px"></textarea><div class="t-row" style="justify-content:center;margin:10px 0"><button class="t-btn t-btn-s" id="vpnEnc">ğŸ”’ åŠ å¯† â†’ WebVPN</button><button class="t-btn" id="vpnDec">ğŸ”“ è§£å¯† â†’ åŸå§‹</button></div><div class="t-lbl">ğŸ›¡ï¸ WebVPN URL</div><textarea class="t-ta" id="vpnOut" rows="2" placeholder="https://webvpn.xjtu.edu.cn/..." style="min-height:50px"></textarea><div class="t-row" style="justify-content:center;margin-top:8px"><button class="t-btn t-btn-o" id="vpnCopy" style="font-size:.75em">ğŸ“‹ å¤åˆ¶ç»“æœ</button></div><div id="vpnMsg" style="text-align:center;margin-top:6px;font-size:.78em;color:#888"></div>',init(t){var e=[119,114,100,118,112,110,105,115,116,104,101,98,101,115,116,33],n=e.slice();function a(t){for(var e="",n=0;n<t.length;n++)e+=("0"+t[n].toString(16)).slice(-2);return e}var l=function(t){var e=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],n=[1,2,4,8,16,32,64,128,27,54];function a(t){return e[t>>>24&255]<<24|e[t>>>16&255]<<16|e[t>>>8&255]<<8|e[255&t]}function l(t){return(t<<8|t>>>24)>>>0}for(var i=new Array(44),o=0;o<4;o++)i[o]=(t[4*o]<<24|t[4*o+1]<<16|t[4*o+2]<<8|t[4*o+3])>>>0;for(o=4;o<44;o++){var r=i[o-1];o%4==0&&(r=a(l(r))^n[o/4-1]<<24>>>0),i[o]=(i[o-4]^r)>>>0}function s(t){for(var n=0;n<16;n++)t[n]=e[t[n]]}function c(t){var e=t[1];t[1]=t[5],t[5]=t[9],t[9]=t[13],t[13]=e,e=t[2],t[2]=t[10],t[10]=e,e=t[6],t[6]=t[14],t[14]=e,e=t[3],t[3]=t[15],t[15]=t[11],t[11]=t[7],t[7]=e}function d(t){return 255&(t<<1^(128&t?27:0))}function p(t){for(var e=0;e<4;e++){var n=4*e,a=t[n],l=t[n+1],i=t[n+2],o=t[n+3];t[n]=d(a^l)^l^i^o,t[n+1]=d(l^i)^i^o^a,t[n+2]=d(i^o)^o^a^l,t[n+3]=d(o^a)^a^l^i}}function u(t,e){for(var n=0;n<4;n++){var a=i[4*e+n];t[4*n]^=a>>>24&255,t[4*n+1]^=a>>>16&255,t[4*n+2]^=a>>>8&255,t[4*n+3]^=255&a}}return function(t){var e=t.slice();u(e,0);for(var n=1;n<10;n++)s(e),c(e),p(e),u(e,n);return s(e),c(e),u(e,10),e}}(e);var i=t.querySelector("#vpnMsg");t.querySelector("#vpnEnc").onclick=function(){var e=t.querySelector("#vpnIn").value.trim();if(e)try{var o=e.split("://");if(o.length<2)return void(i.textContent="è¯·è¾“å…¥å®Œæ•´ URLï¼ˆå« http:// æˆ– https://ï¼‰");var r=o[0],s=o.slice(1).join("://").split("/"),c=s[0],d=s.slice(1).join("/"),p=c.split(":"),u=p[0],f=p.length>1?"-"+p[1]:"",v=function(t){for(var e=[],a=n.slice(),i=0;i<t.length;i+=16){for(var o=l(a),r=[],s=0;s<16&&i+s<t.length;s++){var c=t[i+s]^o[s];r.push(c),e.push(c)}for(a=r.slice();a.length<16;)a.push(0)}return e}(function(t){for(var e=[],n=0;n<t.length;n++){var a=t.charCodeAt(n);if(a<128)e.push(a);else if(a<2048)e.push(192|a>>6),e.push(128|63&a);else if(a>=55296&&a<=56319){var l=65536+(a-55296<<10)+(t.charCodeAt(++n)-56320);e.push(240|l>>18),e.push(128|l>>12&63),e.push(128|l>>6&63),e.push(128|63&l)}else e.push(224|a>>12),e.push(128|a>>6&63),e.push(128|63&a)}return e}(u)),h="https://webvpn.xjtu.edu.cn/"+r+f+"/"+a(n)+a(v)+(d?"/"+d:"");t.querySelector("#vpnOut").value=h,i.textContent="âœ… è½¬æ¢æˆåŠŸ",i.style.color="#67c23a"}catch(t){i.textContent="âŒ "+t.message,i.style.color="#f56c6c"}else i.textContent="è¯·è¾“å…¥åŸå§‹ URL"},t.querySelector("#vpnDec").onclick=function(){var e=t.querySelector("#vpnOut").value.trim();if(e)try{var a=e.split("/");if(a.length<5)return void(i.textContent="WebVPN URL æ ¼å¼ä¸æ­£ç¡®");var o=a[3],r=a[4],s=a.slice(5).join("/"),c="";if(o.indexOf("-")>0){var d=o.split("-");o=d[0],c=":"+d[1]}var p=o+"://"+function(t){for(var e="",n=0;n<t.length;){var a=t[n];if(a<128)e+=String.fromCharCode(a),n++;else if(a<224)e+=String.fromCharCode((31&a)<<6|63&t[n+1]),n+=2;else if(a<240)e+=String.fromCharCode((15&a)<<12|(63&t[n+1])<<6|63&t[n+2]),n+=3;else{var l=(7&a)<<18|(63&t[n+1])<<12|(63&t[n+2])<<6|63&t[n+3];e+=String.fromCodePoint(l),n+=4}}return e}(function(t){for(var e=[],a=n.slice(),i=0;i<t.length;i+=16){for(var o=l(a),r=t.slice(i,i+16),s=0;s<r.length;s++)e.push(r[s]^o[s]);for(a=r.slice();a.length<16;)a.push(0)}return e}(function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(parseInt(t.substr(n,2),16));return e}(r.substring(32))))+c+(s?"/"+s:"");t.querySelector("#vpnIn").value=p,i.textContent="âœ… è§£å¯†æˆåŠŸ",i.style.color="#67c23a"}catch(t){i.textContent="âŒ "+t.message,i.style.color="#f56c6c"}else i.textContent="è¯·è¾“å…¥ WebVPN URL"},t.querySelector("#vpnCopy").onclick=function(){var e=t.querySelector("#vpnOut").value||t.querySelector("#vpnIn").value;e&&navigator.clipboard.writeText(e).then(function(){t.querySelector("#vpnCopy").textContent="âœ“ å·²å¤åˆ¶",setTimeout(function(){t.querySelector("#vpnCopy").textContent="ğŸ“‹ å¤åˆ¶ç»“æœ"},1500)})}}},{id:"xjtucal",name:"äº¤å¤§æ—¥å†",icon:"ğŸ«",cat:"campus",desc:"ä½œæ¯æ—¶é—´ Â· å­¦æœŸå‘¨æ•° Â· æ•™å­¦æ¥¼æŸ¥è¯¢",html:()=>'<div class="t-row" style="justify-content:center;gap:6px;margin-bottom:12px"><button class="t-btn xc-tab" data-tab="schedule" style="font-weight:700">ğŸ“… ä½œæ¯æ—¶é—´</button><button class="t-btn t-btn-o xc-tab" data-tab="week">ğŸ“† å­¦æœŸå‘¨æ•°</button><button class="t-btn t-btn-o xc-tab" data-tab="building">ğŸ¢ æ•™å­¦æ¥¼</button></div><div id="xcSchedule"><div class="t-row" style="justify-content:center"><span id="xcSeason" style="font-size:.82em;font-weight:600;color:#409eff"></span></div><table class="ct-table" id="xcTimeTable"><thead><tr><th>èŠ‚æ¬¡</th><th>ä¸Šè¯¾</th><th>ä¸‹è¯¾</th><th>è€ƒå‹¤å¼€å§‹</th><th>è€ƒå‹¤ç»“æŸ</th></tr></thead><tbody id="xcTimeTbody"></tbody></table></div><div id="xcWeek" style="display:none"><div class="t-lbl">ğŸ“… å¼€å­¦æ—¥æœŸ</div><div class="t-row"><input type="date" class="t-in" id="xcStart" style="max-width:200px"><button class="t-btn t-btn-s" id="xcCalcWeek">è®¡ç®—</button></div><div id="xcWeekResult" style="background:#f0f7ff;border-radius:10px;padding:18px;text-align:center;margin-top:10px"><div style="font-size:.78em;color:#888">å½“å‰æ˜¯</div><div id="xcWeekVal" style="font-size:2.5em;font-weight:700;color:#409eff">â€”</div><div id="xcWeekDay" style="font-size:.82em;color:#999;margin-top:4px"></div></div></div><div id="xcBuilding" style="display:none"><div class="t-lbl">ğŸ” æœç´¢æ•™å­¦æ¥¼</div><input class="t-in" id="xcBldSearch" placeholder="è¾“å…¥å…³é”®è¯ï¼Œå¦‚ ä¸»æ¥¼ã€Cåº§ã€åˆ›æ–°æ¸¯..."><div id="xcBldResult" class="t-res" style="margin-top:8px;max-height:400px"></div></div>',init(t){var e=(new Date).getMonth()+1,n=e>=5&&e<=9,a=n?{1:{s:"8:00",e:"8:50",as:"7:20",ae:"8:05"},2:{s:"9:00",e:"9:50",as:"8:20",ae:"9:05"},3:{s:"10:10",e:"11:00",as:"9:35",ae:"10:15"},4:{s:"11:10",e:"12:00",as:"10:35",ae:"11:15"},5:{s:"14:30",e:"15:20",as:"13:50",ae:"14:35"},6:{s:"15:30",e:"16:20",as:"14:50",ae:"15:35"},7:{s:"16:40",e:"17:30",as:"16:05",ae:"16:45"},8:{s:"17:40",e:"18:30",as:"17:05",ae:"17:45"},9:{s:"19:40",e:"20:30",as:"19:00",ae:"19:45"},10:{s:"20:40",e:"21:30",as:"20:05",ae:"20:45"},11:{s:"21:40",e:"22:30",as:"21:05",ae:"21:45"}}:{1:{s:"8:00",e:"8:50",as:"7:20",ae:"8:05"},2:{s:"9:00",e:"9:50",as:"8:20",ae:"9:05"},3:{s:"10:10",e:"11:00",as:"9:35",ae:"10:15"},4:{s:"11:10",e:"12:00",as:"10:35",ae:"11:15"},5:{s:"14:00",e:"14:50",as:"13:20",ae:"14:05"},6:{s:"15:00",e:"15:50",as:"14:20",ae:"15:05"},7:{s:"16:10",e:"17:00",as:"15:35",ae:"16:15"},8:{s:"17:10",e:"18:00",as:"16:35",ae:"17:15"},9:{s:"19:10",e:"20:00",as:"18:30",ae:"19:15"},10:{s:"20:10",e:"21:00",as:"19:35",ae:"20:15"},11:{s:"21:10",e:"22:00",as:"20:35",ae:"21:15"}};t.querySelector("#xcSeason").textContent=n?"â˜€ï¸ å½“å‰ï¼šå¤å­£ä½œæ¯ï¼ˆ5-9æœˆï¼‰":"â„ï¸ å½“å‰ï¼šå†¬å­£ä½œæ¯ï¼ˆ10-æ¬¡å¹´4æœˆï¼‰";for(var l=t.querySelector("#xcTimeTbody"),i=(new Date).getHours(),o=(new Date).getMinutes(),r=("0"+i).slice(-2)+":"+("0"+o).slice(-2),s=1;s<=11;s++){var c=a[s],d=r>=c.s.replace(/^(\d):/,"0$1")&&r<=c.e.replace(/^(\d):/,"0$1"),p=document.createElement("tr");d&&(p.style.cssText="background:#f0f7ff;font-weight:600"),p.innerHTML='<td style="text-align:center;font-weight:700">ç¬¬ '+s+" èŠ‚"+(d?" ğŸ”µ":"")+"</td><td>"+c.s+"</td><td>"+c.e+'</td><td style="color:#888">'+c.as+'</td><td style="color:#888">'+c.ae+"</td>",l.appendChild(p)}t.querySelector("#xcCalcWeek").onclick=function(){var e=t.querySelector("#xcStart").value;if(e){var n=new Date(e+"T00:00:00"),a=new Date;a.setHours(0,0,0,0);var l=a-n,i=Math.floor(l/864e5),o=Math.floor(i/7)+1;o<1?(t.querySelector("#xcWeekVal").textContent="è¿˜æœªå¼€å­¦",t.querySelector("#xcWeekDay").textContent="è·å¼€å­¦è¿˜æœ‰ "+-i+" å¤©"):(t.querySelector("#xcWeekVal").textContent="ç¬¬ "+o+" å‘¨",t.querySelector("#xcWeekDay").textContent="æ˜ŸæœŸ"+["æ—¥","ä¸€","äºŒ","ä¸‰","å››","äº”","å…­"][a.getDay()]+" Â· å¼€å­¦ç¬¬ "+i+" å¤© Â· "+a.toLocaleDateString("zh-CN"))}else t.querySelector("#xcWeekVal").textContent="è¯·é€‰æ‹©æ—¥æœŸ"};var u=[{campus:"å…´åº†æ ¡åŒº",buildings:["ä¸»æ¥¼ï¼ˆAã€Bã€Cã€Dåº§ï¼‰","ç†ç§‘æ¥¼","å·¥ç¨‹é¦†","é€¸å¤«ç§‘å­¦é¦†","é€¸å¤«å¤–æ–‡æ¥¼","æ•™å­¦ä¸»æ¥¼","ä¸œä¸€æ¥¼","ä¸œäºŒæ¥¼","ä¸œä¸‰æ¥¼","ä¸œå››æ¥¼","ä¸œäº”æ¥¼","ä¸­ä¸€æ¥¼","ä¸­äºŒæ¥¼","ä¸­ä¸‰æ¥¼","è¥¿ä¸€æ¥¼","è¥¿äºŒæ¥¼","è¥¿ä¸‰æ¥¼","è´¢ç»æ ¡åŒºä¸»æ¥¼","å®ªæ¢“å ‚"]},{campus:"é›å¡”æ ¡åŒº",buildings:["æ•™å­¦æ¥¼ï¼ˆæ•™ä¸€~æ•™å…­ï¼‰","å®éªŒæ¥¼","å›¾ä¹¦é¦†"]},{campus:"åˆ›æ–°æ¸¯æ ¡åŒº",buildings:["æ¶µè‹±æ¥¼","åšå­¦æ¥¼","æ ¼ç‰©æ¥¼","æ˜å¾·æ¥¼","ç«‹å¾·æ¥¼","å¼˜æ–‡æ¥¼","ç¬ƒè¡Œæ¥¼","è‡´è¿œæ¥¼","å´‡å®æ¥¼","æ•è¡Œæ¥¼","åšè§‚æ¥¼","æ…æ€æ¥¼","æ±‚æ˜¯æ¥¼","æ­£å¿ƒæ¥¼","è¯šæ„æ¥¼","è‡´çŸ¥æ¥¼","è¡Œå¥æ¥¼","æ—¥æ–°æ¥¼"]},{campus:"æ›²æ±Ÿæ ¡åŒº",buildings:["æ•™å­¦æ¥¼"]},{campus:"åŒ»å­¦æ ¡åŒº(å«é™„å±åŒ»é™¢)",buildings:["åŸºç¡€åŒ»å­¦é™¢æ•™å­¦æ¥¼","å…¬å…±å«ç”Ÿå­¦é™¢","è¯å­¦é™¢","å£è…”åŒ»é™¢æ•™å­¦æ¥¼"]}];function f(e){var n="";u.forEach(function(t){var a=t.buildings.filter(function(n){return!e||n.indexOf(e)>=0||t.campus.indexOf(e)>=0});a.length&&(n+='<div style="font-weight:600;color:#409eff;margin:8px 0 4px">ğŸ« '+t.campus+" ("+a.length+")</div>",a.forEach(function(t){n+='<div style="padding:3px 0 3px 16px;font-size:.85em;border-bottom:1px solid #f5f5f5">ğŸ“ '+t+"</div>"}))}),t.querySelector("#xcBldResult").innerHTML=n||'<div style="color:#999;text-align:center">æœªæ‰¾åˆ°åŒ¹é…çš„æ•™å­¦æ¥¼</div>'}f(""),t.querySelector("#xcBldSearch").oninput=function(){f(this.value.trim())};var v=t.querySelectorAll(".xc-tab"),h={schedule:t.querySelector("#xcSchedule"),week:t.querySelector("#xcWeek"),building:t.querySelector("#xcBuilding")};v.forEach(function(t){t.onclick=function(){v.forEach(function(t){t.className="t-btn t-btn-o xc-tab"}),t.className="t-btn xc-tab",t.style.fontWeight="700",Object.keys(h).forEach(function(t){h[t].style.display="none"}),h[t.dataset.tab].style.display=""}})}}],g=document.getElementById("toolGrid"),w=document.getElementById("toolOverlay"),S=document.getElementById("toolBody"),k=document.getElementById("toolTitle");document.body.appendChild(w);const M=document.getElementById("toolFilters");function T(){if(S.querySelectorAll("[data-cleanup]").forEach(t=>{try{t._cleanup&&t._cleanup()}catch(t){}}),S._cleanup)try{S._cleanup()}catch(t){}w.classList.remove("open"),S.innerHTML="",document.body.style.overflow=""}[{id:"all",label:"âœ¨ å…¨éƒ¨"},{id:"campus",label:"ğŸ« æ ¡å›­"},{id:"music",label:"ğŸµ éŸ³ä¹"},{id:"academic",label:"ğŸ”¬ å­¦æœ¯"},{id:"dev",label:"ğŸ›  å¼€å‘"},{id:"productivity",label:"ğŸ“Š æ•ˆç‡"},{id:"fun",label:"ğŸ® æå®¢"}].forEach(t=>{const e=document.createElement("button");e.className="tf-btn"+("all"===t.id?" active":""),e.textContent=t.label,e.dataset.cat=t.id,e.onclick=()=>{M.querySelectorAll(".tf-btn").forEach(t=>t.classList.remove("active")),e.classList.add("active"),g.querySelectorAll(".tool-card").forEach(e=>e.classList.toggle("hidden","all"!==t.id&&e.dataset.cat!==t.id))},M.appendChild(e)}),y.forEach(t=>{const e=document.createElement("div");e.className="tool-card",e.dataset.cat=t.cat,e.dataset.id=t.id,e.innerHTML='<div class="tc-icon">'+t.icon+'</div><div class="tc-name">'+t.name+'</div><div class="tc-desc">'+t.desc+"</div>",e.onclick=()=>{if(t.external)window.open(t.external,"_blank");else if(k.textContent=t.icon+" "+t.name,S.innerHTML=t.html(),w.classList.add("open"),document.body.style.overflow="hidden",t.init)try{const e=t.init(S);e&&e.catch&&e.catch(e=>console.error(t.id+" init error:",e))}catch(e){console.error(t.id+" init error:",e)}},g.appendChild(e)}),document.getElementById("toolClose").onclick=T,w.onclick=t=>{t.target===w&&T()},document.addEventListener("keydown",t=>{"Escape"===t.key&&w.classList.contains("open")&&T()})}()</script><div class="site-footer"><div class="sf-motto">å¥½å¥½å­¦ä¹ ï¼Œå¤©å¤©å‘ä¸Šâœï¸</div><div class="sf-legal">Â© 2024-2026, Xi'an | <a href="https://beian.miit.gov.cn/" target="_blank" rel="noopener">é²ICPå¤‡2026005393å·</a> Â· <a target="_blank" rel="noopener" href="https://hexo.io/zh-cn/index.html">Hexo</a>/<a target="_blank" rel="noopener" href="https://github.com/yeliqin666/my_blog">æ™´çº¸</a></div></div><script defer src="/js/randomHeaderContent.js"></script><script defer src="/js/returnToTop.js"></script><script defer src="/js/returnToLastPage.js"></script><script defer src="/js/toc.js"></script><script defer src="/js/codeBlock.js"></script><script defer src="/js/lightgallery/lightgallery.umd.min.js"></script><script defer src="/js/lightgallery/plugins/lg-thumbnail.umd.min.js"></script><script defer src="/js/lightgallery/plugins/lg-fullscreen.umd.min.js"></script><script defer src="/js/lightgallery/plugins/lg-zoom.umd.min.js"></script><script defer src="/js/lightgallery/plugins/lg-rotate.umd.min.js"></script><script>document.addEventListener("DOMContentLoaded",function(){if("undefined"!=typeof lightGallery){var e=document.querySelector(".article-gallery");e&&e.querySelector(".gallery-item")&&lightGallery(e,{selector:".gallery-item",plugins:["undefined"!=typeof lgThumbnail?lgThumbnail:null,"undefined"!=typeof lgFullscreen?lgFullscreen:null,"undefined"!=typeof lgZoom?lgZoom:null,"undefined"!=typeof lgRotate?lgRotate:null].filter(Boolean),thumbnail:!0,zoom:!0,rotate:!0,fullScreen:!0,zoomFromOrigin:!0,actualSize:!0,enableZoomAfter:300})}})</script><script defer src="https://events.vercount.one/js"></script></div><div class="progress-wrap shadow-drop-2-bottom"><svg class="progress-circle svg-content" width="100%" height="100%" viewBox="-1 -1 102 102"><path d="M50,1 a49,49 0 0,1 0,98 a49,49 0 0,1 0,-98"/></svg> <svg class="btn-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="20" height="20"><path fill="currentColor" d="M12 8l-6 6h12z"/></svg></div><div class="return-to-last-progress-wrap shadow-drop-2-bottom"><svg class="progress-circle svg-content" width="100%" height="100%" viewBox="-1 -1 102 102"><path d="M50,1 a49,49 0 0,1 0,98 a49,49 0 0,1 0,-98"/></svg> <svg class="btn-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="20" height="20"><path fill="currentColor" d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/></svg></div><script defer src="/js/emojiHandler.js"></script><script>document.addEventListener("DOMContentLoaded",()=>{wrapEmojis(".paper");var a={note:'<svg viewBox="0 0 16 16" fill="currentColor"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"/></svg>',tip:'<svg viewBox="0 0 16 16" fill="currentColor"><path d="M8 1.5c-2.363 0-4 1.69-4 3.75 0 .984.424 1.625.984 2.304l.214.253c.223.264.47.556.673.848.284.411.537.896.621 1.49a.75.75 0 0 1-1.484.211c-.04-.282-.163-.547-.37-.847a8 8 0 0 0-.542-.68c-.084-.1-.173-.205-.268-.32C3.201 7.75 2.5 6.766 2.5 5.25 2.5 2.31 4.863 0 8 0s5.5 2.31 5.5 5.25c0 1.516-.701 2.5-1.328 3.259-.095.115-.184.22-.268.319-.207.245-.383.453-.541.681-.208.3-.33.565-.37.847a.751.751 0 0 1-1.485-.212c.084-.593.337-1.078.621-1.489.203-.292.45-.584.673-.848l.213-.253c.561-.679.985-1.32.985-2.304 0-2.06-1.637-3.75-4-3.75ZM5.75 12h4.5a.75.75 0 0 1 0 1.5h-4.5a.75.75 0 0 1 0-1.5ZM6 15.25a.75.75 0 0 1 .75-.75h2.5a.75.75 0 0 1 0 1.5h-2.5a.75.75 0 0 1-.75-.75Z"/></svg>',important:'<svg viewBox="0 0 16 16" fill="currentColor"><path d="M0 1.75C0 .784.784 0 1.75 0h12.5C15.216 0 16 .784 16 1.75v9.5A1.75 1.75 0 0 1 14.25 13H8.06l-2.573 2.573A1.458 1.458 0 0 1 3 14.543V13H1.75A1.75 1.75 0 0 1 0 11.25Zm1.75-.25a.25.25 0 0 0-.25.25v9.5c0 .138.112.25.25.25h2a.75.75 0 0 1 .75.75v2.19l2.72-2.72a.749.749 0 0 1 .53-.22h6.5a.25.25 0 0 0 .25-.25v-9.5a.25.25 0 0 0-.25-.25Zm7 2.25v2.5a.75.75 0 0 1-1.5 0v-2.5a.75.75 0 0 1 1.5 0ZM9 9a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z"/></svg>',warning:'<svg viewBox="0 0 16 16" fill="currentColor"><path d="M6.457 1.047c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0 1 14.082 15H1.918a1.75 1.75 0 0 1-1.543-2.575Zm1.763.707a.25.25 0 0 0-.44 0L1.698 13.132a.25.25 0 0 0 .22.368h12.164a.25.25 0 0 0 .22-.368Zm.53 3.996v2.5a.75.75 0 0 1-1.5 0v-2.5a.75.75 0 0 1 1.5 0ZM9 11a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z"/></svg>',caution:'<svg viewBox="0 0 16 16" fill="currentColor"><path d="M4.47.22A.749.749 0 0 1 5 0h6c.199 0 .389.079.53.22l4.25 4.25c.141.14.22.331.22.53v6a.749.749 0 0 1-.22.53l-4.25 4.25A.749.749 0 0 1 11 16H5a.749.749 0 0 1-.53-.22L.22 11.53A.749.749 0 0 1 0 11V5c0-.199.079-.389.22-.53Zm.84 1.28L1.5 5.31v5.38l3.81 3.81h5.38l3.81-3.81V5.31L10.69 1.5ZM8 4a.75.75 0 0 1 .75.75v3.5a.75.75 0 0 1-1.5 0v-3.5A.75.75 0 0 1 8 4Zm0 8a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"/></svg>'},e={note:"Note",tip:"Tip",important:"Important",warning:"Warning",caution:"Caution"};document.querySelectorAll(".post-md blockquote").forEach(function(t){var r=t.querySelector("p:first-child");if(r){var o=r.innerHTML.match(/^\[!(NOTE|TIP|IMPORTANT|WARNING|CAUTION)\]\s*/i);if(o){var n=o[1].toLowerCase();t.className="gfm-alert gfm-alert-"+n,r.innerHTML=r.innerHTML.replace(o[0],""),r.textContent.trim()||r.remove();var l=document.createElement("p");l.className="gfm-alert-title",l.innerHTML=(a[n]||"")+" "+e[n],t.insertBefore(l,t.firstChild)}}})})</script></div></body></html>