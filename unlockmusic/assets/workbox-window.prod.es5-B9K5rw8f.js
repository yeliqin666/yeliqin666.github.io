try{self["workbox:window:7.2.0"]&&_()}catch{}function w(e,r){return new Promise(function(t){var n=new MessageChannel;n.port1.onmessage=function(n){t(n.data)},e.postMessage(r,[n.port2])})}function W(n){n=(n=>{if("object"!=typeof n||!n)return n;var t=n[Symbol.toPrimitive];if(void 0===t)return String(n);if("object"!=typeof(t=t.call(n,"string")))return t;throw new TypeError("@@toPrimitive must return a primitive value.")})(n);return"symbol"==typeof n?n:n+""}function k(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,W(r.key),r)}}function b(n,t){return(b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n})(n,t)}function j(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=n[e];return r}function L(n,t){var e,r=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r)return(r=r.call(n)).next.bind(r);if(Array.isArray(n)||(r=((n,t)=>{var e;if(n)return"string"==typeof n?j(n,t):"Map"===(e="Object"===(e=Object.prototype.toString.call(n).slice(8,-1))&&n.constructor?n.constructor.name:e)||"Set"===e?Array.from(n):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?j(n,t):void 0})(n))||t)return r&&(n=r),e=0,function(){return e>=n.length?{done:!0}:{done:!1,value:n[e++]}};throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}try{self["workbox:core:7.2.0"]&&_()}catch{}var P=function(){var e=this;this.promise=new Promise(function(n,t){e.resolve=n,e.reject=t})};function E(n,t){var e=location.href;return new URL(n,e).href===new URL(t,e).href}var g=function(n,t){this.type=n,Object.assign(this,t)};function d(n,t,e){return e?t?t(n):n:(n&&n.then||(n=Promise.resolve(n)),t?n.then(t):n)}function O(){}var x={type:"SKIP_WAITING"};function S(n,t){return n&&n.then?n.then(O):Promise.resolve()}var U=(r=>{function n(n,t){var a,e;return void 0===t&&(t={}),(a=r.call(this)||this).nn={},a.tn=0,a.rn=new P,a.en=new P,a.on=new P,a.un=0,a.an=new Set,a.cn=function(){var n=a.fn,t=n.installing;0<a.tn||!E(t.scriptURL,a.sn.toString())||performance.now()>a.un+6e4?(a.vn=t,n.removeEventListener("updatefound",a.cn)):(a.hn=t,a.an.add(t),a.rn.resolve(t)),++a.tn,t.addEventListener("statechange",a.ln)},a.ln=function(n){var t=a.fn,e=n.target,r=e.state,o=e===a.vn,i={sw:e,isExternal:o,originalEvent:n};!o&&a.mn&&(i.isUpdate=!0),a.dispatchEvent(new g(r,i)),"installed"===r?a.wn=self.setTimeout(function(){"installed"===r&&t.waiting===e&&a.dispatchEvent(new g("waiting",i))},200):"activating"===r&&(clearTimeout(a.wn),o||a.en.resolve(e))},a.yn=function(n){var t=a.hn,e=t!==navigator.serviceWorker.controller;a.dispatchEvent(new g("controlling",{isExternal:e,originalEvent:n,sw:t,isUpdate:a.mn})),e||a.on.resolve(t)},a.gn=(e=function(n){var t=n.data,e=n.ports,r=n.source;return d(a.getSW(),function(){a.an.has(r)&&a.dispatchEvent(new g("message",{data:t,originalEvent:n,ports:e,sw:r}))})},function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];try{return Promise.resolve(e.apply(this,n))}catch(n){return Promise.reject(n)}}),a.sn=n,a.nn=t,navigator.serviceWorker.addEventListener("message",a.gn),a}var t=r,e=((e=n).prototype=Object.create(t.prototype),b(e.prototype.constructor=e,t),n.prototype);return e.register=function(n){var t,e,n=(void 0===n?{}:n).immediate,r=void 0!==n&&n;try{var o=this;return d((t=function(){return o.mn=!!navigator.serviceWorker.controller,o.dn=o.pn(),d(o.bn(),function(n){o.fn=n,o.dn&&(o.hn=o.dn,o.en.resolve(o.dn),o.on.resolve(o.dn),o.dn.addEventListener("statechange",o.ln,{once:!0}));var t=o.fn.waiting;return t&&E(t.scriptURL,o.sn.toString())&&(o.hn=t,Promise.resolve().then(function(){o.dispatchEvent(new g("waiting",{sw:t,wasWaitingBeforeRegister:!0}))}).then(function(){})),o.hn&&(o.rn.resolve(o.hn),o.an.add(o.hn)),o.fn.addEventListener("updatefound",o.cn),navigator.serviceWorker.addEventListener("controllerchange",o.yn),o.fn})},(e=(()=>{if(!r&&"complete"!==document.readyState)return S(new Promise(function(n){return window.addEventListener("load",n)}))})())&&e.then?e.then(t):t()))}catch(n){return Promise.reject(n)}},e.update=function(){try{return this.fn?d(S(this.fn.update())):d()}catch(n){return Promise.reject(n)}},e.getSW=function(){return void 0!==this.hn?Promise.resolve(this.hn):this.rn.promise},e.messageSW=function(t){try{return d(this.getSW(),function(n){return w(n,t)})}catch(n){return Promise.reject(n)}},e.messageSkipWaiting=function(){this.fn&&this.fn.waiting&&w(this.fn.waiting,x)},e.pn=function(){var n=navigator.serviceWorker.controller;return n&&E(n.scriptURL,this.sn.toString())?n:void 0},e.bn=function(){try{var e=this;return d((t=>{try{var n=d(navigator.serviceWorker.register(e.sn,e.nn),function(n){return e.un=performance.now(),n})}catch(n){return t(n)}return n&&n.then?n.then(void 0,t):n})(function(n){throw n}))}catch(n){return Promise.reject(n)}},k((t=n).prototype,[{key:"active",get:function(){return this.en.promise}},{key:"controlling",get:function(){return this.on.promise}}]),Object.defineProperty(t,"prototype",{writable:!1}),t})((()=>{function n(){this.Pn=new Map}var t=n.prototype;return t.addEventListener=function(n,t){this.jn(n).add(t)},t.removeEventListener=function(n,t){this.jn(n).delete(t)},t.dispatchEvent=function(n){for(var t,e=L((n.target=this).jn(n.type));!(t=e()).done;)(0,t.value)(n)},t.jn=function(n){return this.Pn.has(n)||this.Pn.set(n,new Set),this.Pn.get(n)},n})());export{U as Workbox,g as WorkboxEvent,w as messageSW};